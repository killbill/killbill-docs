<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 2.0.12"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><title>Installation via CloudFormation</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
/* html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%} */
body{margin:0}
a{background:transparent; text-decoration: none !important;}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
/* button,input,select,textarea{font-family:inherit;font-size:100%;margin:0} */
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
/* body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto} */
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
    h1{font-size:2.75em}
    h2{font-size:2.3125em}
    h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
    h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
    body.toc2{padding-left:15em;padding-right:0}
    #toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
    #toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
    #toc.toc2>ul{font-size:.9em;margin-bottom:0}
    #toc.toc2 ul ul{margin-left:0;padding-left:1em}
    #toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
    body.toc2.toc-right{padding-left:0;padding-right:15em}
    body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
    #toc.toc2{width:20em}
    #toc.toc2 #toctitle{font-size:1.375em}
    #toc.toc2>ul{font-size:.95em}
    #toc.toc2 ul ul{padding-left:1.25em}
    body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:#2E3336;padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
    *{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
    a{color:inherit!important;text-decoration:underline!important}
    a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
    a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
    abbr[title]:after{content:" (" attr(title) ")"}
    pre,blockquote,tr,img{page-break-inside:avoid}
    thead{display:table-header-group}
    img{max-width:100%!important}
    p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
    h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
    #toc,.sidebarblock,.exampleblock>.content{background:none!important}
    #toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
    .sect1{padding-bottom:0!important}
    .sect1+.sect1{border:0!important}
    #header>h1:first-child{margin-top:1.25rem}
    body.book #header{text-align:center}
    body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
    body.book #header .details{border:0!important;display:block;padding:0!important}
    body.book #header .details span:first-child{margin-left:0!important}
    body.book #header .details br{display:block}
    body.book #header .details br+span:before{content:none!important}
    body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
    body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
    .listingblock code[data-lang]:before{display:block}
    #footer{background:none!important;padding:0 .9375em}
    #footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
    .hide-on-print{display:none!important}
    .print-only{display:block!important}
    .hide-for-print{display:none!important}
    .show-for-print{display:inherit!important}}

  .listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */

/*Custom CSS*/
body {
  background: #F5F5F5;
}
#header-main-title {
  float: left;
}
#cards {
  clear: both;
}
#cards .btn-primary {
  background-color: #1F7CB5;
  border-color: #1F7CB5;
}
#asciinema-player-section {
  margin-bottom: 25px;
}
/* .container{
    max-width: 100%;
} */
.logo{
    width: 70%;
    padding-top: 20px;
    padding-bottom: 10px;
}
#main-row {
  min-height: 100%;
  height: 100%;
}
#toc {
  border-bottom: none;
  /* position: fixed; */
  overflow-y: auto;
  margin:0;
top: 0px;
z-index: 9;
/* position: relative !important; */
  
}

#toc .nav-link {
  font-size: 13px;
}
.toc{
  margin-top: 116px;
  max-width: 223px;

}
#toctitle{
    font-size: 1.2em;
}
#aws-link {
  width: 80%;
}
.sectlevel1{
    padding-left: 7px;
}
/* .border-columns{ */
    /* background-color: #2E3336; */
/* } */
.footer {
    display: block;
    bottom: 0;
    width: 75%;
    height: 40px;
    line-height: 40px;
    background-color: #2E3336;
    margin: 0 auto;
}
.footer > .container {
    padding-right: 15px;
    padding-left: 15px;
}
nav[data-toggle=toc] .nav>li>a {
    display: block;
    padding: 4px 20px;
    font-size: 13px;
    font-weight: 500;
    color: rgba(0,0,0,.65);
}
nav[data-toggle=toc] .nav>li>a:hover {
    background-color: #ba3925;
    color: rgba(0,0,0,.65);
}
.text-muted {
    color: rgba(0,0,0,.65)!important;
}
/* nav[data-toggle='toc'] {
    top: 80px;
} */
nav[data-toggle=toc] .nav .nav>li>a, nav[data-toggle=toc] .nav .nav>li>a:focus, nav[data-toggle=toc] .nav .nav>li>a:hover {
    padding-left: 10px;
}
nav[data-toggle=toc] .nav .nav>li>.active, nav[data-toggle=toc] .nav .nav>li>.active:focus, nav[data-toggle=toc] .nav .nav>li>.active:hover, nav[data-toggle=toc] .nav-link.active, nav[data-toggle=toc] .nav-link.active:focus, nav[data-toggle=toc] .nav-link.active:hover {
    padding-left: 10px;
    font-weight: 700;
    color: #ba3925;
    background-color: transparent;
    border-left: 2px solid #ba3925;
}
#toc > ul > li > ul {
  margin-left: 10px;
}

/* small screens */
@media (max-width: 767px) {
    /* override stickyness so that the navigation does not follow scrolling */
    nav[data-toggle='toc'] {
        margin-bottom: 42px;
        /* position: static !important; */
    }
    nav[data-toggle='toc'] .nav .active .nav {
        display: none;
    }
    #aws-link {
      width: 50%;
      margin-bottom: 5px;
    }
}



html,
body {
  height: 100%;
}

/* Scrollbar styles */
#toc::-webkit-scrollbar {
  width: 3px;
}

/* Track */
#toc::-webkit-scrollbar-track {
  background: transparent;
}

/* Handle */
#toc::-webkit-scrollbar-thumb {
  background: rgb(182, 182, 182);
}

/* Handle on hover */
#toc::-webkit-scrollbar-thumb:hover {
  background: rgb(163, 163, 163);
}

/* Gernal styles */
.toggle-nav-btn {
  position: absolute;
  right: 30px;
  top: 34px;

}
.bd-sidebar {
  height: 100vh !important;
  
}
.bd-sidebar .nav>li>a {
  padding-left: 10px;
  margin-left: 5px;
}
.main-link {
  border-left: 2px solid #ba3925;
  color: #ba3925 !important;
  cursor: pointer;
  font-weight: bold;
}

/* card styles */
.card-wrapper {
  height: 280px;
  -webkit-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
  -moz-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Firefox 3.5 - 3.6 */
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
}
.card-wrapper .card-body {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.card-wrapper .card-body .card-title {
  color: #ba3925;
  font-size: 22px;
  font-weight: 500;
}
#cards .btn-primary {
  background-color: #1f7cb5;
  border-color: #1f7cb5;
}
.LogoAndToggle{
  border-bottom: 1px solid gainsboro;
    margin: 0px;
    display: block;
    padding-bottom: 10px;
     background: whitesmoke;
}
/* media quires */
@media (max-width: 767px) {
  .bd-sidebar {
    height: 100px !important;
    border: 0;
  }

  #toc{
    min-width: 100%;
    top: 93px;
  }
  #toc.show{
    border-bottom: none;
    left: 0;
    min-width: 100%;
    margin: 0;
    box-shadow: 0px 7px 10px 2px #ababab3b;
  }
  .LogoAndToggle{
    display: flex;
    justify-content: space-around;
    position: fixed;
    width: 100%;
   margin: 0;

  }
  .bd-links {
    background: white;
    z-index: 9;
    position: relative;
    max-height: 300px;
    overflow-y: scroll;
    margin-top: -5px;
    border-bottom: 1px solid #d6d6d6;
  }
}
@media (min-width: 768px) {
  .bd-links {
    height: 100% !important;
    overflow-y: auto;
    display: block !important;
  }
  #toc {
   position: relative;
    top: 0;
    max-width: 100%;
    margin: 0;
  }
  .toc{
    height: calc(100vh - 97px) !important;
  }
  .bd-sidebar {
    padding-right: 20px;
    top: 0 !important;
  }
}

.bdr-right{
  border-right: 1px solid gainsboro;
}
.bdr-left{
  border-left: 1px solid gainsboro;
}


nav[data-toggle=toc] .nav>li>a:focus, nav[data-toggle=toc] .nav>li>a:hover{
  border-left: 2px solid #ba3925;
}
nav[data-toggle=toc] .nav>li>a:hover{
  background-color: #ba39251a;
  color: rgba(0,0,0,.65);
}
pre.pygments .tok-n {
    color: rgba(0,0,0,.9) !important;
}</style>
<style>pre { line-height: 125%; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #49483e }
pre.pygments { background: #272822; color: #f8f8f2 }
pre.pygments .tok-c { color: #75715e } /* Comment */
pre.pygments .tok-err { color: #960050; background-color: #1e0010 } /* Error */
pre.pygments .tok-k { color: #66d9ef } /* Keyword */
pre.pygments .tok-l { color: #ae81ff } /* Literal */
pre.pygments .tok-n { color: #f8f8f2 } /* Name */
pre.pygments .tok-o { color: #f92672 } /* Operator */
pre.pygments .tok-p { color: #f8f8f2 } /* Punctuation */
pre.pygments .tok-ch { color: #75715e } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #75715e } /* Comment.Multiline */
pre.pygments .tok-cp { color: #75715e } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #75715e } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #75715e } /* Comment.Single */
pre.pygments .tok-cs { color: #75715e } /* Comment.Special */
pre.pygments .tok-gd { color: #f92672 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gi { color: #a6e22e } /* Generic.Inserted */
pre.pygments .tok-go { color: #66d9ef } /* Generic.Output */
pre.pygments .tok-gp { color: #f92672; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #75715e } /* Generic.Subheading */
pre.pygments .tok-kc { color: #66d9ef } /* Keyword.Constant */
pre.pygments .tok-kd { color: #66d9ef } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #f92672 } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #66d9ef } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #66d9ef } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #66d9ef } /* Keyword.Type */
pre.pygments .tok-ld { color: #e6db74 } /* Literal.Date */
pre.pygments .tok-m { color: #ae81ff } /* Literal.Number */
pre.pygments .tok-s { color: #e6db74 } /* Literal.String */
pre.pygments .tok-na { color: #a6e22e } /* Name.Attribute */
pre.pygments .tok-nb { color: #f8f8f2 } /* Name.Builtin */
pre.pygments .tok-nc { color: #a6e22e } /* Name.Class */
pre.pygments .tok-no { color: #66d9ef } /* Name.Constant */
pre.pygments .tok-nd { color: #a6e22e } /* Name.Decorator */
pre.pygments .tok-ni { color: #f8f8f2 } /* Name.Entity */
pre.pygments .tok-ne { color: #a6e22e } /* Name.Exception */
pre.pygments .tok-nf { color: #a6e22e } /* Name.Function */
pre.pygments .tok-nl { color: #f8f8f2 } /* Name.Label */
pre.pygments .tok-nn { color: #f8f8f2 } /* Name.Namespace */
pre.pygments .tok-nx { color: #a6e22e } /* Name.Other */
pre.pygments .tok-py { color: #f8f8f2 } /* Name.Property */
pre.pygments .tok-nt { color: #f92672 } /* Name.Tag */
pre.pygments .tok-nv { color: #f8f8f2 } /* Name.Variable */
pre.pygments .tok-ow { color: #f92672 } /* Operator.Word */
pre.pygments .tok-w { color: #f8f8f2 } /* Text.Whitespace */
pre.pygments .tok-mb { color: #ae81ff } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #ae81ff } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #ae81ff } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #ae81ff } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #ae81ff } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #e6db74 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #e6db74 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #e6db74 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #e6db74 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #e6db74 } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #e6db74 } /* Literal.String.Double */
pre.pygments .tok-se { color: #ae81ff } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #e6db74 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #e6db74 } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #e6db74 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #e6db74 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #e6db74 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #e6db74 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #a6e22e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #f8f8f2 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #f8f8f2 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #f8f8f2 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #f8f8f2 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #ae81ff } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 bd-sidebar sticky-top border-columns border-right p-0"><div class="mx-auto text-center LogoAndToggle"><a href="/0.22/"><img class="logo rounded mx-auto d-block img-fluid" src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" /></a><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3 toggle-nav-btn" type="button" data-toggle="collapse" data-target="#toc" aria-controls="toc" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><nav class="collapse bd-links toc" id="toc" data-toggle="toc"></nav></div><div class="col-12 col-md-9 col-xl-10 border-right"><div id="header"><h1>Installation via CloudFormation</h1></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>CloudFormation deployments leverage the capabilites of AWS infrastructure to provide a <strong>prodution ready</strong> deployment with a <strong>1-click</strong> button: Both Kill Bill and KAUI instances can be scaled up or down, and CloudWatch provides the requires metrics to follow what is happening, and the RDS database comes automatically configured and ready for use.</p></div></div></div>
<div class="sect1"><h2 id="_overview_of_the_stack">Overview of the Stack</h2><div class="sectionbody"><div class="paragraph"><p>Running Kill Bill on AWS using our <a href="https://aws.amazon.com/marketplace/pp/prodview-nochv5omslmds?ref=_ptnr_doc_" onclick="getOutboundLink('https://aws.amazon.com/marketplace/pp/prodview-nochv5omslmds?ref=_ptnr_doc_'); return false;">official CloudFormation template</a> is the easiest and fastest way to get started with a production cluster. <strong>It is also the only method of installation that is certified by the core developers for a Highly Available, horizontally scalable and production-ready installation.</strong></p></div>
<div class="paragraph"><p>With the click of a button, the template will install and configure:</p></div>
<div class="ulist"><ul><li><p>Kill Bill and Kaui on a custom AMI optimized for AWS workloads (integrated with CloudWatch, SQS, SES, X-Ray and more)</p></li><li><p>Auto Scaling Groups, to automatically scale up and down the number of instances as needed (such as when batches of invoices are generated)</p></li><li><p>A load balancer, integrated with our internal healthchecks to promptly take out of rotation unhealthy instances</p></li><li><p>A RDS Aurora Cluster with automatic failover</p></li></ul></div>
<div class="paragraph"><p>The following diagram shows the various AWS entities that will be created by CloudFormation:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/cf_stack.png" alt="cf stack"></span></p></div>
<div class="paragraph"><p>The elastic load balancer will listen on the port <code>80</code> for routing traffic to our Kill Bill server instances, and on the port <code>9090</code> for accessing KAUI, our admin UI. Internally, both Kill Bill server instances, and KAUI server instances will listen on port <code>8080</code>.</p></div>
<div class="paragraph"><p>The CloudFormation template allows to specify different groups of subnets to isolate the Kill Bill server and KAUI server instances with the RDS instances. Typically one would specify at least 2 subnets, in different availability zones for each of those groups.</p></div>
<div class="paragraph"><p>The CloudFormation template will also create individual security groups for the various components:</p></div>
<div class="ulist"><ul><li><p>LB Security group: Opens ingress <code>9090</code>  and <code>80</code>, and everything for egress.</p></li><li><p>KB Security group: Opens ingress <code>8080</code>, and everything for egress.</p></li><li><p>RDS Security group: Opens ingress <code>3306</code>, and everything for egress.</p></li></ul></div>
<div class="paragraph"><p><strong>Pre-requisites:</strong> The CloudFormation template will require thr following:</p></div>
<div class="ulist"><ul><li><p>A valid VPC</p></li><li><p>A VPC Internet Gateway configured to access all the touside world</p></li><li><p>Valid subnets for the VPC as described above</p></li></ul></div>
<div class="paragraph"><p><strong>Example:</strong> Given a VPC with a CIDR of <code>192.168.0.0/16</code></p></div>
<div class="paragraph"><p>An example of a valid routing table for would be</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Destination</th><th class="tableblock halign-left valign-top">Target</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">192.168.0.0/16</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">local</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">0.0.0.0/0</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">igw-08bbaa2909129b953</p></td></tr></tbody></table>
<div class="paragraph"><p>Regarding the subnets, the following configuration would work:</p></div>
<div class="ulist"><ul><li><p>Kill Bill server and KAUI server instances subnets: <code>192.168.64.0/18</code> (zone <code>1e</code>) and <code>192.168.192.0/18</code> (zone <code>1b</code>)</p></li><li><p>RDS subnets: <code>192.168.128.0/18</code> (zone <code>1e</code>) and <code>192.168.0.0/18</code> (zone <code>1b</code>)</p></li></ul></div></div></div>
<div class="sect1"><h2 id="_cloudwatch_integration">CloudWatch Integration</h2><div class="sectionbody"><div class="paragraph"><p>Our AMIs come pre-configured with CloudWatch integration to allow for better diagnostics. Below is a screenshot of the metrics that come for free:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/aws/cloudwatch.png" alt="cloudwatch"></span></p></div>
<div class="paragraph"><p>In order to have business metrics, we also allow to install additional plugins suchs as our free <a href="https://github.com/killbill/killbill-analytics-plugin">Analytics plugin</a>. This provides a subscription billing management solution as feature-rich as popular SaaS platforms, but that you can control. Below is a screenshot of such business metrics:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/aws/analytics.png" alt="analytics"></span></p></div>
<div class="paragraph"><p>For installation support along the way, reach out to <code>support@killbill.io</code>.</p></div></div></div>
<div class="sect1"><h2 id="_configuration_options">Configuration Options</h2><div class="sectionbody"><div class="paragraph"><p>The installation supports the following configuration options:</p></div>
<div class="ulist"><ul><li><p><strong>VpcId:</strong> the VPC to use for the installation. In your AWS Console, go to <strong>Services</strong> and search for <strong>VPC</strong>. Under <strong>Your VPCs</strong>, locate the VPC ID you would like to use or create a new one.</p></li><li><p><strong>Subnets:</strong> the subnets to use for the KB and KAUi instances. They should be associated with at least two different availability zones. In the VPC Dashboard, go to <strong>Subnets</strong> and find two subnets in your VPC <strong>in two different availability zones</strong>. Alternatively, create new ones (use 10.0.0.0/24 and 10.0.1.0/24 as the IPv4 CIDR for instance).</p></li><li><p><strong>RDSSubnets:</strong> the subnets to use for the RDS instance. The RDS instances require a subnet group with at least two different availability zones.</p></li><li><p><strong>KeyName:</strong> name of an existing EC2 KeyPair to enable SSH access to the instances. You can create a new one by going to <strong>Key Pairs</strong> in your EC2 Dashboard.</p></li><li><p><strong>HTTPLocation:</strong> IP address range allowed to access the load balancer (you can always use 0.0.0.0/0 initially and adjust access later on).</p></li><li><p><strong>EnvType:</strong> environment purpose (test, prod, etc.). No difference in the stack being created but stack will send this variable to <code>CloudWatch</code> as a dimension.</p></li><li><p><strong>InstanceType:</strong> the EC2 instance type to use for Kill Bill.</p></li><li><p><strong>KillBillServerCapacity:</strong> the initial number of Kill Bill instances in the Auto Scaling group.</p></li><li><p><strong>KauiServerCapacity:</strong> the initial number of Kaui instances in the Auto Scaling group. We recommend using the default value <code>2</code>.</p></li><li><p><strong>KBAdminPassword:</strong> the <code>admin</code> password that will be used for the default <code>root</code> user which has all the permissions. By default such password is set to <code>password</code>. Typically, one would use the <code>root</code> user to create additional roles (along with their permissions) to limit the scope of what specific applications or users can do. See our <a href="https://docs.killbill.io/latest/user_management.html">User Management Documentation</a>.</p></li><li><p><strong>DBClass:</strong> the database instance type to use for RDS.</p></li><li><p><strong>DBName:</strong> database name for Kill Bill. We recommend using the default value <strong>killbill</strong>.</p></li><li><p><strong>KauiDBName:</strong> database name for Kaui. We recommend using the default value <strong>kaui</strong>.</p></li><li><p><strong>DBUser:</strong> database admin username</p></li><li><p><strong>DBPassword:</strong> database admin password</p></li><li><p><strong>EnableCloudWatchMetrics:</strong> whether to record Kill Bill metrics in CloudWatch. Strongly recommended for production. When enabled, a default monitoring dashboard will be created.</p></li></ul></div></div></div>
<div class="sect1"><h2 id="_setup_steps">Setup Steps</h2><div class="sectionbody"><div class="olist arabic"><ol class="arabic"><li><p>Start the installation process by going to <a href="https://aws.amazon.com/marketplace/pp/prodview-nochv5omslmds?ref=_ptnr_doc_" onclick="getOutboundLink('https://aws.amazon.com/marketplace/pp/prodview-nochv5omslmds?ref=_ptnr_doc_'); return false;">AWS Marketplace</a>: click <strong>Continue to Subscribe</strong> and populate the configuration options in the CloudFormation form.</p></li><li><p>Launch the stack.</p></li><li><p>Upon success, the Outputs tab will display the load balancer URL. Kill Bill is available on port 80 while Kaui on port 9090.</p></li></ol></div>
<div class="paragraph"><p>You can log-in to Kaui by going to <a class="bare" href="http://&lt;LOAD_BALANCER_URL&gt;:9090">http://&lt;LOAD_BALANCER_URL&gt;:9090</a> (make sure your IP address can access the load balancer, as defined by the parameter <code>HTTPLocation</code>, or add it to the security group as needed). Default credentials are: <strong>admin/password</strong>.</p></div>
<div class="paragraph"><p>Take a look at our <a href="http://docs.killbill.io/latest/getting_started.html#_using_kill_bill_with_kaui">Getting Started</a> guide for an introduction to Kaui.</p></div>
<div class="sect2"><h3 id="_ssl">SSL</h3><div class="paragraph"><p>You can configure the load balancer to accept SSL connections.</p></div>
<div class="paragraph"><p>First, find the load balancer in the EC2 console:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/find-lb.png" alt="find lb"></span></p></div>
<div class="paragraph"><p>Two HTTP listeners are configured by default, on ports 9090 (Kaui) and 80 (Kill Bill). You need to add two additional HTTPS listeners.</p></div>
<div class="paragraph"><p>For example, to expose Kaui behind port 443, the configuration would look like this (note the Forward To section):</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/add-lb-listener.png" alt="add lb listener"></span></p></div>
<div class="paragraph"><p>If you don&#8217;t have SSL certificates in ACM nor IAM, you can import a new one right away on this page.</p></div>
<div class="paragraph"><p>Tip: you can upload a self-signed certificate:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout privateKey.key -out certificate.crt
openssl rsa -in privateKey.key -text &gt; private.pem
openssl x509 -inform PEM -in certificate.crt &gt; public.pem</code></pre></div></div>
<div class="paragraph"><p>Import the content of <code>private.pem</code> (omit everything before <code>-----BEGIN RSA PRIVATE KEY-----</code>) and <code>public.pem</code> in the first two textboxes of this page, and make sure to select IAM (not ACM).</p></div>
<div class="paragraph"><p>Finally, you need to allow HTTPS traffic in your security group:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/lb-security-group.png" alt="lb security group"></span></p></div>
<div class="paragraph"><p>The load balancer is now configured to redirect SSL traffic on port 443 to Kaui. You can do the same for Kill Bill and disable the HTTP rules in your Security Group.</p></div>
<div class="paragraph"><p>Tip: if you are using a self-signed certificate, Chrome will complain about the certificate being invalid (<code>NET::ERR_CERT_INVALID</code>). On this error page, type <code>thisisunsafe</code> on your keyboard to bypass the error.</p></div></div></div></div>
<div class="sect1"><h2 id="_troubleshooting_section">TroubleShooting Section</h2><div class="sectionbody"><div class="sect2"><h3 id="_stack_creation">Stack Creation</h3><div class="paragraph"><p>There are a couple of possible issues when starting the stack from CloudFormation (CFN) and so the goal of this section
is to provide some tips debugging the issues, and knowledge about where to find various logs. Also keep in mind
that starting the CFN stack will typically take in the order of 15-20', mostly because of the time it takes to setup the
RDS cluster, so be patient&#8230;&#8203;</p></div>
<div class="paragraph"><p>Let&#8217;s start with the <a href="https://console.aws.amazon.com/cloudformation">CloudFormation console</a>: The stack will have a status which will be <code>CREATE_IN_PROGRESS</code> for the duration of the initialization, and will then either transition to <code>CREATE_COMPLETE</code> or <code>CREATE_FAILED</code>. In case of <code>CREATE_FAILED</code>, try to locate from the <code>Resources</code> tab which resource fail to initialize properly.</p></div></div>
<div class="sect2"><h3 id="_possible_issues">Possible Issues</h3><div class="paragraph"><p>The main possible issues can be summarized as:</p></div>
<div class="paragraph"><p><strong>Issues with the template</strong></p></div>
<div class="paragraph"><p>If you think there is an issue with the CFN template itself, please report any issue to <code>support@killbill.io</code></p></div>
<div class="paragraph"><p><strong>AWS Errors</strong></p></div>
<div class="paragraph"><p>Typical Issues are:</p></div>
<div class="ulist"><ul><li><p>Insufficient IAM Permissions</p></li><li><p>Limit Exceeded</p></li><li><p>Security Group Does Not Exist in VPC</p></li><li><p>RDS Cluster failed to come up</p></li><li><p>&#8230;&#8203;</p></li></ul></div>
<div class="paragraph"><p>Make sure to check our <code>Pre-requisites</code> section to ensure you have setup a valid VPC with valid subnets. Fow AWS specific issues, please refer to the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html">AWS troubleshooting documentation</a></p></div>
<div class="paragraph"><p><strong>Service Unavailable</strong></p></div>
<div class="paragraph"><p>We suggest to check the following:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Is there any issues reported in the CFN logs</p></li><li><p>Is the database up and running and accessible from the Kill Bill/Kaui ec2 instances?</p></li><li><p>Is the database schema correctly installed?</p></li><li><p>Is the Kill Bill/Kaui server correctly started and listening to the port <code>8080</code>?</p></li><li><p>Are Kill Bill/Kaui server accessible from the LB, respectively on port <code>80</code> and <code>9090</code>?</p></li><li><p>Are there any errors, stack traces in our logs</p></li></ol></div></div>
<div class="sect2"><h3 id="_practical_tips">Practical Tips</h3><div class="paragraph"><p><strong>SSH to EC2 Instances</strong></p></div>
<div class="paragraph"><p>In order to answer these questions, you will first need to be able to SSH to the EC2 instances:</p></div>
<div class="paragraph"><p>From the EC2 dashboard, you can locate the instances by filtering on a prefix of the name of your stack, in my case <code>my-stack</code>,
and as indicated below you will see the instances for Kill Bill server and KAUI. In the example below we see one of each:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ec2-instances.png" alt="ec2 instances"></span></p></div>
<div class="paragraph"><p>You can select one instance and then from the description tag, you will have access to:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Public DNS</p></li><li><p>The security group</p></li></ol></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ec2-description.png" alt="ec2 description"></span></p></div>
<div class="paragraph"><p>You will need to first click on the security group link to open the inbound port 22 required for SSH, as shown below:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/security-group.png" alt="security group"></span></p></div>
<div class="paragraph"><p>Then, you can issue the SSH command, by copying the Public DNS from the description tab:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># SSH as ubuntu user
&gt; ssh -i  &lt;LOCATION_KEY&gt;/&lt;KEY_NAME&gt;.pem ubuntu@&lt;PUBLIC_DNS&gt;
# Move to tomcat user
&gt; sudo su - tomcat</code></pre></div></div>
<div class="paragraph"><p><strong>CFN LOGS</strong></p></div>
<div class="paragraph"><p>If there are any issue with CFN, it should be available from <code>/var/log/cfn-init-cmd.log</code> or <code>/var/log/cfn-init.log</code></p></div>
<div class="paragraph"><p>Other logs of interest may include:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>/var/log/cfn-wire.log
/var/log/cloud-init-output.log
/var/log/awslogs.logs
/var/log/xray/xray.log</code></pre></div></div>
<div class="paragraph"><p><strong>Kill Bill/KAUI Server Logs</strong></p></div>
<div class="paragraph"><p>The Kill Bill/KAUI server logs are located under <code>/var/lib/tomcat/logs/</code>, with the main 2 interesting logs being:</p></div>
<div class="ulist"><ul><li><p><code>killbill.out</code>: All Kill Bill server logs, configured as <code>INFO</code> by default</p></li><li><p><code>kaui.out</code>: All KAUI server logs, configured as <code>INFO</code> by default</p></li><li><p><code>localhost_access_log&#8230;&#8203;</code>: Access requests to the servers</p></li></ul></div>
<div class="paragraph"><p>The configuration of the logging (log rotation, log level, &#8230;&#8203;) can be found in <code>/var/lib/killbill/config/logback.xml</code></p></div>
<div class="paragraph"><p>If you update the <code>logback.xml</code> (or any configuration file) you will need to restart the service. In order to restart the service, you can run as <code>root</code> the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Restart  killbill server instance
&gt; service killbill restart
# Restart  kaui server instance
&gt; service kaui restart</code></pre></div></div>
<div class="paragraph"><p><strong>Access to the Database</strong></p></div>
<div class="paragraph"><p>From any Kill Bill EC2 instance, it is possible to access the RDS database. On each node, there is <code>mysql</code> client installed
allowing to access the database. The database hostname can be obtained from the CFN Resources screen, or one can also
extract this information from the <code>killbill.propertes</code> file:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>&gt; grep &#39;org.killbill.dao&#39; /var/lib/killbill/config/killbill.properties
org.killbill.dao.password=killbill
org.killbill.dao.url=jdbc:mysql:aurora://mystack-test-rdscluster-1qwiqitatcb9m.cluster-cah16olm8gkg.us-east-1.rds.amazonaws.com:3306/killbill
org.killbill.dao.user=killbill</code></pre></div></div>
<div class="paragraph"><p>Based on such info, the following command would allow to get a mysql prompt:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>&gt; mysql -h mystack-test-rdscluster-1qwiqitatcb9m.cluster-cah16olm8gkg.us-east-1.rds.amazonaws.com -u killbill -pkillbill killbill
&gt; show tables
&gt; ...</code></pre></div></div>
<div class="paragraph"><p><strong>Sevice Health</strong></p></div>
<div class="paragraph"><p>Since both Kill Bill/KAUI server listen on port <code>8080</code>, one can easily check if the service is running by issuing the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>telnet 127.0.0.1 8080
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is &#39;^]&#39;.</code></pre></div></div>
<div class="paragraph"><p>For the Kill Bill server specifically some useful commands are:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Healthcheck
&gt; curl http://127.0.0.1:8080/1.0/healthcheck</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Check which Kill Bill &amp; plugin versions
&gt; curl -u admin:&lt;KBAdminPassword&gt; http://127.0.0.1:8080/1.0/kb/nodesInfo | jq
[
  {
    &quot;nodeName&quot;: &quot;ip-192-168-65-236.ec2.internal&quot;,
    &quot;bootTime&quot;: &quot;2020-02-02T21:26:44.000Z&quot;,
    &quot;lastUpdatedDate&quot;: &quot;2020-02-02T21:26:44.000Z&quot;,
    &quot;kbVersion&quot;: &quot;0.22.1&quot;,
    &quot;apiVersion&quot;: &quot;0.53.17&quot;,
    &quot;pluginApiVersion&quot;: &quot;0.26.3&quot;,
    &quot;commonVersion&quot;: &quot;0.23.7&quot;,
    &quot;platformVersion&quot;: &quot;0.39.12&quot;,
    &quot;pluginsInfo&quot;: [
      {
        &quot;bundleSymbolicName&quot;: &quot;org.kill-bill.billing.killbill-platform-osgi-bundles-kpm&quot;,
        &quot;pluginKey&quot;: null,
        &quot;pluginName&quot;: &quot;org.kill-bill.billing.killbill-platform-osgi-bundles-kpm&quot;,
        &quot;version&quot;: null,
        &quot;state&quot;: &quot;RUNNING&quot;,
        &quot;isSelectedForStart&quot;: true,
        &quot;services&quot;: []
      },
      {
        &quot;bundleSymbolicName&quot;: &quot;org.kill-bill.billing.killbill-platform-osgi-bundles-logger&quot;,
        &quot;pluginKey&quot;: null,
        &quot;pluginName&quot;: &quot;org.kill-bill.billing.killbill-platform-osgi-bundles-logger&quot;,
        &quot;version&quot;: null,
        &quot;state&quot;: &quot;RUNNING&quot;,
        &quot;isSelectedForStart&quot;: true,
        &quot;services&quot;: []
      }
    ]
  }
]</code></pre></div></div>
<div class="paragraph"><p><strong>System Diagnostics</strong></p></div>
<div class="paragraph"><p>In order to get some support, the first thing we would require is some information about your deployment. We have created a <code>diagnostic</code> command that can be run on the Kill Bill server nodes and the KAUI nodes.</p></div>
<div class="paragraph"><p>In order to get information about your Kill Bill server installation, the following command can be used:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Login as &#39;tomcat&#39;
&gt; sudo su - tomcat
#
# Assume a &#39;bob/lazar&#39; tenant
# Assume some credentials &#39;admin/password&#39;
# Details about DB host can be extracted from &#39;/var/lib/killbill/config/killbill.properties&#39;
#
&gt; kpm  diagnostic \
  --killbill-credentials=admin password \
  --bundles-dir=/var/lib/killbill/bundles \
  --database-name=killbill \
  --database-credentials=killbill killbill \
  --killbill-api-credentials=bob lazar \
  --killbill-web-path=/var/lib/tomcat/webapps \
  --database-host=my-stack-rdscluster-1uvr93sm7pzp.cluster-cah16olm8gkg.us-east-1.rds.amazonaws.com

...
Diagnostic data exported under /tmp/killbill-diagnostics-20200212-26849-c0rrz3/killbill-diagnostics-02-12-20.zip</code></pre></div></div>
<div class="paragraph"><p>Note that there is also a <code>--account-export=&lt;account_id&gt;</code> flag to export the data associated with a specific Kill Bill <code>account_id</code>.</p></div>
<div class="paragraph"><p>In order to get information about your Kaui server installation, the following command can be used:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Login as &#39;tomcat&#39;
&gt; sudo su - tomcat
#
# Assume a &#39;bob/lazar&#39; tenant
# Assume some credentials &#39;admin/password&#39;
# Details about DB host and killbill-url can be extracted from &#39;/var/lib/tomcat/bin/setenv2.sh&#39;
#
kpm  diagnostic \
  --killbill-credentials=admin password \
  --bundles-dir=/var/lib/killbill/bundles \
  --database-name=killbill \
  --database-credentials=killbill killbill \
  --killbill-api-credentials=bob lazar \
  --kaui-web-path=/var/lib/tomcat/webapps \
  --killbill-url=http://sbrossie-LB-1LJYJ1QHYSWQX-650823949.us-east-1.elb.amazonaws.com:80 \
  --database-host=sbrossier-rdscluster-1uvr93sm7pzp.cluster-cah16olm8gkg.us-east-1.rds.amazonaws.com</code></pre></div></div></div></div></div>
<div class="sect1"><h2 id="_upgrade_steps">Upgrade Steps</h2><div class="sectionbody"><div class="sect2"><h3 id="_newer_amis">Newer AMIs</h3><div class="paragraph"><p>The Kill Bill core team will provide new AMIs whenever necessary.</p></div>
<div class="paragraph"><p>Because the CloudFormation from AWS Marketplace will always reflect the latest AMI ids, you can simply update the stack with the latest CloudFormation template and the instances in the AutoScaling groups will be updated automatically.
We strongly recommend to always test the upgrade in a test environment first.</p></div>
<div class="paragraph"><p>We recommend to rely on the CloudFormation <code>ChangeSet</code> functionality to get a sense of what would be updated if the change was submitted. For more information about the CloudFormation <code>ChangeSet</code> functionality see this <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html">documentation</a>. Below is a summary of the steps:</p></div>
<div class="paragraph"><p>[1]. Update your CloudFormation template with the new Kill Bill and/or KAUI AMIs</p></div>
<div class="paragraph"><p>[2]. Create a new ChangeSet</p></div>
<div class="paragraph"><p>As a pre-requisite, make sure you have the capabilities to perform the operation, and then proceed with the change set:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/create-change-set.png" alt="create change set"></span></p></div>
<div class="paragraph"><p>If you do have the permissions, you will be prompted with the following message, that you will need to acknowledge:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/change-set-capabilities.png" alt="change set capabilities"></span></p></div>
<div class="paragraph"><p>[3]. Upload your new template</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/create-change-set-template.png" alt="create change set template"></span></p></div>
<div class="paragraph"><p>Go through the steps, accepting the defaults</p></div>
<div class="paragraph"><p>[4]. Review the CloudFormation changes</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/create-change-set-diff.png" alt="create change set diff"></span></p></div>
<div class="paragraph"><p>If those seem to match your template diff, then proceed with the change.</p></div>
<div class="paragraph"><p>[5]. Wait for the new stack to be up</p></div>
<div class="paragraph"><p>After CloudFormation change is done, you will see the <code>STATUS</code> or your stack transitions back to <code>CREATE_COMPLETE</code>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/create-change-set-success.png" alt="create change set success"></span></p></div>
<div class="paragraph"><p>However, the old instances may not have yet completed the shutdown sequence and so effectively the change is not really complete. You should really check your EC2 Dashboard and verify the state of the instances (old and new). For example in the screenshot below we can see that the old KAUI instance got <code>terminated</code> and the new one is <code>running</code>, and so at this point the upgrade has completed.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/kaui-terminated.png" alt="kaui terminated"></span></p></div></div></div></div></div></div></div></div><div class="container-fluid"><div class="row"><div class="col-12 border-columns"></div><div id="footer"><div id="footer-text">Last updated 2021-01-11 23:47:49 +0500</div><script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create','UA-32705710-3','auto');
          ga('send','pageview');
          var getOutboundLink = function(url) {
            ga('send', {
              hitType: 'event',
              eventCategory: 'outbound',
              eventAction: 'click',
              eventLabel: url,
              hitCallback: function(){document.location = url;}
            });
          }
          </script></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script><script src="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script></body></html>