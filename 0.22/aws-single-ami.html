<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 2.0.13"><link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" href="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><title>Installation via Single AMI</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
/* @import "https://stylishthemes.github.io/Syntax-Themes/pygments/css-github/pygments-base16-monokai-dark.css"; */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
  display: block;
}
audio,
canvas,
video {
  display: inline-block;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
[hidden],
template {
  display: none;
}
script {
  display: none !important;
}
/* html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%} */
body {
  margin: 0;
}
a {
  background: transparent;
  text-decoration: none !important;
}
a:focus {
  outline: thin dotted;
}
a:active,
a:hover {
  outline: 0;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
dfn {
  font-style: italic;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}
mark {
  background: #ff0;
  color: #000;
}
code,
kbd,
pre,
samp {
  font-family: monospace;
  font-size: 1em;
}
pre {
  white-space: pre-wrap;
}
q {
  quotes: "\201C" "\201D" "\2018" "\2019";
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 0;
}
fieldset {
  border: 1px solid silver;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
/* button,input,select,textarea{font-family:inherit;font-size:100%;margin:0} */
button,
input {
  line-height: normal;
}
button,
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  padding: 0;
}
input[type="search"] {
  -webkit-appearance: textfield;
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
}
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
  vertical-align: top;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
*,
*:before,
*:after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
html,
body {
  font-size: 100%;
}
/* body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto} */
a:hover {
  cursor: pointer;
}
img,
object,
embed {
  max-width: 100%;
  height: auto;
}
object,
embed {
  height: 100%;
}
img {
  -ms-interpolation-mode: bicubic;
}
#map_canvas img,
#map_canvas embed,
#map_canvas object,
.map_canvas img,
.map_canvas embed,
.map_canvas object {
  max-width: none !important;
}
.left {
  float: left !important;
}
.right {
  float: right !important;
}
.text-left {
  text-align: left !important;
}
.text-right {
  text-align: right !important;
}
.text-center {
  text-align: center !important;
}
.text-justify {
  text-align: justify !important;
}
.hide {
  display: none;
}
.antialiased,
body {
  -webkit-font-smoothing: antialiased;
}
img {
  display: inline-block;
  vertical-align: middle;
}
textarea {
  height: auto;
  min-height: 50px;
}
select {
  width: 100%;
}
p.lead,
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: 1.21875em;
  line-height: 1.6;
}
.subheader,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  line-height: 1.45;
  color: #7a2518;
  font-weight: 400;
  margin-top: 0;
  margin-bottom: 0.25em;
}
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6,
pre,
form,
p,
blockquote,
th,
td {
  margin: 0;
  padding: 0;
  direction: ltr;
}
a {
  color: #2156a5;
  text-decoration: underline;
  line-height: inherit;
}
a:hover,
a:focus {
  color: #1d4b8f;
}
a img {
  border: none;
}
p {
  font-family: inherit;
  font-weight: 400;
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  text-rendering: optimizeLegibility;
}
p aside {
  font-size: 0.875em;
  line-height: 1.35;
  font-style: italic;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-weight: 300;
  font-style: normal;
  color: #e44c3a;
  text-rendering: optimizeLegibility;
  margin-top: 1em;
  margin-bottom: 0.5em;
  line-height: 1.0125em;
}
h1 small,
h2 small,
h3 small,
#toctitle small,
.sidebarblock > .content > .title small,
h4 small,
h5 small,
h6 small {
  font-size: 60%;
  color: #e99b8f;
  line-height: 0;
}
h1 {
  font-size: 2.125em;
}
h2 {
  font-size: 1.6875em;
}
h3,
#toctitle,
.sidebarblock > .content > .title {
  font-size: 1.375em;
}
h4,
h5 {
  font-size: 1.125em;
}
h6 {
  font-size: 1em;
}
hr {
  border: solid #ddddd8;
  border-width: 1px 0 0;
  clear: both;
  margin: 1.25em 0 1.1875em;
  height: 0;
}
em,
i {
  font-style: italic;
  line-height: inherit;
}
strong,
b {
  font-weight: bold;
  line-height: inherit;
}
small {
  font-size: 60%;
  line-height: inherit;
}
code {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.9);
}
ul,
ol,
dl {
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  list-style-position: outside;
  font-family: inherit;
}
ul,
ol,
ul.no-bullet,
ol.no-bullet {
  margin-left: 1.5em;
}
ul li ul,
ul li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
  font-size: 1em;
}
ul.square li ul,
ul.circle li ul,
ul.disc li ul {
  list-style: inherit;
}
ul.square {
  list-style-type: square;
}
ul.circle {
  list-style-type: circle;
}
ul.disc {
  list-style-type: disc;
}
ul.no-bullet {
  list-style: none;
}
ol li ul,
ol li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
}
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}
abbr,
acronym {
  text-transform: uppercase;
  font-size: 90%;
  color: rgba(0, 0, 0, 0.8);
  border-bottom: 1px dotted #ddd;
  cursor: help;
}
abbr {
  text-transform: none;
}
blockquote {
  margin: 0 0 1.25em;
  padding: 0.5625em 1.25em 0 1.1875em;
  border-left: 1px solid #ddd;
}
blockquote cite {
  display: block;
  font-size: 0.9375em;
  color: rgba(0, 0, 0, 0.6);
}
blockquote cite:before {
  content: "\2014 \0020";
}
blockquote cite a,
blockquote cite a:visited {
  color: rgba(0, 0, 0, 0.6);
}
blockquote,
blockquote p {
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.85);
}
@media only screen and (min-width: 768px) {
  h1,
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title,
  h4,
  h5,
  h6 {
    line-height: 1.2;
  }
  h1 {
    font-size: 2.75em;
  }
  h2 {
    font-size: 2.3125em;
  }
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    font-size: 1.6875em;
  }
  h4 {
    font-size: 1.4375em;
  }
}
table {
  /* background: #fff; */
  margin-bottom: 1.25em;
  /* border: solid 1px #dedede; */
}
table thead,
table tfoot {
  /* background: #f7f8f7; */
  font-weight: bold;
}
table thead tr th,
table thead tr td,
table tfoot tr th,
table tfoot tr td {
  padding: 0.5em 0.625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
  text-align: left;
}
table tr th,
table tr td {
  padding: 0.5625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
}
table tr.even,
table tr.alt,
table tr:nth-of-type(even) {
  background: #f8f8f7;
}
table thead tr th,
table tfoot tr th,
table tbody tr td,
table tr td,
table tfoot tr td {
  display: table-cell;
  line-height: 1.6;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  line-height: 1.2;
  word-spacing: -0.05em;
}
h1 strong,
h2 strong,
h3 strong,
#toctitle strong,
.sidebarblock > .content > .title strong,
h4 strong,
h5 strong,
h6 strong {
  font-weight: 400;
}
.clearfix:before,
.clearfix:after,
.float-group:before,
.float-group:after {
  content: " ";
  display: table;
}
.clearfix:after,
.float-group:after {
  clear: both;
}
*:not(pre) > code {
  font-size: 0.9375em;
  font-style: normal !important;
  letter-spacing: 0;
  padding: 0.1em 0.5ex;
  word-spacing: -0.15em;
  /* background-color: #f7f7f8; */
  -webkit-border-radius: 4px;
  border-radius: 4px;
  line-height: 1.45;
  text-rendering: optimizeSpeed;
}
pre,
pre > code {
  line-height: 1.45;
  /* color: rgba(0, 0, 0, 0.9); */
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  text-rendering: optimizeSpeed;
}
.keyseq {
  color: rgba(51, 51, 51, 0.8);
}
kbd {
  display: inline-block;
  color: rgba(0, 0, 0, 0.8);
  font-size: 0.75em;
  line-height: 1.4;
  background-color: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em #fff inset;
  margin: -0.15em 0.15em 0 0.15em;
  padding: 0.2em 0.6em 0.2em 0.5em;
  vertical-align: middle;
  white-space: nowrap;
}
.keyseq kbd:first-child {
  margin-left: 0;
}
.keyseq kbd:last-child {
  margin-right: 0;
}
.menuseq,
.menu {
  color: rgba(0, 0, 0, 0.8);
}
b.button:before,
b.button:after {
  position: relative;
  top: -1px;
  font-weight: 400;
}
b.button:before {
  content: "[";
  padding: 0 3px 0 2px;
}
b.button:after {
  content: "]";
  padding: 0 2px 0 3px;
}
p a > code:hover {
  color: rgba(0, 0, 0, 0.9);
}
#header,
#content,
#footnotes,
#footer {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0;
  margin-bottom: 0;
  *zoom: 1;
  position: relative;
  padding-left: 0.9375em;
  padding-right: 0.9375em;
}
#header:before,
#header:after,
#content:before,
#content:after,
#footnotes:before,
#footnotes:after,
#footer:before,
#footer:after {
  content: " ";
  display: table;
}
#header:after,
#content:after,
#footnotes:after,
#footer:after {
  clear: both;
}
#content {
  margin-top: 1.25em;
}
#content:before {
  content: none;
}
#header > h1:first-child {
  color: rgba(0, 0, 0, 0.85);
  margin-top: 2.25rem;
  margin-bottom: 0;
}
#header > h1:first-child + #toc {
  margin-top: 8px;
  border-top: 1px solid #ddddd8;
}
#header > h1:only-child,
body.toc2 #header > h1:nth-last-child(2) {
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
}
#header .details {
  border-bottom: 1px solid #ddddd8;
  line-height: 1.45;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
  padding-left: 0.25em;
  color: rgba(0, 0, 0, 0.6);
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-flow: row wrap;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}
#header .details span:first-child {
  margin-left: -0.125em;
}
#header .details span.email a {
  color: rgba(0, 0, 0, 0.85);
}
#header .details br {
  display: none;
}
#header .details br + span:before {
  content: "\00a0\2013\00a0";
}
#header .details br + span.author:before {
  content: "\00a0\22c5\00a0";
  color: rgba(0, 0, 0, 0.85);
}
#header .details br + span#revremark:before {
  content: "\00a0|\00a0";
}
#header #revnumber {
  text-transform: capitalize;
}
#header #revnumber:after {
  content: "\00a0";
}
#content > h1:first-child:not([class]) {
  color: rgba(0, 0, 0, 0.85);
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
  margin-top: 0;
  padding-top: 1rem;
  margin-bottom: 1.25rem;
}
#toc {
  border-bottom: 1px solid #efefed;
  padding-bottom: 0.5em;
}
#toc > ul {
  margin-left: 0.125em;
}
#toc ul.sectlevel0 > li > a {
  font-style: italic;
}
#toc ul.sectlevel0 ul.sectlevel1 {
  margin: 0.5em 0;
}
#toc ul {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  list-style-type: none;
}
#toc a {
  text-decoration: none;
}
#toc a:active {
  text-decoration: underline;
}
#toctitle {
  color: #7a2518;
  font-size: 1.2em;
}
@media only screen and (min-width: 768px) {
  #toctitle {
    font-size: 1.375em;
  }
  body.toc2 {
    padding-left: 15em;
    padding-right: 0;
  }
  #toc.toc2 {
    margin-top: 0 !important;
    background-color: #f8f8f7;
    position: fixed;
    width: 15em;
    left: 0;
    top: 0;
    border-right: 1px solid #efefed;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
  #toc.toc2 #toctitle {
    margin-top: 0;
    font-size: 1.2em;
  }
  #toc.toc2 > ul {
    font-size: 0.9em;
    margin-bottom: 0;
  }
  #toc.toc2 ul ul {
    margin-left: 0;
    padding-left: 1em;
  }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
    padding-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 15em;
  }
  body.toc2.toc-right #toc.toc2 {
    border-right-width: 0;
    border-left: 1px solid #efefed;
    left: auto;
    right: 0;
  }
}
@media only screen and (min-width: 1280px) {
  body.toc2 {
    padding-left: 20em;
    padding-right: 0;
  }
  #toc.toc2 {
    width: 20em;
  }
  #toc.toc2 #toctitle {
    font-size: 1.375em;
  }
  #toc.toc2 > ul {
    font-size: 0.95em;
  }
  #toc.toc2 ul ul {
    padding-left: 1.25em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 20em;
  }
}
#content #toc {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
#content #toc > :first-child {
  margin-top: 0;
}
#content #toc > :last-child {
  margin-bottom: 0;
}
#footer {
  max-width: 100%;
  background-color: #2e3336;
  padding: 1.25em;
}
#footer-text {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.44;
}
.sect1 {
  padding-bottom: 0.625em;
}
@media only screen and (min-width: 768px) {
  .sect1 {
    padding-bottom: 1.25em;
  }
}
.sect1 + .sect1 {
  border-top: 1px solid #efefed;
}
#content h1 > a.anchor,
h2 > a.anchor,
h3 > a.anchor,
#toctitle > a.anchor,
.sidebarblock > .content > .title > a.anchor,
h4 > a.anchor,
h5 > a.anchor,
h6 > a.anchor {
  position: absolute;
  z-index: 1001;
  width: 1.5ex;
  margin-left: -1.5ex;
  display: block;
  text-decoration: none !important;
  visibility: hidden;
  text-align: center;
  font-weight: 400;
}
#content h1 > a.anchor:before,
h2 > a.anchor:before,
h3 > a.anchor:before,
#toctitle > a.anchor:before,
.sidebarblock > .content > .title > a.anchor:before,
h4 > a.anchor:before,
h5 > a.anchor:before,
h6 > a.anchor:before {
  content: "\00A7";
  font-size: 0.85em;
  display: block;
  padding-top: 0.1em;
}
#content h1:hover > a.anchor,
#content h1 > a.anchor:hover,
h2:hover > a.anchor,
h2 > a.anchor:hover,
h3:hover > a.anchor,
#toctitle:hover > a.anchor,
.sidebarblock > .content > .title:hover > a.anchor,
h3 > a.anchor:hover,
#toctitle > a.anchor:hover,
.sidebarblock > .content > .title > a.anchor:hover,
h4:hover > a.anchor,
h4 > a.anchor:hover,
h5:hover > a.anchor,
h5 > a.anchor:hover,
h6:hover > a.anchor,
h6 > a.anchor:hover {
  visibility: visible;
}
#content h1 > a.link,
h2 > a.link,
h3 > a.link,
#toctitle > a.link,
.sidebarblock > .content > .title > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link {
  color: #e44c3a;
  text-decoration: none;
}
#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover {
  color: #a53221;
}
.audioblock,
.imageblock,
.literalblock,
.listingblock,
.stemblock,
.videoblock {
  margin-bottom: 1.25em;
}
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  text-rendering: optimizeLegibility;
  text-align: left;
  font-family: "Noto Serif", "DejaVu Serif", serif;
  font-size: 1rem;
  font-style: italic;
}
table.tableblock > caption.title {
  white-space: nowrap;
  overflow: visible;
  max-width: 0;
}
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  color: rgba(0, 0, 0, 0.85);
}
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: inherit;
}
.admonitionblock > table {
  border-collapse: separate;
  border: 0;
  background: none;
  width: 100%;
}
.admonitionblock > table td.icon {
  text-align: center;
  width: 80px;
}
.admonitionblock > table td.icon img {
  max-width: none;
}
.admonitionblock > table td.icon .title {
  font-weight: bold;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  text-transform: uppercase;
}
.admonitionblock > table td.content {
  padding-left: 1.125em;
  padding-right: 1.25em;
  border-left: 1px solid #ddddd8;
  color: rgba(0, 0, 0, 0.6);
}
.admonitionblock > table td.content > :last-child > :last-child {
  margin-bottom: 0;
}
.exampleblock > .content {
  border-style: solid;
  border-width: 1px;
  border-color: #e6e6e6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #fff;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.exampleblock > .content > :first-child {
  margin-top: 0;
}
.exampleblock > .content > :last-child {
  margin-bottom: 0;
}
.sidebarblock {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.sidebarblock > :first-child {
  margin-top: 0;
}
.sidebarblock > :last-child {
  margin-bottom: 0;
}
.sidebarblock > .content > .title {
  color: #7a2518;
  margin-top: 0;
  text-align: center;
}
.exampleblock > .content > :last-child > :last-child,
.exampleblock > .content .olist > ol > li:last-child > :last-child,
.exampleblock > .content .ulist > ul > li:last-child > :last-child,
.exampleblock > .content .qlist > ol > li:last-child > :last-child,
.sidebarblock > .content > :last-child > :last-child,
.sidebarblock > .content .olist > ol > li:last-child > :last-child,
.sidebarblock > .content .ulist > ul > li:last-child > :last-child,
.sidebarblock > .content .qlist > ol > li:last-child > :last-child {
  margin-bottom: 0;
}
.literalblock pre,
.listingblock pre[class="highlight"],
.listingblock pre[class^="highlight "],
.listingblock pre.CodeRay,
.listingblock pre.prettyprint {
  background: #f7f7f8;
}
.sidebarblock .literalblock pre,
.sidebarblock .listingblock pre[class="highlight"],
.sidebarblock .listingblock pre[class^="highlight "],
.sidebarblock .listingblock pre.CodeRay,
.sidebarblock .listingblock pre.prettyprint {
  background: #f2f1f1;
}
.literalblock pre,
.literalblock pre[class],
.listingblock pre,
.listingblock pre[class] {
  -webkit-border-radius: 4px;
  border-radius: 4px;
  word-wrap: break-word;
  padding: 1em;
  font-size: 0.8125em;
}
.literalblock pre.nowrap,
.literalblock pre[class].nowrap,
.listingblock pre.nowrap,
.listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal;
}
@media only screen and (min-width: 768px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 0.90625em;
  }
}
@media only screen and (min-width: 1280px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 1em;
  }
}
.literalblock.output pre {
  color: #f7f7f8;
  background-color: rgba(0, 0, 0, 0.9);
}
.listingblock pre.highlightjs {
  padding: 0;
}
.listingblock pre.highlightjs > code {
  padding: 1em;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.listingblock pre.prettyprint {
  border-width: 0;
}
.listingblock > .content {
  position: relative;
}
.listingblock code[data-lang]:before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 0.425rem;
  right: 0.5rem;
  line-height: 1;
  text-transform: uppercase;
  color: #999;
}
.listingblock:hover code[data-lang]:before {
  display: block;
}
.listingblock.terminal pre .command:before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: #999;
}
.listingblock.terminal pre .command:not([data-prompt]):before {
  content: "$";
}
table.pyhltable {
  border-collapse: separate;
  border: 0;
  margin-bottom: 0;
  background: none;
}
table.pyhltable td {
  vertical-align: top;
  padding-top: 0;
  padding-bottom: 0;
}
table.pyhltable td.code {
  padding-left: 0.75em;
  padding-right: 0;
}
pre.pygments .lineno,
table.pyhltable td:not(.code) {
  color: #999;
  padding-left: 0;
  padding-right: 0.5em;
  border-right: 1px solid #ddddd8;
}
pre.pygments .lineno {
  display: inline-block;
  margin-right: 0.25em;
}
table.pyhltable .linenodiv {
  background: none !important;
  padding-right: 0 !important;
}
.quoteblock {
  margin: 0 1em 1.25em 1.5em;
  display: table;
}
.quoteblock > .title {
  margin-left: -1.5em;
  margin-bottom: 0.75em;
}
.quoteblock blockquote,
.quoteblock blockquote p {
  color: rgba(0, 0, 0, 0.85);
  font-size: 1.15rem;
  line-height: 1.75;
  word-spacing: 0.1em;
  letter-spacing: 0;
  font-style: italic;
  text-align: justify;
}
.quoteblock blockquote {
  margin: 0;
  padding: 0;
  border: 0;
}
.quoteblock blockquote:before {
  content: "\201c";
  float: left;
  font-size: 2.75em;
  font-weight: bold;
  line-height: 0.6em;
  margin-left: -0.6em;
  color: #7a2518;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.quoteblock blockquote > .paragraph:last-child p {
  margin-bottom: 0;
}
.quoteblock .attribution {
  margin-top: 0.5em;
  margin-right: 0.5ex;
  text-align: right;
}
.quoteblock .quoteblock {
  margin-left: 0;
  margin-right: 0;
  padding: 0.5em 0;
  border-left: 3px solid rgba(0, 0, 0, 0.6);
}
.quoteblock .quoteblock blockquote {
  padding: 0 0 0 0.75em;
}
.quoteblock .quoteblock blockquote:before {
  display: none;
}
.verseblock {
  margin: 0 1em 1.25em 1em;
}
.verseblock pre {
  font-family: "Open Sans", "DejaVu Sans", sans;
  font-size: 1.15rem;
  color: rgba(0, 0, 0, 0.85);
  font-weight: 300;
  text-rendering: optimizeLegibility;
}
.verseblock pre strong {
  font-weight: 400;
}
.verseblock .attribution {
  margin-top: 1.25rem;
  margin-left: 0.5ex;
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size: 0.9375em;
  line-height: 1.45;
  font-style: italic;
}
.quoteblock .attribution br,
.verseblock .attribution br {
  display: none;
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  display: block;
  letter-spacing: -0.05em;
  color: rgba(0, 0, 0, 0.6);
}
.quoteblock.abstract {
  margin: 0 0 1.25em 0;
  display: block;
}
.quoteblock.abstract blockquote,
.quoteblock.abstract blockquote p {
  text-align: left;
  word-spacing: 0;
}
.quoteblock.abstract blockquote:before,
.quoteblock.abstract blockquote p:first-of-type:before {
  display: none;
}
table.tableblock {
  max-width: 100%;
  border-collapse: separate;
}
table.tableblock td > .paragraph:last-child p > p:last-child,
table.tableblock th > p:last-child,
table.tableblock td > p:last-child {
  margin-bottom: 0;
}
table.spread {
  width: 100%;
}
table.tableblock,
th.tableblock,
td.tableblock {
  border: 0 solid #dedede;
}
table.grid-all th.tableblock,
table.grid-all td.tableblock {
  border-width: 0 1px 1px 0;
}
table.grid-all tfoot > tr > th.tableblock,
table.grid-all tfoot > tr > td.tableblock {
  border-width: 1px 1px 0 0;
}
table.grid-cols th.tableblock,
table.grid-cols td.tableblock {
  border-width: 0 1px 0 0;
}
table.grid-all * > tr > .tableblock:last-child,
table.grid-cols * > tr > .tableblock:last-child {
  border-right-width: 0;
}
table.grid-rows th.tableblock,
table.grid-rows td.tableblock {
  border-width: 0 0 1px 0;
}
table.grid-all tbody > tr:last-child > th.tableblock,
table.grid-all tbody > tr:last-child > td.tableblock,
table.grid-all thead:last-child > tr > th.tableblock,
table.grid-rows tbody > tr:last-child > th.tableblock,
table.grid-rows tbody > tr:last-child > td.tableblock,
table.grid-rows thead:last-child > tr > th.tableblock {
  border-bottom-width: 0;
}
table.grid-rows tfoot > tr > th.tableblock,
table.grid-rows tfoot > tr > td.tableblock {
  border-width: 1px 0 0 0;
}
table.frame-all {
  border-width: 1px;
}
table.frame-sides {
  border-width: 0 1px;
}
table.frame-topbot {
  border-width: 1px 0;
}
th.halign-left,
td.halign-left {
  text-align: left;
}
th.halign-right,
td.halign-right {
  text-align: right;
}
th.halign-center,
td.halign-center {
  text-align: center;
}
th.valign-top,
td.valign-top {
  vertical-align: top;
}
th.valign-bottom,
td.valign-bottom {
  vertical-align: bottom;
}
th.valign-middle,
td.valign-middle {
  vertical-align: middle;
}
table thead th,
table tfoot th {
  font-weight: bold;
}
tbody tr th {
  display: table-cell;
  line-height: 1.6;
  background: #f7f8f7;
}
tbody tr th,
tbody tr th p,
tfoot tr th,
tfoot tr th p {
  color: rgba(0, 0, 0, 0.8);
  font-weight: bold;
}
p.tableblock > code:only-child {
  background: none;
  padding: 0;
}
p.tableblock {
  font-size: 1em;
}
td > div.verse {
  white-space: pre;
}
ol {
  margin-left: 1.75em;
}
ul li ol {
  margin-left: 1.5em;
}
dl dd {
  margin-left: 1.125em;
}
dl dd:last-child,
dl dd:last-child > :last-child {
  margin-bottom: 0;
}
ol > li p,
ul > li p,
ul dd,
ol dd,
.olist .olist,
.ulist .ulist,
.ulist .olist,
.olist .ulist {
  margin-bottom: 0.625em;
}
ul.unstyled,
ol.unnumbered,
ul.checklist,
ul.none {
  list-style-type: none;
}
ul.unstyled,
ol.unnumbered,
ul.checklist {
  margin-left: 0.625em;
}
ul.checklist li > p:first-child > .fa-square-o:first-child,
ul.checklist li > p:first-child > .fa-check-square-o:first-child {
  width: 1em;
  font-size: 0.85em;
}
ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
  width: 1em;
  position: relative;
  top: 1px;
}
ul.inline {
  margin: 0 auto 0.625em auto;
  margin-left: -1.375em;
  margin-right: 0;
  padding: 0;
  list-style: none;
  overflow: hidden;
}
ul.inline > li {
  list-style: none;
  float: left;
  margin-left: 1.375em;
  display: block;
}
ul.inline > li > * {
  display: block;
}
.unstyled dl dt {
  font-weight: 400;
  font-style: normal;
}
ol.arabic {
  list-style-type: decimal;
}
ol.decimal {
  list-style-type: decimal-leading-zero;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}
ol.lowergreek {
  list-style-type: lower-greek;
}
.hdlist > table,
.colist > table {
  border: 0;
  background: none;
}
.hdlist > table > tbody > tr,
.colist > table > tbody > tr {
  background: none;
}
td.hdlist1 {
  padding-right: 0.75em;
  font-weight: bold;
}
td.hdlist1,
td.hdlist2 {
  vertical-align: top;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -0.5em;
}
.colist > table tr > td:first-of-type {
  padding: 0 0.75em;
  line-height: 1;
}
.colist > table tr > td:last-of-type {
  padding: 0.25em 0;
}
.thumb,
.th {
  line-height: 0;
  display: inline-block;
  border: solid 4px #fff;
  -webkit-box-shadow: 0 0 0 1px #ddd;
  box-shadow: 0 0 0 1px #ddd;
}
.imageblock.left,
.imageblock[style*="float: left"] {
  margin: 0.25em 0.625em 1.25em 0;
}
.imageblock.right,
.imageblock[style*="float: right"] {
  margin: 0.25em 0 1.25em 0.625em;
}
.imageblock > .title {
  margin-bottom: 0;
}
.imageblock.thumb,
.imageblock.th {
  border-width: 6px;
}
.imageblock.thumb > .title,
.imageblock.th > .title {
  padding: 0 0.125em;
}
.image.left,
.image.right {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  display: inline-block;
  line-height: 0;
}
.image.left {
  margin-right: 0.625em;
}
.image.right {
  margin-left: 0.625em;
}
a.image {
  text-decoration: none;
}
span.footnote,
span.footnoteref {
  vertical-align: super;
  font-size: 0.875em;
}
span.footnote a,
span.footnoteref a {
  text-decoration: none;
}
span.footnote a:active,
span.footnoteref a:active {
  text-decoration: underline;
}
#footnotes {
  padding-top: 0.75em;
  padding-bottom: 0.75em;
  margin-bottom: 0.625em;
}
#footnotes hr {
  width: 20%;
  min-width: 6.25em;
  margin: -0.25em 0 0.75em 0;
  border-width: 1px 0 0 0;
}
#footnotes .footnote {
  padding: 0 0.375em;
  line-height: 1.3;
  font-size: 0.875em;
  margin-left: 1.2em;
  text-indent: -1.2em;
  margin-bottom: 0.2em;
}
#footnotes .footnote a:first-of-type {
  font-weight: bold;
  text-decoration: none;
}
#footnotes .footnote:last-of-type {
  margin-bottom: 0;
}
#content #footnotes {
  margin-top: -0.625em;
  margin-bottom: 0;
  padding: 0.75em 0;
}
.gist .file-data > table {
  border: 0;
  background: #fff;
  width: 100%;
  margin-bottom: 0;
}
.gist .file-data > table td.line-data {
  width: 99%;
}
div.unbreakable {
  page-break-inside: avoid;
}
.big {
  font-size: larger;
}
.small {
  font-size: smaller;
}
.underline {
  text-decoration: underline;
}
.overline {
  text-decoration: overline;
}
.line-through {
  text-decoration: line-through;
}
.aqua {
  color: #00bfbf;
}
.aqua-background {
  background-color: #00fafa;
}
.black {
  color: #000;
}
.black-background {
  background-color: #000;
}
.blue {
  color: #0000bf;
}
.blue-background {
  background-color: #0000fa;
}
.fuchsia {
  color: #bf00bf;
}
.fuchsia-background {
  background-color: #fa00fa;
}
.gray {
  color: #606060;
}
.gray-background {
  background-color: #7d7d7d;
}
.green {
  color: #006000;
}
.green-background {
  background-color: #007d00;
}
.lime {
  color: #00bf00;
}
.lime-background {
  background-color: #00fa00;
}
.maroon {
  color: #600000;
}
.maroon-background {
  background-color: #7d0000;
}
.navy {
  color: #000060;
}
.navy-background {
  background-color: #00007d;
}
.olive {
  color: #606000;
}
.olive-background {
  background-color: #7d7d00;
}
.purple {
  color: #600060;
}
.purple-background {
  background-color: #7d007d;
}
.red {
  color: #bf0000;
}
.red-background {
  background-color: #fa0000;
}
.silver {
  color: #909090;
}
.silver-background {
  background-color: #bcbcbc;
}
.teal {
  color: #006060;
}
.teal-background {
  background-color: #007d7d;
}
.white {
  color: #bfbfbf;
}
.white-background {
  background-color: #fafafa;
}
.yellow {
  color: #bfbf00;
}
.yellow-background {
  background-color: #fafa00;
}
span.icon > .fa {
  cursor: default;
}
.admonitionblock td.icon [class^="fa icon-"] {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  cursor: default;
}
.admonitionblock td.icon .icon-note:before {
  content: "\f05a";
  color: #19407c;
}
.admonitionblock td.icon .icon-tip:before {
  content: "\f0eb";
  text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
  color: #111;
}
.admonitionblock td.icon .icon-warning:before {
  content: "\f071";
  color: #bf6900;
}
.admonitionblock td.icon .icon-caution:before {
  content: "\f06d";
  color: #bf3400;
}
.admonitionblock td.icon .icon-important:before {
  content: "\f06a";
  color: #bf0000;
}
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background-color: rgba(0, 0, 0, 0.8);
  -webkit-border-radius: 100px;
  border-radius: 100px;
  text-align: center;
  font-size: 0.75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold;
}
.conum[data-value] * {
  color: #fff !important;
}
.conum[data-value] + b {
  display: none;
}
.conum[data-value]:after {
  content: attr(data-value);
}
pre .conum[data-value] {
  position: relative;
  top: -0.125em;
}
b.conum * {
  color: inherit !important;
}
.conum:not([data-value]):empty {
  display: none;
}
h1,
h2 {
  letter-spacing: -0.01em;
}
dt,
th.tableblock,
td.content {
  text-rendering: optimizeLegibility;
}
p,
td.content {
  letter-spacing: -0.01em;
}
p strong,
td.content strong {
  letter-spacing: -0.005em;
}
p,
blockquote,
dt,
td.content {
  font-size: 1.0625rem;
}
p {
  margin-bottom: 1.25rem;
}
.sidebarblock p,
.sidebarblock dt,
.sidebarblock td.content,
p.tableblock {
  font-size: 1em;
}
.exampleblock > .content {
  background-color: #fffef7;
  border-color: #e0e0dc;
  -webkit-box-shadow: 0 1px 4px #e0e0dc;
  box-shadow: 0 1px 4px #e0e0dc;
}
.print-only {
  display: none !important;
}
@media print {
  @page {
    margin: 1.25cm 0.75cm;
  }
  * {
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  a {
    color: inherit !important;
    text-decoration: underline !important;
  }
  a.bare,
  a[href^="#"],
  a[href^="mailto:"] {
    text-decoration: none !important;
  }
  a[href^="http:"]:not(.bare):after,
  a[href^="https:"]:not(.bare):after {
    content: "(" attr(href) ")";
    display: inline-block;
    font-size: 0.875em;
    padding-left: 0.25em;
  }
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
  pre,
  blockquote,
  tr,
  img {
    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  img {
    max-width: 100% !important;
  }
  p,
  blockquote,
  dt,
  td.content {
    font-size: 1em;
    orphans: 3;
    widows: 3;
  }
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    page-break-after: avoid;
  }
  #toc,
  .sidebarblock,
  .exampleblock > .content {
    background: none !important;
  }
  #toc {
    border-bottom: 1px solid #ddddd8 !important;
    padding-bottom: 0 !important;
  }
  .sect1 {
    padding-bottom: 0 !important;
  }
  .sect1 + .sect1 {
    border: 0 !important;
  }
  #header > h1:first-child {
    margin-top: 1.25rem;
  }
  body.book #header {
    text-align: center;
  }
  body.book #header > h1:first-child {
    border: 0 !important;
    margin: 2.5em 0 1em 0;
  }
  body.book #header .details {
    border: 0 !important;
    display: block;
    padding: 0 !important;
  }
  body.book #header .details span:first-child {
    margin-left: 0 !important;
  }
  body.book #header .details br {
    display: block;
  }
  body.book #header .details br + span:before {
    content: none !important;
  }
  body.book #toc {
    border: 0 !important;
    text-align: left !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  body.book #toc,
  body.book #preamble,
  body.book h1.sect0,
  body.book .sect1 > h2 {
    page-break-before: always;
  }
  .listingblock code[data-lang]:before {
    display: block;
  }
  #footer {
    background: none !important;
    padding: 0 0.9375em;
  }
  #footer-text {
    color: rgba(0, 0, 0, 0.6) !important;
    font-size: 0.9em;
  }
  .hide-on-print {
    display: none !important;
  }
  .print-only {
    display: block !important;
  }
  .hide-for-print {
    display: none !important;
  }
  .show-for-print {
    display: inherit !important;
  }
}

.pygments .highlight pre,
pre > code {
  color: #f8f8f2 !important;
}

/*Custom CSS*/
body {
  background: #f5f5f5;
}
#header-main-title {
  float: left;
}
#cards {
  clear: both;
}
#cards .btn-primary {
  background-color: #e44c3a;
  border-color: #e44c3a;
}
#asciinema-player-section {
  margin-bottom: 25px;
}
.logo {
  width: 70%;
  padding-top: 20px;
  padding-bottom: 10px;
}
#main-row {
  min-height: 100%;
  height: 100%;
}
#toc {
  border-bottom: none;
  overflow-y: auto;
  margin: 0;
  top: 0px;
  z-index: 9;
}

#toc .nav-link {
  font-size: 13px;
}
.toc {
  margin-top: 116px;
  word-break: break-all;
  max-width: 223px;
}
#toctitle {
  font-size: 1.2em;
}
#aws-link {
  width: 80%;
}
.sectlevel1 {
  padding-left: 7px;
}
/* .border-columns{ */
/* background-color: #2E3336; */
/* } */
.footer {
  display: block;
  bottom: 0;
  width: 75%;
  height: 40px;
  line-height: 40px;
  background-color: #2e3336;
  margin: 0 auto;
}
.footer > .container {
  padding-right: 15px;
  padding-left: 15px;
}
nav[data-toggle="toc"] .nav > li > a {
  display: block;
  padding: 4px 20px;
  font-size: 13px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.65);
}
nav[data-toggle="toc"] .nav > li > a:hover {
  background-color: #e44c3a;
  color: rgba(0, 0, 0, 0.65);
}
.text-muted {
  color: rgba(0, 0, 0, 0.65) !important;
}
nav[data-toggle="toc"] .nav .nav > li > a,
nav[data-toggle="toc"] .nav .nav > li > a:focus,
nav[data-toggle="toc"] .nav .nav > li > a:hover {
  padding-left: 10px;
}
nav[data-toggle="toc"] .nav .nav > li > .active,
nav[data-toggle="toc"] .nav .nav > li > .active:focus,
nav[data-toggle="toc"] .nav .nav > li > .active:hover,
nav[data-toggle="toc"] .nav-link.active,
nav[data-toggle="toc"] .nav-link.active:focus,
nav[data-toggle="toc"] .nav-link.active:hover {
  /* padding-left: 10px; */
  font-weight: 700;
  color: #e44c3a;
  background-color: transparent;
  border-left: 2px solid #e44c3a;
}
#toc > ul > li > ul {
  margin-left: 10px;
}

/* small screens */
@media (max-width: 767px) {
  /* override stickyness so that the navigation does not follow scrolling */
  nav[data-toggle="toc"] {
    margin-bottom: 42px;
  }
  nav[data-toggle="toc"] .nav .active .nav {
    display: none;
  }
  #aws-link {
    width: 50%;
    margin-bottom: 5px;
  }
  .border-right {
    border: none !important;
  }
}

html,
body {
  height: 100%;
}

/* Scrollbar styles */
#toc::-webkit-scrollbar {
  width: 3px;
}

/* Track */
#toc::-webkit-scrollbar-track {
  background: transparent;
}

/* Handle */
#toc::-webkit-scrollbar-thumb {
  background: rgb(182, 182, 182);
}

/* Handle on hover */
#toc::-webkit-scrollbar-thumb:hover {
  background: rgb(163, 163, 163);
}

/* Gernal styles */
.toggle-nav-btn {
  position: absolute;
  right: 30px;
  top: 34px;
}
.bd-sidebar {
  height: 100vh !important;
}
.bd-sidebar .nav > li > a {
  padding: 4px 20px;
  font-size: 13px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.65);
  padding-left: 12px;
}
.main-link {
  border-left: 2px solid #e44c3a;
  color: #ba3925 !important;
  cursor: pointer;
  font-weight: bold;
}

/* card styles */
.card-wrapper {
  height: min-content;
  -webkit-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
  -moz-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Firefox 3.5 - 3.6 */
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
}
.card-wrapper .card-body {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.card-wrapper .content .card-text {
  margin-bottom: 12px;
}
.card-wrapper .card-body .card-title {
  color: #e44c3a;
  font-size: 22px;
  font-weight: 500;
}
.LogoAndToggle {
  border-bottom: 1px solid gainsboro;
  margin: 0px;
  display: block;
  padding-bottom: 12px;
  background: whitesmoke;
  padding-top: 4px;
}
/* media quires */
@media (max-width: 767px) {
  .bd-sidebar {
    height: 100px !important;
    border: 0;
  }

  #toc {
    min-width: 100%;
    padding-top: 15px;
  }
  #toc.show {
    border-bottom: none;
    left: 0;
    min-width: 100%;
    margin: 0;
    padding-top: 15px;
    box-shadow: 0px 7px 10px 2px #ababab3b;
  }
  .LogoAndToggle {
    display: flex;
    justify-content: space-around;
    width: 100%;
    margin: 0;
  }
  .bd-links {
    background: white;
    z-index: 9;
    position: relative;
    max-height: 300px;
    overflow-y: scroll;
    margin-top: -5px;
    border-bottom: 1px solid #d6d6d6;
  }
}
@media (min-width: 768px) {
  .bd-links {
    height: 100% !important;
    overflow-y: auto;
    display: block !important;
  }
  #toc {
    position: relative;
    top: 0;
    max-width: 100%;
    margin: 0;
    padding-left: 10px;
  }
  .toc {
    /* height: calc(100vh - 97px) !important; */
    height: calc(100vh - 160px) !important;
  }
  .bd-sidebar {
    padding-right: 20px;
    top: 0 !important;
  }
}

.bdr-right {
  border-right: 1px solid gainsboro;
}
.bdr-left {
  border-left: 1px solid gainsboro;
}

nav[data-toggle="toc"] .nav > li > a:focus,
nav[data-toggle="toc"] .nav > li > a:hover {
  border-left: 2px solid #e44c3a;
}
nav[data-toggle="toc"] .nav > li > a:hover {
  background-color: #ba39251a;
  color: rgba(0, 0, 0, 0.65);
}
/* pre.pygments .tok-n , pre.pygments .tok-p{
    color: rgba(0,0,0,.9) !important;
} */

table.linenotable {
  width: 100%;
}
.pygments code {
  width: max-content;
  overflow-x: auto;
  display: block;
  min-width: 100%;
}
.bd-search {
  padding: 0;
  margin: auto;
  padding-bottom: 10px;
  padding-top: 10px;
}
@media (max-width: 767px) {
  .bd-search {
    background-color: white;
    border-bottom: 1px solid #ddddd7;
  }
}
.bd-search .algolia-autocomplete {
  width: 100%;
}
.bd-search input {
  border-color: #3333331c;
  left: 0px;
  margin: auto;
  padding: 0;
  padding: 7px;
  width: 90%;
  max-width: 90%;
}

.bd-search .form-control:focus {
  border-color: #e44c3a61;
  box-shadow: 0 0 0 3px rgb(237 152 142 / 50%);
}
.bd-links {
  padding-top: 1rem;
}

/* Blue #167bb7 */
/* Green #29a9c9 */
/* Red #e44c3a */

#toc.right-side-menu ul li ul {
  padding: 0;
}
#toc.right-side-menu ul li ul {
  margin: 0;
}
#toc.right-side-menu ul li ul li a {
  padding-left: 30px !important;
  border-left: 2px solid #33333326;
}
#toc.right-side-menu ul li ul li a.active {
  padding-left: 30px !important;
  border-left: 2px solid #e44c3a;
  font-weight: 600 !important;
}

nav.right-side-menu .nav > li > a {
  display: block;
}
nav.right-side-menu > ul > li > a {
  color: #e44c3a;
  font-weight: 800 !important;
  background-color: transparent;
  border-left: 2px solid #33333326;
}
nav.right-side-menu > ul > li > a.active {
  color: #e44c3a;
  background-color: transparent;
  border-left: 2px solid #e44c3a;
}
nav[data-toggle="toc"].right-side-menu .nav-link + ul {
  display: block;
}

pre.pygments .tok-mf, pre.pygments .tok-mi{
  color: #f8f8f2 !important
}
</style>
<style>pre { line-height: 125%; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #49483e }
pre.pygments { background: #272822; color: #f8f8f2 }
pre.pygments .tok-c { color: #75715e } /* Comment */
pre.pygments .tok-err { color: #960050; background-color: #1e0010 } /* Error */
pre.pygments .tok-k { color: #66d9ef } /* Keyword */
pre.pygments .tok-l { color: #ae81ff } /* Literal */
pre.pygments .tok-n { color: #f8f8f2 } /* Name */
pre.pygments .tok-o { color: #f92672 } /* Operator */
pre.pygments .tok-p { color: #f8f8f2 } /* Punctuation */
pre.pygments .tok-ch { color: #75715e } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #75715e } /* Comment.Multiline */
pre.pygments .tok-cp { color: #75715e } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #75715e } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #75715e } /* Comment.Single */
pre.pygments .tok-cs { color: #75715e } /* Comment.Special */
pre.pygments .tok-gd { color: #f92672 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gi { color: #a6e22e } /* Generic.Inserted */
pre.pygments .tok-go { color: #66d9ef } /* Generic.Output */
pre.pygments .tok-gp { color: #f92672; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #75715e } /* Generic.Subheading */
pre.pygments .tok-kc { color: #66d9ef } /* Keyword.Constant */
pre.pygments .tok-kd { color: #66d9ef } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #f92672 } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #66d9ef } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #66d9ef } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #66d9ef } /* Keyword.Type */
pre.pygments .tok-ld { color: #e6db74 } /* Literal.Date */
pre.pygments .tok-m { color: #ae81ff } /* Literal.Number */
pre.pygments .tok-s { color: #e6db74 } /* Literal.String */
pre.pygments .tok-na { color: #a6e22e } /* Name.Attribute */
pre.pygments .tok-nb { color: #f8f8f2 } /* Name.Builtin */
pre.pygments .tok-nc { color: #a6e22e } /* Name.Class */
pre.pygments .tok-no { color: #66d9ef } /* Name.Constant */
pre.pygments .tok-nd { color: #a6e22e } /* Name.Decorator */
pre.pygments .tok-ni { color: #f8f8f2 } /* Name.Entity */
pre.pygments .tok-ne { color: #a6e22e } /* Name.Exception */
pre.pygments .tok-nf { color: #a6e22e } /* Name.Function */
pre.pygments .tok-nl { color: #f8f8f2 } /* Name.Label */
pre.pygments .tok-nn { color: #f8f8f2 } /* Name.Namespace */
pre.pygments .tok-nx { color: #a6e22e } /* Name.Other */
pre.pygments .tok-py { color: #f8f8f2 } /* Name.Property */
pre.pygments .tok-nt { color: #f92672 } /* Name.Tag */
pre.pygments .tok-nv { color: #f8f8f2 } /* Name.Variable */
pre.pygments .tok-ow { color: #f92672 } /* Operator.Word */
pre.pygments .tok-w { color: #f8f8f2 } /* Text.Whitespace */
pre.pygments .tok-mb { color: #ae81ff } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #ae81ff } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #ae81ff } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #ae81ff } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #ae81ff } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #e6db74 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #e6db74 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #e6db74 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #e6db74 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #e6db74 } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #e6db74 } /* Literal.String.Double */
pre.pygments .tok-se { color: #ae81ff } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #e6db74 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #e6db74 } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #e6db74 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #e6db74 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #e6db74 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #e6db74 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #a6e22e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #f8f8f2 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #f8f8f2 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #f8f8f2 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #f8f8f2 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #ae81ff } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 bd-sidebar sticky-top border-columns border-right p-0"><div class="mx-auto text-center LogoAndToggle"><a href="https://docs.killbill.io/"><img class="logo rounded mx-auto d-block img-fluid" src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" /></a><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3 toggle-nav-btn" type="button" data-toggle="collapse" data-target="#toc" aria-controls="toc" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><form role="search" class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off" data-docs-version="4.4"></form><nav id="toc" class="collapse bd-links toc"><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Getting started</a><ul class="nav navbar-nav"><li><a class="nav-link" href="https://docs.killbill.io/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/getting_started.html">Quick start</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Installation</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/aws.html">AWS Development</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_deployment.html">Going to production</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/database_migrations.html">Database migrations</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;notes</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link ml-2">Manuals</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_payment.html">Payment processing</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_analytics.html">Analytics plugin</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_configuration.html">Kill Bill&nbsp;configuration</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/internationalization.html">Kill Bill&nbsp;internationalization</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Tutorials</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/plan_alignment.html">Plans alignments</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/overdue.html">Overdue system</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/ha.html">Hierarchical Accounts</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Integration</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API reference</a></li><li><a href="https://docs.killbill.io/latest/swagger_documentation.html">Swagger UI Documentation           </a></li><li><a href="https://docs.killbill.io/latest/postman.html">Postman Integration</a></li><li><a href="https://docs.killbill.io/latest/debugging.html">Debugging</a></li><li><a href="https://docs.killbill.io/latest/push_notifications.html">Push notifications</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Plugin development</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/plugin_development.html">Plugin Development</a></li><li><a href="https://docs.killbill.io/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a href="https://docs.killbill.io/latest/notification_plugin.html">Notification Plugins</a></li><li><a href="https://docs.killbill.io/latest/payment_plugin.html">Payment Plugins</a></li><li><a href="https://docs.killbill.io/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a href="https://docs.killbill.io/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a href="https://docs.killbill.io/latest/catalog_plugin.html">Catalog Plugins</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Operational guides</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/user_management.html">Users, Roles and Permissions</a></li><li><a href="https://docs.killbill.io/latest/plugin_management.html">Plugin Management</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Client libraries</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="http://github.com/killbill/killbill-client-java" onclick="getOutboundLink('http://github.com/killbill/killbill-client-java'); return false;">Java</a></li><li><a href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">Go</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">About Kill Bill</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/demo.html"> Demo</a></li><li><a href="https://docs.killbill.io/latest/features.html">Features list</a></li><li><a href="https://docs.killbill.io/latest/faq.html"> FAQ</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Internal</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/internal_design.html">Internal design</a></li><li><a href="https://docs.killbill.io/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a href="https://docs.killbill.io/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a href="https://docs.killbill.io/latest/development.html">Development</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">References</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API schema</a></li><li><a href="https://docs.killbill.io/latest/catalog.xsd">Catalog XSD reference</a></li><li><a href="https://docs.killbill.io/latest/overdue.xsd">Overdue XSD reference</a></li></ul></li></ul></nav></div><div class="col-12 col-md-9 col-xl-8 border-right"><div id="header"><h1>Installation via Single AMI</h1></div><div id="content"><div class="sect1"><h2 id="_overview">Overview</h2><div class="sectionbody"><div class="paragraph"><p>Single AMI deployments are a way to deploy the Kill Bill stack, that is both the Kill Bill server and the administrative UI (KAUI), from one AMI. We offer two options. The <code>Single-Tier</code> option uses only a single EC2 instance. This is suitable for testing and experiments. The <code>Multi-Tier</code> option uses two or more EC2 instances, and is designed for production deployments. Both of these deployment options rely on the same underlying AMI, but for the <code>Multi-Tier</code> option there is a list of prerequisites, such as an external database, along with a startup script to be provided when launching the instance.</p></div></div></div>
<div class="sect1"><h2 id="_single_tier_deployments">Single-Tier Deployments</h2><div class="sectionbody"><div class="paragraph"><p>The single-tier deployment option is designed to get you started as quickly as possible. Everything you need: Kill Bill, KAUI, and the MariaDB (MySQL) database, is bundled in the AMI and can be launched on a single EC2 instance with just one click. This makes it very suitable for test environments, but we don&#8217;t recommend it for production deployments.</p></div>
<div class="paragraph"><p>The AMI also comes with a running instance of the load balancer <code>nginx</code> that acts as a reverse proxy and spreads the incoming traffic to either Kill Bill or KAUI based on the incoming port. The EC2 instance will be an instance of Ubuntu Linux. The organization of the single-tier system looks like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-tier-ami_deployment.png" alt="single tier ami deployment"></span></p></div>
<div class="paragraph"><p>In this model, the Kill Bill server and KAUI are deployed within the <code>tomcat</code> application server. Requests are handled by <code>nginx</code>. Requests received on port 443 are delivered to KAUI, and those received on port 8443 are delivered to Kill Bill. Both Kill Bill and KAUI communicate as needed with the <code>mysql</code> database.</p></div>
<div class="sect2"><h3 id="_getting_started">Getting Started</h3><div class="paragraph"><p>To start the installation process, point your browser to <a href="https://aws.amazon.com/marketplace/pp/B083LYVG9H?ref=_ptnr_doc_" onclick="getOutboundLink('https://aws.amazon.com/marketplace/pp/B083LYVG9H?ref=_ptnr_doc_'); return false;">AWS Marketplace</a>:</p></div>
<div class="paragraph"><p>If you are new to AWS, you will be asked to create an account and provide billing information. Once your account is validated,
you should see the following image at the top of your screen:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-subscribe.png" alt="single ami subscribe"></span></p></div>
<div class="paragraph"><p>Click <strong>Continue to Subscribe</strong>. The next page will give the AWS Terms and Conditions:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-terms-ask.png" alt="single ami terms ask"></span></p></div>
<div class="paragraph"><p>Accept the terms if asked. You will then see a new message confirming that you have subscribed. Next, click <strong>Continue to Configuration</strong>.</p></div>
<div class="paragraph"><p>The next page will give several configuration options.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-configure.png" alt="single ami configure"></span></p></div>
<div class="paragraph"><p>In most cases you should accept the defaults. Then click <strong>Continue to Launch</strong>.</p></div>
<div class="paragraph"><p>The next page will give you several options for the launch method. We recommend that you choose <strong>Launch through EC2</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-launch.png" alt="single ami launch"></span></p></div>
<div class="paragraph"><p>All other options will disappear. Click <strong>Launch</strong>.</p></div>
<div class="paragraph"><p>The next page is titled <strong>Choose Instance Type</strong>. Your instance type is already chosen, so click <strong>Review and Launch</strong> at the bottom of the page.</p></div>
<div class="paragraph"><p>The following page is headed <strong>Review Instance Launch</strong>. This provides a chance to review the details of your chosen instance. Then click <strong>Launch</strong> at the bottom of the page.</p></div>
<div class="paragraph"><p>Next you will see a very important popup that asks you to choose or create a <strong>key pair</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-keypair.png" alt="single ami keypair"></span></p></div>
<div class="paragraph"><p>The key pair provides the credentials you will need to login to your EC2 instance. For details about key pairs, see the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS documentation</a>. We recommend that you create a new key pair. Give the key pair a simple, easy to remember name such as <code>My-Key-Pair</code>. Then click <strong>Download Key Pair</strong>. Important: You <strong>must</strong> save the private key that will be generated in this step. If you lose this key, you will <strong>not</strong> be able to login to your instance.</p></div>
<div class="paragraph"><p>When the key pair is generated, click <strong>Launch Instances</strong>. You should see the screen below:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-launching.png" alt="single ami launching"></span></p></div>
<div class="paragraph"><p>Your instance is finally launching! To follow what is happening on the EC2 Dashboard, scroll all the way down to the bottom, and click <strong>View Instance</strong> at the bottom right. This will take you to the <code>Instances</code> screen which is part of the EC2 Dashboard.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-instances.png" alt="single ami instances"></span></p></div>
<div class="paragraph"><p>In a short time, the <strong>Instance State</strong> for your instance should indicate <code>Running</code>. You will need to scroll to the right to see all of the information available about your instance.</p></div>
<div class="paragraph"><p>You are almost set, but there is one more thing you should do, and that is to scroll down in the menu on the left side to select <strong>Security Groups</strong>. You should see a list of two or more groups. Select the group whose name begins with <code>Kill Bill on AWS</code>, then scroll to the bottom and select the tab for <code>Inbound Rules</code>. You should see:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-inbound.png" alt="single ami inbound"></span></p></div>
<div class="paragraph"><p>These rules enable the ports that must be open to access KAUI and Kill Bill from a browser. To enable direct login to your instance using SSH, you need to add one more port. Click on <strong>Edit Inbound Rules</strong>. Then add a rule with the following elements: Type: SSH, Protocol: TCP, Port Range: 22, Source: 0.0.0.0/0. Your Inbound Rules should now look like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-inbound-new.png" alt="single ami inbound new"></span></p></div></div>
<div class="sect2"><h3 id="_initial_testing">Initial Testing</h3><div class="paragraph"><p>You can now login to KAUI from your browser using the URL <a class="bare" href="https://INSTANCE_IP:443">https://INSTANCE_IP:443</a>, where INSTANCE_IP is the IPV4 address for your instance, given on your dashboard as <strong>Public IPV4 Address</strong>. This should display the KAUI login screen. The default credentials are: <strong>admin/password</strong>. The first few requests might be a bit slow as Kill Bill initializes itself.</p></div>
<div class="paragraph"><p>For an introduction to KAUI, see our <a href="http://docs.killbill.io/latest/getting_started.html#_using_kill_bill_with_kaui">Getting Started</a> guide.</p></div>
<div class="paragraph"><p>You can also login in directly to your instance from a terminal or command window. You may have no need to do this for a while, but you should try it and make sure it works. You may need to do this for system monitoring or troubleshooting later.</p></div>
<div class="paragraph"><p>To login, use the secure shell command:</p></div>
<div class="paragraph"><p><code>ssh -i PRIVATE_KEY.pem ubuntu@INSTANCE_IP</code></p></div>
<div class="paragraph"><p>Here PRIVATE_KEY is the pathname where you have stored the private key that was downloaded when you generated your key pair, and INSTANCE_IP is the IPV4 address described earlier. The private key will not work unless its access controls are set to readable by the owner only.</p></div>
<div class="paragraph"><p>On Windows versions before Windows 10, you may need to download a program called PuTTY to enable <code>ssh</code>. On Windows 10 <code>ssh</code> is available but may need to be activated through the Settings screen.</p></div>
<div class="paragraph"><p>The first time you login, you will see a warning message asking if you want to add this host to your list of hosts. You should answer <code>yes</code>.</p></div>
<div class="paragraph"><p>For more information about the organization of your instance, see the Configuration and Troubleshooting sections below. To exit from your login, type <code>exit</code>.</p></div></div></div></div>
<div class="sect1"><h2 id="_multi_tier_deployments">Multi-Tier Deployments</h2><div class="sectionbody"><div class="sect2"><h3 id="_overview_2">Overview</h3><div class="paragraph"><p>For production deployments, we recommend a <strong>multi-tier</strong> configuration with two or more EC2 instances and a separate database instance using the <code>Amazon Relational Database Service (RDS)</code>. In place of <code>nginx</code>, this configuration relies on an AWS <code>Elastic Load Balancer (ELB)</code> to correctly spread the traffic among the various nodes, and also to route traffic to either  Kill Server or KAUI based on the incoming port. This deployment option requires a bit more setup, so we also provide an (easier) way to deploy using <a href="https://docs.killbill.io/latest//aws-cf.html">CloudFormation templates</a>. However, the multi-tier option provides more control over the deployment.</p></div>
<div class="paragraph"><p>The diagram below illustrates the multitier configuration. This section will explain how to setup this option.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multi-tier-ami_deployment.png" alt="multi tier ami deployment"></span></p></div></div>
<div class="sect2"><h3 id="_login_to_aws">Login to AWS</h3><div class="paragraph"><p>To begin, log in to Amazon Web Services at <a class="bare" href="https://aws.amazon.com">https://aws.amazon.com</a>. If you are new to AWS, you will be asked to create an account and provide billing information. You will need to sign in as a <strong>Root User</strong>. This should take you to the <strong>AWS Management Console</strong>, which provides links to all available services.</p></div>
<div class="paragraph"><p>Check the upper right corner of your screen to be sure you are in the appropriate <strong>region</strong>. All resources you create will be placed in this region, and may not be accessible from other regions.</p></div>
<div class="paragraph"><p>In addition, AWS places all resources within a <strong>Virtual Private Network (VPC)</strong>. A default VPC will be created and used automatically in the following steps. However, if you have access to other VPCs, you will need to ensure that all Kill Bill resources are deployed in the same one.</p></div></div>
<div class="sect2"><h3 id="_setup_the_database">Setup the Database</h3><div class="paragraph"><p>Once you are logged in, the first step is to setup the RDS instance. This process begins with the RDS dashboard, which should be available from the Services menu. When the dashboard appears, select <code>Databases</code> from the left menu, and click the red button at the top right that reads <code>Create Database</code>:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-create-database.png" alt="multitier create database"></span></p></div>
<div class="paragraph"><p>You will be taken to the <code>Create Database</code> page. The first choice you will have is between <code>Standard Create</code>, which allows you to set a full range of configuration parameters, or <code>Easy Create</code>, which sets most of these parameters to defaults. We recommend <code>Easy Create</code> in most cases.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-standard-or-easy.png" alt="multitier standard or easy"></span></p></div>
<div class="paragraph"><p>The next section offers you a choice of several database types. Kill Bill can work with any database type that is <code>mysql</code> or <code>postgres</code> compatible. For robust production use, Amazon Aurora is probably a good choice. Here we will illustrate the simpler steps setting up a MariaDB database.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-database-types.png" alt="multitier database types"></span></p></div>
<div class="paragraph"><p>The next choice determines the instance size. We suggest the <code>Production</code> option as this will provide the most robust configuration.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-instance-sizes.png" alt="multitier instance sizes"></span></p></div>
<div class="paragraph"><p>The last section asks you to:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Specify a name for your database</p></li><li><p>Give a username for the administrative account (we suggest that you do <strong>not</strong> use the default name)</p></li><li><p>Provide a password for the administrative acount (we suggest you let AWS generate one for you)</p></li></ol></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-names-and-password.png" alt="multitier names and password"></span></p></div>
<div class="paragraph"><p>When the password is setup and confirmed, click <code>Create Database</code> in the lower right corner. You will return to the main Databases screen, which should now look like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-database-starting.png" alt="multitier database starting"></span></p></div>
<div class="paragraph"><p>This display shows that your database is starting. After a few minutes, the status will change to <code>Available</code> (You may need to reload the page to see this). At this time you can click on the database name to get more information, including the full name of the instance.</p></div>
<div class="paragraph"><p>On the page that appears you should see a panel named <code>Connectivity and Security</code>. The left side of this panel shows the full name of the endpoint, which you will need shortly, and the port number, which is normally 3306.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-connectivity-and-security.png" alt="multitier connectivity and security"></span></p></div>
<div class="paragraph"><p>Lastly, on the <code>Connectivity and Security</code> panel, locate and click on the link for the default VPC security group. You will need to add an inbound security rule, because the database by default does not allow external access. In the panel for this group, click on <code>Inbound Rules</code> and select <code>Edit Inbound Rules</code>. Next click on <code>Add rule</code>. In the <code>Type</code> column select <code>MYSQL/Aurora</code>. The port will be set to 3306 automatically. In the <code>Source</code> column, click on the search icon and select <code>0.0.0.0/0</code>. Finally, click on <code>Save Rules</code> in the bottom right. Your database is ready to go.</p></div></div>
<div class="sect2"><h3 id="_edit_the_configuration_script">Edit the Configuration Script</h3><div class="paragraph"><p>To set up the EC2 instances you will need to provide them with information needed to connect to the databases. We provide a brief configuration script to simplify this process. The template for this script is as follows:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>#!/bin/bash

DB_PROPS=&quot;/var/tmp/db.props.$$&quot;
KB_PROPS=&quot;/var/tmp/kb.props.$$&quot;

cat &lt;&lt;_EOF &gt; $DB_PROPS
#
# EDIT THE FOLLOWING DB PROPERTIES AS NEEDED:
#
DB_SERVER=DB-INSTANCE-NAME:3306
DB_USER=ADMIN-NAME
DB_PASSWORD=PASSWORD
KILLBILL_DB_NAME=killbill
KAUI_DB_NAME=kaui
_EOF

cat &lt;&lt;_EOF &gt; $KB_PROPS
#
# EDIT THE FOLLOWING KB PROPERTIES AS NEEDED:
#
org.killbill.dontexist=foo
_EOF

su -l -c &quot;cd /var/lib/tomcat/bin &amp;&amp; /var/lib/tomcat/bin/updateProperties.sh $DB_PROPS $KB_PROPS&quot; tomcat</code></pre></div></div>
<div class="paragraph"><p>First, you need to edit the database properties. DB_SERVER should be set to the full name of the DB instance, as given in the <code>Connectivity and Security</code> panel (see above). The port number 3306 is required. DB_USER and DB_PASSWORD should be set to the administrator credentials you have chosen for the RDS instance.</p></div>
<div class="paragraph"><p>Second, you may optionally edit any <a href="https://docs.killbill.io/latest/userguide_configuration.html">Kill Bill properties</a> that you need to change from the standard defaults.</p></div></div>
<div class="sect2"><h3 id="_launch_the_ec2_instances">Launch the EC2 Instances</h3><div class="paragraph"><p>The next step is to launch the number of EC2 instances you want, all based on the Kill Bill single AMI.</p></div>
<div class="paragraph"><p>To start the installation process, point your browser to <a href="https://aws.amazon.com/marketplace/pp/B083LYVG9H?ref=_ptnr_doc_" onclick="getOutboundLink('https://aws.amazon.com/marketplace/pp/B083LYVG9H?ref=_ptnr_doc_'); return false;">AWS Marketplace</a>:</p></div>
<div class="paragraph"><p>You should see the following image at the top of your screen:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-subscribe.png" alt="multitier subscribe"></span></p></div>
<div class="paragraph"><p>Click <strong>Continue to Subscribe</strong>. The next page will give the AWS Terms and Conditions:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-terms-ask.png" alt="multitier terms ask"></span></p></div>
<div class="paragraph"><p>Accept the terms if asked. You will then see a new message confirming that you have subscribed. Next, click <strong>Continue to Configuration</strong>.</p></div>
<div class="paragraph"><p>The next page will give several configuration options.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-configure.png" alt="multitier configure"></span></p></div>
<div class="paragraph"><p>In most cases you should accept the defaults. Then click <strong>Continue to Launch</strong>.</p></div>
<div class="paragraph"><p>The next page will give you several options for the launch method. We recommend that you choose <strong>Launch through EC2</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-launch.png" alt="multitier launch"></span></p></div>
<div class="paragraph"><p>All other options will disappear. Click <strong>Launch</strong>.</p></div>
<div class="paragraph"><p>The next page is titled <strong>Choose Instance Type</strong>. Your instance type is already chosen, so click <strong>Configure Instance Details</strong> at the bottom of the page.</p></div>
<div class="paragraph"><p>The next page will provide you with a long list of options. The first option is <strong>Number of Instances</strong>. Set the number of instances you wish to launch. Each instance will have essentially the same configuration, including the same image, the same subnet and availability zone, and the same security group.</p></div>
<div class="paragraph"><p>After setting the number of instances, scroll down to the bottom of the page. The last section is titled <strong>Advanced Settings</strong>. In this section you should set the configuration file you produced above. The setting panel should look like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-userdata.png" alt="multitier userdata"></span></p></div>
<div class="paragraph"><p>Now click <strong>Review and Launch</strong> at the bottom of the page. The following page is headed <strong>Review Instance Launch</strong>. This provides a chance to review the details of your chosen instances. Then click <strong>Launch</strong> at the bottom of the page.</p></div>
<div class="paragraph"><p>Next you will see a very important popup that asks you to choose or create a <strong>key pair</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-keypair.png" alt="multitier keypair"></span></p></div>
<div class="paragraph"><p>The key pair provides the credentials you will need to login to your EC2 instances. For details about key pairs, see the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS documentation</a>. We recommend that you create a new key pair. All your instances can use the same one. Give the key pair a simple, easy to remember name such as <code>My-Key-Pair</code>. Then click <strong>Download Key Pair</strong>. Important: You <strong>must</strong> save the private key that will be generated in this step. If you lose this key, you will <strong>not</strong> be able to login to your instances.</p></div>
<div class="paragraph"><p>When the key pair is generated, click <strong>Launch Instances</strong>. You should see the screen below:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-launching.png" alt="multitier launching"></span></p></div>
<div class="paragraph"><p>Your instances are finally launching! To follow what is happening on the EC2 Dashboard, scroll all the way down to the bottom, and click <strong>View Instance</strong> at the bottom right. This will take you to the <code>Instances</code> screen which is part of the EC2 Dashboard.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-instances.png" alt="multitier instances"></span></p></div>
<div class="paragraph"><p>In a short time, the <strong>Instance State</strong> for your instance should indicate <code>Running</code>. You will need to scroll to the right to see all of the information available about your instances.</p></div></div>
<div class="sect2"><h3 id="_setup_security_rules">Setup Security Rules</h3><div class="paragraph"><p>You are almost set, but there is one more thing you need to do, and that is to scroll down in the menu on the left side to select <strong>Security Groups</strong>. You should see a list of two or more groups. Select the group whose name begins with <code>Kill Bill on AWS</code>, then scroll to the bottom and select the tab for <code>Inbound Rules</code>. You should see:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-inbound-original.png" alt="multitier inbound original"></span></p></div>
<div class="paragraph"><p>These rules enable the ports that must be open to access KAUI and Kill Bill from a browser. However, for access through the ELB these ports will be different. In addition, to enable direct login to your instance using SSH, you need to add one more port.</p></div>
<div class="paragraph"><p>Click on <strong>Edit Inbound Rules</strong>. then do the following:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>For the rule that specifies Type: HTTPS, Port Range: 443, change the type to CUSTOM TCP and the Port Range to 3000.</p></li><li><p>For the rule that specifies Type: CUStOM TCP, Port Range: 8443, change the Port Range to 8080.</p></li><li><p>Finally, add a rule with the following elements: Type: SSH, Protocol: TCP, Port Range: 22, Source: 0.0.0.0/0.</p></li></ol></div>
<div class="paragraph"><p>Your Inbound Rules should now look like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/multitier-inbound-new.png" alt="multitier inbound new"></span></p></div></div>
<div class="sect2"><h3 id="_create_the_databases">Create the Databases</h3><div class="paragraph"><p>Kill Bill requires two databases, with the names <code>killbill</code> and <code>kaui</code>. We provide predefined schemas for these databases.</p></div>
<div class="paragraph"><p>To create the databases, you will need to login to <strong>one</strong> of your instances. To login, use the secure shell command:</p></div>
<div class="paragraph"><p><code>ssh -i PRIVATE_KEY.pem ubuntu@INSTANCE_IP</code></p></div>
<div class="paragraph"><p>Here PRIVATE_KEY is the pathname where you have stored the private key that was downloaded when you generated your key pair, and INSTANCE_IP is the IPV4 address described earlier. <strong>The private key will not work unless its access controls are set to readable by the owner only</strong>.  The <code>ssh</code> command relies on the security rule providing access to Port 22, which you added in the previous step.</p></div>
<div class="paragraph"><p>On Windows versions before Windows 10, you may need to download a program called PuTTY to enable <code>ssh</code>. On Windows 10 <code>ssh</code> is available but may need to be activated through the Settings screen.</p></div>
<div class="paragraph"><p>The first time you login, you will see a warning message asking if you want to add this host to your list of hosts. You should answer <code>yes</code>.</p></div>
<div class="paragraph"><p>Once you are logged in, you can use the <code>mysql</code> command to create the two databases <code>killbill</code> and <code>kaui</code>. The credentials for this command are the same ones you set up for the database and copied to the configuration file. Note that the DB-INSTANCE-NAME should <strong>not</strong> include the port number.</p></div>
<div class="paragraph"><p>The password will not be echoed when it is typed.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>&gt; mysql -h DB-INSTANCE-NAME -u ADMIN-NAME -p
Enter Password:
mysql&gt; create database killbill;
mysql&gt; create database kaui;
mysql&gt; exit</code></pre></div></div>
<div class="paragraph"><p>The next step is to install the schemas. These can be found at:</p></div>
<div class="ulist"><ul><li><p>killbill schema: <code><a class="bare" href="http://docs.killbill.io/latest/ddl.sql">http://docs.killbill.io/latest/ddl.sql</a></code></p></li><li><p>kaui schema: <code><a class="bare" href="https://github.com/killbill/killbill-admin-ui/blob/master/db/ddl.sql">https://github.com/killbill/killbill-admin-ui/blob/master/db/ddl.sql</a></code></p></li></ul></div>
<div class="paragraph"><p>One easy way to do this is to return to your local computer (type <code>exit</code>) and use the <code>sftp</code> command. Then upload them to your EC2 instance home directory with the commands:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>sftp -i PRIVATE_KEY.pem ubuntu@INSTANCE_IP
put killbill.ddl
put kaui.ddl
exit</code></pre></div></div>
<div class="paragraph"><p>Once the files are successfully uploaded, login again to your instance using the <code>ssh</code> command. You can now install the schemas:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>&gt; mysql -h DB-INSTANCE-NAME -u ADMIN-NAME -p killbill &lt; killbill.ddl
Enter Password:
&gt; mysql -h DB-INSTANCE-NAME -u ADMIN-NAME -p kaui &lt; kaui.ddl
Enter Password:</code></pre></div></div>
<div class="paragraph"><p>To ensure that the databases are setup correctly, login to <code>mysql</code> again, then try the SHOW TABLES command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>&gt; mysql -h DB-INSTANCE-NAME -u ADMIN-NAME -p
Enter Password:
use killbill
show tables;
use kaui
show tables;
exit</code></pre></div></div>
<div class="paragraph"><p>Each <code>show tables</code> command should display a list of table names for the database.</p></div>
<div class="paragraph"><p>You should now be able to login to KAUI from your browser using the URL <a class="bare" href="http://INSTANCE_IP:3000">http://INSTANCE_IP:3000</a>, where INSTANCE_IP is the IPV4 address for any one of your instances, given on your dashboard as <strong>Public IPV4 Address</strong>. This should display the KAUI login screen. The default credentials are: <strong>admin/password</strong>. The first few requests might be a bit slow as Kill Bill initializes itself. For an introduction to KAUI, see our <a href="http://docs.killbill.io/latest/getting_started.html#_using_kill_bill_with_kaui">Getting Started</a> guide.</p></div>
<div class="paragraph"><p>In addition, the URL <a class="bare" href="http://INSTANCE_IP:8080">http://INSTANCE_IP:8080</a> should display a page confirming that the Kill Bill server is accessible.</p></div></div>
<div class="sect2"><h3 id="_add_the_elb_in_front_of_the_ec2_instances">Add the ELB in front of the EC2 instances</h3><div class="paragraph"><p>The last major task is to setup the Elastic Load Balancer in front of the EC2 instances. To begin, from the EC2 dashboard scroll down the left-hand menu and select <strong>Load Balancing / Load Balancers</strong>. Then click the  <strong>Create Load Balancer</strong> button at the upper left.</p></div>
<div class="paragraph"><p>You will be given a choice of several load balancer types. The type we will use is <strong>Application Load Balancer</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-select-type.png" alt="ELB select type"></span></p></div>
<div class="paragraph"><p>Click on the <strong>Create</strong> button in the Application Load Balancer box. This will bring up the page titled <strong>Step 1: Configure Load Balancer</strong>:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-basic-configuration.png" alt="ELB basic configuration"></span></p></div>
<div class="paragraph"><p>On this page you need to do the following:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Assign a name to your load balancer</p></li><li><p>Select a protocol for the listener. We recommend using HTTPS as discussed below.</p></li><li><p>Set the listener port to 443 (if using HTTPS) or 80 (if using HTTP).</p></li><li><p>Click <strong>Add Listener</strong> to add a second listener using the same protocol and set its port to 8443.</p></li><li><p>Scroll to the bottom and select at least <strong>two</strong> availability zones. <strong>IMPORTANT: You must select all of the zones that your EC2 instances are contained in. Otherwise, the load balancer will be unable to connect to these instances.</strong></p></li></ol></div>
<div class="paragraph"><p>Now choose <strong>Next: Configure Security Settings</strong>. You will now see a page titled <strong>Step 2: Configure Security Settings</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-configure-security.png" alt="ELB configure security"></span></p></div>
<div class="paragraph"><p>If you have selected the HTTPS protocol, you will be required to create or provide an X.509 SSL Certificate. If you already have a certificate you can identify it or upload it here. Otherwise we recommend you click on <strong>Request a New Certificate from ACM.</strong> This will enable you to create a certificate using the <strong>Amazon Certificate Manager</strong> as discussed below. When your certificate is created, return to this page and proceed to the next step.</p></div>
<div class="paragraph"><p>If you are using HTTP, you will see a warning message, which can be ignored.</p></div>
<div class="paragraph"><p>In either case, your next step is to choose <strong>Next: Configure Security Groups</strong>. This will take you to a page titled <strong>Step 3: Configure Security Groups.</strong>  This page will show you the existing security groups and offer the choice to choose an existing group or create a new one. We advise you to create a new group. The new security group should have inbound rules enabling inputs for KAUI and Kill Bill as shown here:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-configure-security-groups.png" alt="ELB configure security groups"></span></p></div>
<div class="paragraph"><p>These rules assume you are using HTTPS. If you are using HTTP, the port for the first rule should be 80.</p></div>
<div class="paragraph"><p>The next step is to identify the <strong>target</strong> instances for your load balancer, which are collected into a <strong>target group</strong>. Each listener will have a separate target group, but you can only setup one right now. The other group will be added later.</p></div>
<div class="paragraph"><p>Your group will consist of all of the instances you have launched. First, create the group, give it a simple name, and set the port to 3000:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-configure-routing.png" alt="ELB configure routing"></span></p></div>
<div class="paragraph"><p>Now click on <strong>Next: Register Targets</strong>. The purpose of this step is to identify the target instances that will be part of your target group. Initially, all your instances will be listed in the bottom section. To register them, select them all and click <strong>Add to Registered</strong>. Then proceed to <strong>Next: Review</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-register-targets.png" alt="ELB register targets"></span></p></div>
<div class="paragraph"><p>Check all settings, then click <strong>Create</strong>. Your load balancer will be created. Close the final page to see the Load Balancer list. The initial status for your new ELB will be <strong>provisioning</strong>. After a few minutes this will change to <strong>active</strong>.</p></div>
<div class="paragraph"><p>You are almost done. Your final step is to modify the second listener to use a different port number to access the Kill Bill server. From the left side menu select <strong>Target Groups</strong>. Click <strong>Create Target Group</strong>. In the page that appears, set the protocol to HTTP and set the port to 8080. Then click <strong>Next</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-register-targets-2.png" alt="ELB register targets 2"></span></p></div>
<div class="paragraph"><p>The next page is provided to register the targets for this group. Once again you will register all your instances as targets, but this works just a little differently than before. The list of available targets is at the top. Select all of them, then click <strong>Include as Pending Below</strong> to make these targets pending as members of the group. Finally, click <strong>Create Target Group</strong> to create the group.</p></div>
<div class="paragraph"><p>Now you will need to associate this group with your load balancer&#8217;s second listener. Return to the Load Balancer console, select your load balancer, and choose the <strong>Listeners</strong> tab in the bottom information panel.  Then in the second entry, click <strong>View/Edit Rules</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-edit-rules.png" alt="ELB edit rules"></span></p></div>
<div class="paragraph"><p>Your object now is to change the rule for this listener to point to your new target group. To do this:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Click on the pencil icon at the top</p></li><li><p>Click on the pencil icon to the left of the rule</p></li><li><p>Click on the pencil icon under the heading <strong>THEN</strong></p></li><li><p>Select your new target group in the dropdown list</p></li><li><p>At the top of the page, click <strong>UPDATE</strong></p></li></ol></div>
<div class="paragraph"><p>Go back to the listener tab and confirm that the second listener points to the new target group. Your load balancer is now ready.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-check-listeners.png" alt="ELB check listeners"></span></p></div></div>
<div class="sect2"><h3 id="_creating_a_certificate">Creating a Certificate</h3><div class="paragraph"><p>We recommend for security that you choose the HTTPS protocol to access KAUI. This protocol uses SSL/TLS encryption and authentication to verify and protect all communication with the KAUI server. To use this protocol you must create or provide an X.509 certificate. This section describes how to create a certificate using the <strong>Amazon Certificate Manager (ACM).</strong></p></div>
<div class="paragraph"><p>When you click on <strong>Request a new Certificate from ACM</strong>, as described above, you will be taken to the main page of the ACM. Initially this will probably show that you have no certificates. Click <strong>Request a Certificate</strong>.</p></div>
<div class="paragraph"><p>the next page will give you the option to import a certificate, or to request a public or private certificate. Choose <strong>private</strong>, then click again on <strong>Request a Certificate</strong>. This will take you to the <strong>Request a Certificate</strong> page. You are initially at <strong>Step 1: Add Domain Names</strong>.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-request-certificate.png" alt="ELB request certificate"></span></p></div>
<div class="paragraph"><p>To validate your certificate, you must first setup a <strong>CNAME</strong>, or Canonical Name, based on a verified domain that you own (this is <strong>not</strong> an AWS domain). If you do not have a domain, you can obtain one for free, or very low cost, from an online source such as GoDaddy. The CNAME is part of your domain&#8217;s DNS profile, and your domain provider should have instructions for creating it. The values to use for the CNAME will be seen shortly. You will first setup a <strong>temporary</strong> CNAME just to enable validation of your certificate. You will then create the CNAME that you will actually use to access the system.</p></div>
<div class="paragraph"><p>Enter your domain name and click <strong>Next</strong>. On the following page, select <strong>DNS Validation</strong>. The next page gives you the chance to assign one or more tags to your certificate. These are optional and can be skipped. Finally, you are given a chance to review your request. Check everything, then click <strong>Confirm and Request</strong>. The <strong>Validation</strong> page will appear.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-cert-validation-1.png" alt="ELB cert validation 1"></span></p></div>
<div class="paragraph"><p>At the bottom you will see your domain name with a status of <strong>Pending Validation</strong>. Click the triangle next to your domain name. The display will expand to show the values that you must use to create your validation CNAME.</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/ELB-cert-validation-2.png" alt="ELB cert validation 2"></span></p></div>
<div class="paragraph"><p>The two strings labeled <strong>Name</strong> and <strong>Value</strong> should be copied to the two required entries for your CNAME. Copy these long strings carefully. Do not include any trailing periods. There is an option to save these strings in a file so they may be copied more easily, or stored for a later time.</p></div>
<div class="paragraph"><p>Your second CNAME is much simpler. The first entry will be <strong>kaui</strong>. The second entry will be simply your domain name, e.g., <strong>killbill.com</strong>.</p></div>
<div class="paragraph"><p>When your CNAMEs are set, return to ACM and click <strong>Continue</strong>. The display changes to show that your certificate is <strong>Pending Validation</strong>. The certificate should now appear also on the main ACM page. When (and if) it is validated, the status will change to <strong>Success</strong>. <strong>This may take several hours or more.</strong> A short time later it will change again to <strong>Issued</strong>.</p></div>
<div class="paragraph"><p>When your certificate is successfully created, you may delete the temporary (validation) CNAME. Then proceed as described above.</p></div></div>
<div class="sect2"><h3 id="_testing">Testing</h3><div class="paragraph"><p>When your ELB is complete you can proceed to testing. If you are using HTTPS you should be able to login to KAUI from your browser using the URL <a class="bare" href="https://kaui.DOMAIN">https://kaui.DOMAIN</a>, where DOMAIN is <strong>your</strong> domain that you have used for your certificate. If you are using HTTP you will need to use the URL <a class="bare" href="http://DNS_NAME">http://DNS_NAME</a> where DNS_NAME is the <strong>DNS name</strong> for the KAUI load balancer as given on the Load Balancer dashboard. This should display the KAUI login screen. The default credentials are: <strong>admin/password</strong>. The first few requests might be a bit slow as Kill Bill initializes itself.</p></div>
<div class="paragraph"><p>For an introduction to KAUI, see our <a href="http://docs.killbill.io/latest/getting_started.html#_using_kill_bill_with_kaui">Getting Started</a> guide.</p></div>
<div class="paragraph"><p>Similarly, you should be able to login directly to the Kill Bill server using the URL <a class="bare" href="http://DNS_NAME:8443">http://DNS_NAME:8443</a>. Creating a CNAME for this login is optional.</p></div></div></div></div>
<div class="sect1"><h2 id="_configuration">Configuration</h2><div class="sectionbody"><div class="sect2"><h3 id="_ssl_certificates">SSL Certificates</h3><div class="paragraph"><p><code>nginx</code> is configured to listen on port 443 for messages to be forwarded to KAUI. Port 443 is the standard port for HTTPS. By default, accessing the service from a web browser will show a <code>Not Secure</code> site. In order to make the site secure, you will need to add a valid certificate. The easiest option to add the certificate is to make use of the tool <code>certbot</code>, which relies on the free Certificate Authority (CA) <code>Lets Encrypt</code>  This method provides an easy way to obtain and install free TLS/SSL certificates.</p></div>
<div class="paragraph"><p><code>Certbot</code> is pre-installed in the latest Kill Bill AMI, but if you need a different version of <code>certbot</code>, this is also available through the new package manager <code>snap</code>. This package manager is also preinstalled in the Kill Bill AMI.</p></div>
<div class="paragraph"><p>To validate your certificate, you must first setup a CNAME, or Canonical Name, based on a verified domain that you own. If you do not have a domain, you can obtain one for free, or very low cost, from an online source such as GoDaddy. The CNAME is part of your domain&#8217;s DNS profile, and your domain provider should have instructions for creating it.</p></div>
<div class="paragraph"><p>The CNAME should link your domain to your AWS instance. If your domain is <code>domain.com</code> your CNAME might look like <code>killbill.domain.com</code>.</p></div>
<div class="paragraph"><p>To setup your certificate, perform the following steps:</p></div>
<div class="paragraph"><p>[1]. Create a CNAME linking your domain to your AWS instance.</p></div>
<div class="paragraph"><p>[2]. Add your CNAME to the server block in the <code>nginx</code> configuration file.</p></div>
<div class="paragraph"><p>Using a text editor of your choosing, edit the file <code>/etc/nginx/sites-enabled/killbill.conf</code>. You will need to use sudo to edit this file.</p></div>
<div class="paragraph"><p>This file contains two server blocks. The second block contains the lines:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>server {
    listen 443;
    server_name _;</code></pre></div></div>
<div class="paragraph"><p>Replace the underscore after <code>server_name</code> with your CNAME:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>server {
    listen 443;
    server_name killbill.domain.com;</code></pre></div></div>
<div class="paragraph"><p>Save the modified file.</p></div>
<div class="paragraph"><p>[3]. Reload the configuration file with the command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>sudo nginx -s reload</code></pre></div></div>
<div class="paragraph"><p>[4]. Enable HTTP traffic on port 80. This is just to allow <code>certbot</code> to create your certificate. To do this, go to your EC2 dashboard and add a new inbound rule as follows: Type: HTTP, Protocol: TCP, Port Range: 80, Source: 0.0.0.0/0. Your inbound rules should now look like this:</p></div>
<div class="paragraph"><p><span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/aws/single-ami-inbound-port-80.png" alt="single ami inbound port 80"></span></p></div>
<div class="paragraph"><p>[5]. Remove the existing <code>certbot</code> package:</p></div>
<div class="paragraph"><p>Type the command</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>sudo apt-get remove certbot</code></pre></div></div>
<div class="paragraph"><p>When asked if you want to proceed, type <code>Y</code> for yes.</p></div>
<div class="paragraph"><p>[6]. Install <code>certbot</code> using <code>snap</code>:</p></div>
<div class="paragraph"><p>The following commands will install <code>certbot</code> and link it to the <code>/usr/bin</code> directory:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot</code></pre></div></div>
<div class="paragraph"><p>[7].  Run <code>certbot</code> to create and install the certificate:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>sudo certbot --nginx</code></pre></div></div>
<div class="paragraph"><p>If you are asked, confirm the server name to be used. If all goes well, you will see a message like:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/deployment.killbill.io/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/deployment.killbill.io/privkey.pem
   Your cert will expire on 2020-05-11. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &quot;certonly&quot; option. To non-interactively renew *all* of
   your certificates, run &quot;certbot renew&quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le</code></pre></div></div>
<div class="paragraph"><p>Of course, there are a few things that could go wrong:</p></div>
<div class="paragraph"><p>[1]. <code>certbot</code> will attempt to validate your CNAME through your domain provider. If the CNAME does not link correctly to the public DNS name for your AWS instance, the certificate will not be created.</p></div>
<div class="paragraph"><p>[2]. You could get a message like:</p></div>
<div class="paragraph"><p><code>Error creating new order : Cannot issue for ec2-18-234-168-57.compute-1.amazonaws.com: The ACME server refuses to issue a certificate for this domain name, because it is forbidden by policy</code></p></div>
<div class="paragraph"><p>This could happen if you have tried to use your public DNS name directly as your CNAME, which is not allowed.</p></div>
<div class="paragraph"><p>[3]. You could get a message like <code>certificate cannot be installed</code>.</p></div>
<div class="paragraph"><p>For help with these and other problems, try the <code>certbot</code> <a href="https://certbot.eff.org/help/">help page</a>.</p></div>
<div class="paragraph"><p>When your certificate is installed, you should be able to access KAUI from you browser using <code>https://</code> followed by your CNAME as the address. The browser should indicate that the site is secure.</p></div>
<div class="paragraph"><p>When your certificate is successfully installed, you can edit your security groups again to remove the access through port 80.</p></div>
<div class="paragraph"><p>The <code>Let&#8217;s Encrypt</code> certifcates are only valid 90 days and will therefore neeed to be renewed. <code>certbot</code> will create a cron entry under <code>/etc/cron.d/certbot</code> to make this process automatic.</p></div></div>
<div class="sect2"><h3 id="_kill_bill_properties">Kill Bill Properties</h3><div class="paragraph"><p>Kill Bill global properties are defined in <code>/var/lib/killbill/config/killbill.properties</code>. For example, this is where you can change the MySQL credentials. Take a look at our <a href="https://docs.killbill.io/latest/userguide_configuration.html">configuration guide</a> for more details.</p></div>
<div class="paragraph"><p>This is also where you can change the default Kill Bill admin credentials: specify <code>org.killbill.security.shiroResourcePath=/var/lib/killbill/config/shiro.ini</code> and create the <code>shiro.ini</code> file accordingly (see our <a href="https://docs.killbill.io/latest/user_management.html">RBAC guide</a> for more details).</p></div></div></div></div>
<div class="sect1"><h2 id="_troubleshooting">TroubleShooting</h2><div class="sectionbody"><div class="paragraph"><p>After launching the EC2 instance, the full stack should come up, with all services enabled and running, that is:</p></div>
<div class="ulist"><ul><li><p>An nginx instance receiving traffic on port <code>443</code> and <code>8443</code></p></li><li><p>A instance of Kill Bill server listening on <code>127.0.0.1:8080</code> (and receiving external traffic through nginx on port <code>8443</code>)</p></li><li><p>A instance of Kaui listening on <code>127.0.0.1:3000</code> (and receiving external traffic through nginx on port <code>443</code>)</p></li><li><p>A local <code>mysql</code> server running on port <code>3306</code></p></li></ul></div>
<div class="paragraph"><p>In this section, we will provide some tips to verify the operation of the system, and what to do when things are not working.</p></div>
<div class="sect2"><h3 id="_system_health">System Health</h3><div class="paragraph"><p>To verify the overall health of the Kill Bill server instance, you can issue the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>curl http://127.0.0.1:8080/1.0/healthcheck</code></pre></div></div>
<div class="paragraph"><p>This will return a series of messages giving the health of various system components.</p></div>
<div class="paragraph"><p>A detailed system information report is available using the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>curl -u &lt;ADMIN&gt;:&lt;PASSWORD&gt; http://127.0.0.1:8080/1.0/kb/nodesInfo</code></pre></div></div>
<div class="paragraph"><p>Here &lt;ADMIN&gt; and &lt;PASSWORD&gt; are your administrator access credentials.</p></div>
<div class="paragraph"><p>The Kill Bill single-tier option is composed of four services. The status of each service can be checked by the following commands:</p></div>
<div class="ulist"><ul><li><p>Kill Bill service: <code>sudo service killbill status</code></p></li><li><p>KAUI service: <code>sudo service kaui status</code></p></li><li><p>Nginx service: <code>sudo service nginx status</code></p></li><li><p>Mysql service: <code>sudo service mysql status</code></p></li></ul></div>
<div class="paragraph"><p>For each report there should be a line near the top with the following form:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>Active: active (running) since Sat 2020-10-24 20:13:43 UTC; 1 day 1h ago</code></pre></div></div>
<div class="paragraph"><p>Similarly you can <code>start</code> or <code>stop</code> the services using similar commands, such as <code>sudo service kaui stop</code> to stop KAUI.</p></div></div>
<div class="sect2"><h3 id="_log_files">Log Files</h3><div class="paragraph"><p>The system maintains a series of logfiles that should be helpful when troubleshooting is needed.</p></div>
<div class="paragraph"><p>Tomcat logs are under <code>/var/lib/tomcat/logs/</code>:</p></div>
<div class="ulist"><ul><li><p>KAUI logs: <code>/var/lib/tomcat/logs/kaui.out</code></p></li><li><p>Kill Bill server logs: <code>/var/lib/tomcat/logs/catalina.out</code></p></li></ul></div>
<div class="paragraph"><p>Nginx logs can be found under <code>/var/log/nginx/</code></p></div>
<div class="ulist"><ul><li><p>Access logs: <code>/var/log/nginx/access.log</code></p></li><li><p>Error logs: <code>/var/log/nginx/error.log</code></p></li></ul></div></div>
<div class="sect2"><h3 id="_system_diagnostics">System Diagnostics</h3><div class="paragraph"><p>If support is needed, we may require some additional detailed information about your deployment. We have created a <code>diagnostic</code> command for this purpose. to run this command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span># Login as &#39;tomcat&#39;
&gt; sudo su - tomcat
#
# Set your access credentials. This example
#   assumes the default credentials are used:
#
&gt; kpm  diagnostic \
  --killbill-credentials=admin password \
  --bundles-dir=/var/lib/killbill/bundles \
  --database-name=killbill \
  --database-credentials=root root \
  --killbill-api-credentials=bob lazar \
  --kaui-web-path=/var/lib/tomcat/webapps2 \
  --killbill-url=http://127.0.0.1:8080 \
  --database-host=127.0.0.1:3306

...
The diagnostic data is exported under /tmp/killbill-diagnostics-20200213-23204-u93ah5/killbill-diagnostics-02-13-20.zip</code></pre></div></div></div>
<div class="sect2"><h3 id="_databases">Databases</h3><div class="paragraph"><p>To access the mysql (MariaDB) databases, you can use the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>mysql -u root -proot</code></pre></div></div>
<div class="paragraph"><p>This enables interactive access to the database manager. There is one <code>killbill</code> and one <code>kaui</code> database created and used by the respective applications. To verify the tables in each database, you can type:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>use killbill;
show tables;</code></pre></div></div>
<div class="paragraph"><p>or</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code><span></span>use kaui;
show tables;</code></pre></div></div>
<div class="paragraph"><p>Standard SQL commands can be used to explore or manipulate the tables. Be sure you know what you are doing, or the databases may become corrupted!</p></div>
<div class="paragraph"><p>To exit the mysql interactive mode, type <code>exit</code>.</p></div></div>
<div class="sect2"><h3 id="_nginx">Nginx</h3><div class="paragraph"><p>The load balancer <code>nginx</code> should normally require little attention. The configuration files are located under <code>/etc/nginx/. The configuration file for `nginx itself is `/etc/nginx/nginx.conf</code>. Additional configuration files are located under <code>/etc/nginx/sites-enabled/</code>. The only file normally present in this directory is <code>/etc/nginx/sites-enabled/killbill.conf</code>. This file may need to be edited to enable SSL, as explained above.</p></div></div></div></div>
<div class="sect1"><h2 id="_upgrades">Upgrades</h2><div class="sectionbody"><div class="paragraph"><p>From time to time new versions of Kill Bill and KAUI may be released. This section explains how to install these new versions.</p></div>
<div class="paragraph"><p>Note: you must switch to the <code>tomcat</code> user first in order to upgrade Kill Bill or Kaui (<code>sudo su - tomcat</code>).</p></div>
<div class="paragraph"><p>The configuration file <code>/var/lib/killbill/kpm.yml</code> specifies the Kill Bill version (and its plugins) running on the instance. Once you edit this file to specify the new version number, it will be used automatically. After editing this file, simply run the command <code>$KPM_INSTALL_KB_CMD</code>, delete the cached directory <code>/var/lib/tomcat/webapps/ROOT</code>, and restart the instance.</p></div>
<div class="paragraph"><p>A similar process can be used for KAUI: update <code>/var/lib/kaui/kpm.yml</code>, run <code>$KPM_INSTALL_KAUI_CMD</code>, delete the cached directory <code>/var/lib/tomcat/webapps2/ROOT</code> and restart the instance.</p></div></div></div></div></div><div class="col-12 col-md-3 col-xl-2 bd-sidebar sticky-top border-columns border-right p-0"><nav class="collapse bd-links toc right-side-menu" id="toc" data-toggle="toc"></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-12 border-columns"></div><div id="footer"><div id="footer-text">Last updated 2021-04-14 22:35:33 UTC</div><script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create','UA-32705710-3','auto');
          ga('send','pageview');
          var getOutboundLink = function(url) {
            ga('send', {
              hitType: 'event',
              eventCategory: 'outbound',
              eventAction: 'click',
              eventLabel: url,
              hitCallback: function(){document.location = url;}
            });
          }
          </script></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script><script src="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript">docsearch({apiKey: '9d2f6d24a05863f83c8844f6e7492c66',indexName: 'killbill',inputSelector: '#search-input',debug: false});</script></body></html>