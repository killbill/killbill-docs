<!DOCTYPE html><html lang="en"><head><title>Plugin Management APIs</title><style>pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */</style><link rel="icon" type="image/x-icon" href="/stylesheets/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"><link rel="stylesheet" href='stylesheets/bootstrap.min.css'><link rel="stylesheet" href='stylesheets/bootstrap-toc.min.css'><link rel="stylesheet" href="stylesheets/kb.css"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Plugin Management APIs"></head><body data-spy="scroll" data-target="#myScrollspy" data-offset="100"><div class="loader-wrapper"><div id="loading"></div></div><header class="header sticky" id="header"><div class="header-wrapper"><div class="container-fluid"><div class="row flex-xl-nowrap justify-content-evenly"><div class="header-logo"><div class="logo"><a href="/"><img src="/stylesheets/images/logo/light-logo.svg" style="height:38px" alt="Kill Bill Docs" id="logo" height="38" width="146"></a></div><div class="switch"><input type="checkbox" aria-label="Search" name="theme-toggle" id="theme-toggle"><span class="slider round"></span></div></div><div class="nav-toggler sidebar-toggler"><svg class="hamburger" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 7C20.75 7.41421 20.4142 7.75 20 7.75L4 7.75C3.58579 7.75 3.25 7.41421 3.25 7C3.25 6.58579 3.58579 6.25 4 6.25L20 6.25C20.4142 6.25 20.75 6.58579 20.75 7Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 12C20.75 12.4142 20.4142 12.75 20 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L20 11.25C20.4142 11.25 20.75 11.5858 20.75 12Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 17C20.75 17.4142 20.4142 17.75 20 17.75L4 17.75C3.58579 17.75 3.25 17.4142 3.25 17C3.25 16.5858 3.58579 16.25 4 16.25L20 16.25C20.4142 16.25 20.75 16.5858 20.75 17Z" fill=""/></svg></div><div class="header-search"><div class="search-form-wrapper"><div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;"></div></div></div></div></div></div></header><main class="main sidebar-show"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="sidebar-wrapper"><aside class="sidebar"><div class="sidebar__control"><svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.33316 10.6665L1.6665 5.99992L6.33316 1.33325" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><nav class="sidebar-nav"><ul class="nav navbar-nav"><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Getting Started</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li><a class="nav-link" href="/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="/latest/getting_started.html">Getting Started (Installation)</a></li><li><a class="nav-link" href="/latest/quick_start_with_kaui.html">Quick Start with Kaui</a></li><li><a class="nav-link" href="/latest/quick_start_with_kb_api.html">Quick Start with the Kill Bill API</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Installation</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="/latest/userguide_deployment.html">Going to Production</a></li><li><a class="nav-link" href="/latest/how-to-upgrade-the-database.html">Database Migrations</a></li><li><a class="nav-link" href="/latest/PostgreSQL.html">PostgreSQL Setup</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;Notes</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">AWS</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/aws.html">AWS Introduction</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-single-tier-system.html">Single-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-multi-tier-system.html">Multi-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-cloud-formation-system.html">CloudFormation Setup</a></li><li><a class="nav-link" href="/latest/aws-container.html">AWS Container Setup</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-single-tier-system.html">Single-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-multi-tier-system.html">Multi-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-cloud-formation-system.html">CloudFormation Maintenance</a></li><li><a class="nav-link" href="/latest/explanation-https-and-certificates.html">HTTPS and Certificates</a></li><li><a class="nav-link" href="/latest/how-to-add-a-certificate-using-ACM.html">How to add a certificate using ACM</a></li><li><a class="nav-link" href="/latest/using-ses-with-aws.html">Using SES with AWS</a></li><li><a class="nav-link" href="/latest/events-to-aws-sqs.html">Kill Bill Events to AWS SQS</a></li><li><a class="nav-link" href="/latest/aws-tools.html">AWS Observability Tools</a></li><li><a class="nav-link" href="/latest/metrics-datadog.html">Managing Metrics with Datadog</a></li><li><a class="nav-link" href="/latest/metrics-newrelic.html">Managing Metrics with New Relic</a></li><li><a class="nav-link" href="/latest/metrics-cloudwatch.html">Managing Metrics with Cloudwatch</a></li><li><a class="nav-link" href="/latest/errors-rollbar.html">Error Tracking with Rollbar</a></li><li><a class="nav-link" href="/latest/errors-sentry.html">Error Tracking with Sentry</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Manuals</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="/latest/userguide_payment.html">Payment Processing</a></li><li><a class="nav-link" href="/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="/latest/email-notification-plugin.html">Email Notification Plugin</a></li><li><a class="nav-link" href="/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="/latest/userguide_analytics.html">Analytics Plugin</a></li><li><a class="nav-link" href="/latest/userguide_configuration.html">Kill Bill&nbsp;Configuration</a></li><li><a class="nav-link" href="/latest/internationalization.html">Kill Bill&nbsp;Internationalization</a></li><li><a class="nav-link" href="/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Tutorials</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plan_alignment.html">Plans Alignments</a></li><li><a class="nav-link" href="/latest/overdue.html">Overdue System</a></li><li><a class="nav-link" href="/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="/latest/ha.html">Hierarchical Accounts</a></li><li><a class="nav-link" href="/latest/catalog-examples.html">Catalog Examples</a></li><li><a class="nav-link" href="/latest/invoice_examples.html">Invoice Examples</a></li><li><a class="nav-link" href="/latest/invoice_templates.html">Invoice Templates</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Integration</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API Reference</a></li><li><a class="nav-link" href="/latest/swagger_documentation.html">Swagger UI Documentation</a></li><li><a class="nav-link" href="/latest/postman.html">Postman Integration</a></li><li><a class="nav-link" href="/latest/debugging.html">Debugging</a></li><li><a class="nav-link" href="/latest/push_notifications.html">Push Notifications</a></li><li><a class="nav-link" href="/latest/kill_bill_events.html">Kill Bill Events</a></li><li><a class="nav-link" href="/latest/how-to-use-kpm-diagnostic.html">KPM Diagnostic Usage</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Plugin Development</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_introduction.html">Plugin Introduction</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_development.html">Plugin Development</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_installation.html">Plugin Installation</a></li><li><a class="nav-link" href="/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a class="nav-link" href="/latest/notification_plugin.html">Notification Plugins</a></li><li><a class="nav-link" href="/latest/payment_plugin.html">Payment Plugins</a></li><li><a class="nav-link" href="/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a class="nav-link" href="/latest/usage_plugin.html">Usage Plugins</a></li><li><a class="nav-link" href="/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a class="nav-link" href="/latest/catalog_plugin.html">Catalog Plugins</a></li><li><a class="nav-link" href="/latest/entitlement_plugin.html">Entitlement Plugins</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Operational Guides</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/deploy_to_kubernetes.html">Kubernetes (K8s) Deployment</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/user_management.html">Users, Roles, and Permissions</a></li><li><a class="nav-link" href="/latest/plugin_management.html">Plugin Management</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Client Libraries</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/java_client.html">Java</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a class="nav-link" href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">KillBill Go </a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">About Kill Bill</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/demo.html">Demo</a></li><li><a class="nav-link" href="/latest/features.html">Features List</a></li><li><a class="nav-link" href="/latest/faq.html">Technical FAQs</a></li><li><a class="nav-link" href="/latest/Kill-Bill-Glossary.html">Glossary</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Internal</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/internal_design.html">Internal Design</a></li><li><a class="nav-link" href="/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a class="nav-link" href="/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a class="nav-link" href="/latest/development.html">Development Environment</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">References</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API Schema</a></li><li><a class="nav-link" href="/latest/catalog.xsd">Catalog XSD Reference</a></li><li><a class="nav-link" href="/latest/overdue.xsd">Overdue XSD Reference</a></li></ul></li></ul></nav><a class="doclink" href="mailto:support@killbill.io">Report a doc problem</a></aside></div><div class="article-container"><div class="center-content"><div class="main-wrapper"><article class="content-wrapper"><div class="banner"><h1>Plugin Management APIs</h1></div><div id="content"><div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting with Kill Bill 0.16.0, it is now possible to go through all the lifecycle (<code>install</code>, <code>start</code>, <code>stop</code>, <code>uninstall</code> and <code>list status</code>) of a plugin using APIs. These APIs have been designed to work on a Kill Bill deployment that consists of several instances.</p>
</div>
<div class="paragraph">
<p>The feature relies on the following pieces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A running version of a (or several) killbill server(s)</p>
</li>
<li>
<p>A running KPM OSGI bundle on each Kill Bill instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apis">APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each of the API refers to a plugin using a <code>pluginKey</code>. A <code>pluginKey</code> can be one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An entry in the official Kill Bill <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml">plugin repository</a>,</p>
</li>
<li>
<p>A user provided key that will be used to identify this plugin when using the APIs. The user provided key must be unique and must contain a namespace (e.g MY_NAMESPACE:myKey). During the installation phase, and when using a user provided key, one must also specify additonal properties to specify the location of that plugin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following APIs are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>INSTALL_PLUGIN: Install a plugin. The following properties are supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>pluginKey</code>: required</p>
</li>
<li>
<p><code>pluginType</code>: required for user provided key  (can be <code>ruby</code> or <code>java</code>)</p>
</li>
<li>
<p><code>pluginVersion</code>: optional (for plugins hosted on the Kill Bill GitHub organization, there is a <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml">definition file</a> to map Kill Bill versions with plugin versions)</p>
</li>
<li>
<p><code>pluginArtifactId</code>: required for user provided key (the Maven <code>artifactId</code>)</p>
</li>
<li>
<p><code>pluginGroupId</code>: required for user provided key (the Maven <code>groupId</code>)</p>
</li>
<li>
<p><code>pluginPackaging</code>: optional (the Maven <code>packaging</code>, which will default to <code>jar</code> for <code>java</code> plugin and <code>tar.gz</code> for <code>ruby</code> plugins)</p>
</li>
<li>
<p><code>pluginClassifier</code>: optional (the Maven <code>classifier</code>, which will default to null)</p>
</li>
</ul>
</div>
</li>
<li>
<p>START_PLUGIN: Start a plugin. The following properties are supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>pluginKey</code>: required</p>
</li>
<li>
<p><code>pluginVersion</code>: optional (will default to latest installed version of that plugin)</p>
</li>
</ul>
</div>
</li>
<li>
<p>RESTART_PLUGIN:  Restart a plugin. All classes will be unloaded and new classes/ruby files will be loaded and started. The following properties are supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>pluginKey</code>: required</p>
</li>
<li>
<p><code>pluginVersion</code>: optional (will default to latest version)</p>
</li>
</ul>
</div>
</li>
<li>
<p>STOP_PLUGIN: Stop a plugin. All classes will be unloaded. The following properties are supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>pluginKey</code>: required</p>
</li>
<li>
<p><code>pluginVersion</code>: optional (will default to latest version)</p>
</li>
</ul>
</div>
</li>
<li>
<p>UNINSTALL_PLUGIN: The command will disable the plugin so it will not be listed as an installed plugin, but the code will be kept on the filesystem (to optimize cases where one would want to re-install the same version of the plugin):</p>
<div class="ulist">
<ul>
<li>
<p><code>pluginKey</code>: required</p>
</li>
<li>
<p><code>pluginVersion</code>: optional (will default to latest version)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph">
<p>The installation of a plugin occurs through the KPM plugin (which itself relies on KPM) and consists of the following sequence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the binaries and install them on the filesystem at the right place</p>
</li>
<li>
<p>Set that latest downloaded version as being the default one to start (<code>isSelectedForStart</code>)</p>
</li>
<li>
<p>Notify Kill Bill core to update its view of the existing plugins</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of installing the <code>paypal</code> plugin with a specified version of <code>4.0.0</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;paypal&quot;</span>
<span class="tok-s1">             },</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginVersion&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;4.0.0&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;INSTALL_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: &quot;true&quot;</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of installing the <code>payment test plugin</code> (one must include all the Maven coordinates to specify where this plugin should be installed from):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;killbill:payment-test&quot;</span>
<span class="tok-s1">             },</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginArtifactId&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;payment-test-plugin&quot;</span>
<span class="tok-s1">             },</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginGroupId&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;org.kill-bill.billing.plugin.ruby&quot;</span>
<span class="tok-s1">             },</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginType&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;ruby&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;INSTALL_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: &quot;true&quot;</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_starting_a_plugin">Starting a plugin</h3>
<div class="paragraph">
<p>Starting a plugin occurs purely through Kill Bill (independent of the KPM plugin) and consists of the following sequence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Load the classes through the OSGI mechanism</p>
</li>
<li>
<p>Start the plugin</p>
</li>
<li>
<p>Update its view of the existing plugins</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of starting the default installed version for the <code>paypal</code> plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;paypal&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;START_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: true</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stopping_a_plugin">Stopping a plugin</h3>
<div class="paragraph">
<p>Stopping a plugin occurs purely through Kill Bill (independent of the KPM plugin) and consists of the following sequence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stop the plugin</p>
</li>
<li>
<p>Unload the classes through the OSGI mechanism</p>
</li>
<li>
<p>Update its view of the existing plugins</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of stopping the running version of the  <code>paypal</code> plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;paypal&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;STOP_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: true</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restarting_a_plugin">Restarting a plugin</h3>
<div class="paragraph">
<p>Restarting a plugin consists of first stopping the plugin and then restarting the plugin (therefore unloading previous classes and reloading new ones with a potentially different version).</p>
</div>
<div class="paragraph">
<p>Example of restarting the running version of the  <code>paypal</code> plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;paypal&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;RESTART_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: true</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_uninstallation">Uninstallation</h3>
<div class="paragraph">
<p>Uninstalling a plugin consists of marking that plugin as being <code>disabled</code>. The code remains on the filesystem but Kill Bill will ignore it.</p>
</div>
<div class="paragraph">
<p>Example of uninstalling the <code>paypal</code> plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{</span>
<span class="tok-s1">         &quot;nodeCommandProperties&quot;: [</span>
<span class="tok-s1">             {</span>
<span class="tok-s1">                 &quot;key&quot;: &quot;pluginKey&quot;,</span>
<span class="tok-s1">                 &quot;value&quot;: &quot;paypal&quot;</span>
<span class="tok-s1">             }</span>
<span class="tok-s1">         ],</span>
<span class="tok-s1">         &quot;nodeCommandType&quot;: &quot;UNINSTALL_PLUGIN&quot;,</span>
<span class="tok-s1">         &quot;isSystemCommandType&quot;: &quot;true&quot;</span>
<span class="tok-s1">     }&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span><span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_listing_all_the_plugins">Listing all the plugins</h3>
<div class="paragraph">
<p>There is an API to retrieve the current view for each Kill Bill node. That API provides details about the running versions of a Kill Bill node along with all the plugins detail information (the json can be quite long, so for better readibility one can pipe the output to <code>python -m json.tool</code> to format it nicely):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>http://127.0.0.1:8080/1.0/kb/nodesInfo<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>python<span class="tok-w"> </span>-m<span class="tok-w"> </span>json.tool</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output provides an array of entries, one for each running Kill Bill instance. Each of these entries will contain the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nodeName: By default, the <code>hostname</code> of the node running, but this can be configured</p>
</li>
<li>
<p>bootTime: Time at which that node started</p>
</li>
<li>
<p>kbVersion: Version for <a href="https://github.com/killbill/killbill">killbill</a></p>
</li>
<li>
<p>apiVersion: Version for <a href="https://github.com/killbill/killbill-api">killbill-api</a></p>
</li>
<li>
<p>pluginApiVersion: Version <a href="https://github.com/killbill/killbill-plugin-api">for killbill-plugin-api</a></p>
</li>
<li>
<p>platformVersion: Version for <a href="https://github.com/killbill/killbill-platform">killbill-platform</a></p>
</li>
<li>
<p>commonVersion: Version for <a href="https://github.com/killbill/killbill-commons">killbill-commons</a></p>
</li>
<li>
<p>pluginsInfo: One entry for each plugin:</p>
<div class="ulist">
<ul>
<li>
<p>pluginKey: The plugin key</p>
</li>
<li>
<p>pluginName: The name of the plugin as seen on the filesystem. It is used internally by Kill Bill to identify a plugin, but that name is only available after the plugin has been installed and could be changed from one installation to the next</p>
</li>
<li>
<p>bundleSymbolicName: The OSGI symbolic name (from the <code>MANIFEST.mf</code>)</p>
</li>
<li>
<p>isSelectedForStart: If this is the default version to be started for that plugin</p>
</li>
<li>
<p>services: The plugin APIs that this plugin exports</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of an output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">[</span>
<span class="tok-w">    </span><span class="tok-o">{</span>
<span class="tok-w">        </span><span class="tok-s2">&quot;apiVersion&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;0.51.27&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;bootTime&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;2018-07-13T23:00:40.000Z&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;commonVersion&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;0.21.15&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;kbVersion&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;0.20.0&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;lastUpdatedDate&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;2018-07-13T23:00:40.000Z&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;nodeName&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;localhost&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;platformVersion&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;0.37.19&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;pluginApiVersion&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;0.24.8&quot;</span>,
<span class="tok-w">        </span><span class="tok-s2">&quot;pluginsInfo&quot;</span>:<span class="tok-w"> </span><span class="tok-o">[</span>
<span class="tok-w">            </span><span class="tok-o">{</span>
<span class="tok-w">                </span><span class="tok-s2">&quot;bundleSymbolicName&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;org.kill-bill.billing.plugin.java.analytics-plugin&quot;</span>,
<span class="tok-w">                </span><span class="tok-s2">&quot;isSelectedForStart&quot;</span>:<span class="tok-w"> </span>true,
<span class="tok-w">                </span><span class="tok-s2">&quot;pluginKey&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;analytics&quot;</span>,
<span class="tok-w">                </span><span class="tok-s2">&quot;pluginName&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;analytics-plugin&quot;</span>,
<span class="tok-w">                </span><span class="tok-s2">&quot;services&quot;</span>:<span class="tok-w"> </span><span class="tok-o">[</span>
<span class="tok-w">                    </span><span class="tok-o">{</span>
<span class="tok-w">                        </span><span class="tok-s2">&quot;registrationName&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;killbill-analytics&quot;</span>,
<span class="tok-w">                        </span><span class="tok-s2">&quot;serviceTypeName&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;javax.servlet.Servlet&quot;</span>
<span class="tok-w">                    </span><span class="tok-o">}</span>
<span class="tok-w">                </span><span class="tok-o">]</span>,
<span class="tok-w">                </span><span class="tok-s2">&quot;state&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;RUNNING&quot;</span>,
<span class="tok-w">                </span><span class="tok-s2">&quot;version&quot;</span>:<span class="tok-w"> </span><span class="tok-s2">&quot;6.0.0&quot;</span>
<span class="tok-w">            </span><span class="tok-o">}</span>,
.....</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internals">Internals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_multi_node_implementation">Multi-node Implementation</h3>
<div class="paragraph">
<p>Each Kill Bill node writes to the database the details about its versions and plugins right after it has started. When there is any change in the system, each node is notified through a broadcast mechanism: each node then updates its entry guaranting that at any time the info matches the current state.</p>
</div>
<div class="paragraph">
<p>The broadcast mechanism is based on a simple mechanism where each node polls periodically a database table shwoing the command to execute. When the system (each node) picks up a new entry, it then sends a special bus event, so that different Kill Bill components and plugins can react to the event and carry out the action.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installationuninstallation">Installation/Uninstallation</h3>
<div class="paragraph">
<p>Installing/uninstalling a plugin using the API is slightly different than installing/uninstalling the plugin using KPM directly. The main reason has to do with the <code>pluginKey</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When installing/uninstalling a plugin using the API, one must provide a <code>pluginKey</code>. KPM will update a configuration file under <code>ROOT/plugins/plugin_identifiers.json</code> to keep the mapping between that <code>pluginKey</code> and the <code>pluginName</code> which is the location on the filesystem where this plugin is being deployed (<code>ROOT/plugins/{java|ruby}/pluginName/pluginVersion</code>)</p>
</li>
<li>
<p>When installing/uninstalling a plugin directly through KPM, one does not need to provide a <code>pluginKey</code> and the mapping is not created.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kpm_plugin">KPM Plugin</h3>
<div class="paragraph">
<p>Plugin installation and uninstallation is handled by the KPM plugin, whose role is to simply listen for bus events to then delegate the installation/uninstallation to the KPM gem and then notify Kill Bill about the result.</p>
</div>
<div class="paragraph">
<p>For all other operations (start/stop/restart), the KPM plugin is not involved.</p>
</div>
</div>
</div>
</div></div><div class="bottom-nav-links"><a href="#" id="prev-nav-link" class="bottom-nav-link card prev"><span class="arrow-icon left"><svg class="i-arrow" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg><span class="prev-text">Previous</span></span><span id="prev-navigator" class="bottom-nav-text">Prev</span>                               </a><a href="#" id="next-nav-link" class="bottom-nav-link card next"><span class="arrow-icon"><span class="next-text">Next</span><svg class="i-arrow icon-left" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg></span><span id="next-navigator" class="bottom-nav-text">Next</span></a></div></article></div><div class="bd-links-wrapper"><nav class="bd-links toc right-side-menu" id="myScrollspy" data-toggle="toc"></nav></div></div></div></div></div></main><script src="javascripts/jquery-3.6.1.min.js"></script><script src="javascripts/bootstrap.min.js"></script><script src="javascripts/bootstrap-toc.min.js"></script><script type="module" src="javascripts/kb.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});</script><script>
  jQuery(document).ready(function($){
    $('.sidebar-nav .icon-title').on('click', function (e) {
      e.preventDefault();
      $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
      $('.sidebar-nav > .navbar-nav > li').removeClass('open');

      if($(this).next().is(':visible')){
        $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
        $('.sidebar-nav > .navbar-nav > li').removeClass('open');
      } else {
        $(this).parent().addClass('open');
        $(this).next().slideDown(200);
      }
    });

    let pageURL = $(location).attr("href");
    pageURL = pageURL.includes('.html') ? pageURL : pageURL + '.html';
    $('.nav-link').each(function() {
      if (pageURL.toLowerCase().includes($(this).attr('href').toLowerCase())) {
        $(this).parent().addClass('list-item-active');
        $(this).parent().parent().addClass('active-list');
        $(this).parent().parent().prev().addClass('bd-link-active-wrap');
      }
    });
  });
</script>
</body></html>