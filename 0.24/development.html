<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 2.0.20"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"><style type="text/css"></style><title>Kill Bill development</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */

@import "https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap";

*,
*::before,
*::after {
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

ul,
ol {
  padding: 0;
  list-style-type: none;
}

body,
h1,
h2,
h3,
h4,
p,
ul[class],
ol[class],
li,
figure,
figcaption,
blockquote,
dl,
dd {
  margin: 0;
}

body {
  min-height: 100vh;
  scroll-behavior: smooth;
  text-rendering: optimizeSpeed;
  font-family: 'Inter', sans-serif;
  font-size: 16px;
  line-height: 150%;
  color: #374151;
  max-width: 100%;
  overflow-x: hidden;
}

ul[class],
ol[class] {
  list-style: none;
}

img {
  max-width: 100%;
  display: block;
}

img[align=center] {
  margin: 0 auto;
}

button {
  cursor: pointer;
}

input,
button,
textarea,
select {
  font: inherit;
}
a {
  color: #167BB7;
}
h1,
h3,
h4 {
  font-weight: 400;
}
h2,
h3,
h4 {
  color: #1F2937;
}
h1 {
  font-size: 40px;
  line-height: 120%;
  letter-spacing: -0.025em;
  color: #FFFFFF;
}
h2 {
  font-weight: 600;
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
  font-weight: 500;
}

.header {
  padding: 16px 0;
  background: #FFFFFF;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .1), 0 1px 2px rgba(0, 0, 0, .06);
}
@media (min-width: 768px) {
  .header-logo {
    width: 320px;
  }
}
.header-wrapper .logo {
  max-width: 215px;
  margin: auto;
  width: 80%;
}
.header-wrapper .logo img {
  object-fit: contain;
}
@media (max-width: 767px) {
  .header-wrapper .logo a {
    display: flex;
    justify-content: center;
  }
}
.header-search {
  flex-grow: 1;
  padding-right: 16px;
}
@media (min-width: 768px) {
  .header-search {
    /*flex-grow: 1;*/
    /*max-width: calc(100% - 590px);*/
    /*padding-right: 53px;*/
    /*padding-left: 45px;*/
  }
}
@media (min-width: 1200px) {
  .header-search {
    max-width: calc(100% - 590px);
    padding-right: 53px;
    padding-left: 45px;
  }
}

.header-wrapper .search-form-wrapper {
  flex-grow: 1;
}
.header-wrapper .search-form {
  position: relative;
}
.header-wrapper .search-form .algolia-autocomplete {
  width: 100%;
}
.header-wrapper .search-form input[type="search"] {
  width: 100%;
  padding: 9px 9px 9px 40px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
}
.header-wrapper .search-form .ds-dropdown-menu {
  max-width: none;
  width: 100%;
}
.header-wrapper .search-form .search-form-icon {
  position: absolute;
  left: 13px;
  top: 9px;
  z-index: 1;
  width: 20px;
  height: 20px;
  pointer-events: none;
}
.content-wrapper {
  padding: 24px 20px;
}
@media (min-width: 1024px) {
  .content-wrapper {
    padding-right: 54px;
    padding-left: 54px;
  }
}

.content-wrapper .banner {
  position: relative;
  display: flex;
  align-items: center;
  min-height: 174px;
  margin-bottom: 24px;
  padding: 0 40px;
  background-color: #167BB7;
  border-radius: 8px;
}
.content-wrapper .banner .bg-image {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

.main {
  position: relative;
  line-height: 1.5;
}

.main p {
  margin-bottom: 12px;
}

.main .sidebar {
  width: calc(100% + 15px);
  flex-shrink: 0;
  margin-right: 40px;
  position: sticky;
  top: 0;
  margin-left: -15px;
  padding: 24px 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .1), 0 1px 2px rgba(0, 0, 0, .06);
}

.main .sidebar .icon-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 8px;
  padding-bottom: 8px;
  cursor: pointer;
}

.main .sidebar .icon-title .left-part{
  display: flex;
  align-items: center;
  order: 2;
  flex-grow: 1;
}

.main .sidebar .icon-title .chevron,
.main .sidebar .icon-title.bd-link-active-wrap .chevron.rotated {
  transform: rotate(180deg);
}

.main .sidebar .icon-title.bd-link-active-wrap .bd-toc-link {
  color: #167BB7;
}

.main .sidebar .open .icon-title .chevron,
.main .sidebar .icon-title.bd-link-active-wrap .chevron{
  transform: rotate(0);
  transition-duration: .25s;
  transform-origin: center;
}

.main .sidebar .bd-link-active-wrap  .chevron path {
  fill: #D1D5DB;
}

.main .sidebar .bd-link-active-wrap svg path {
  fill: #167BB7;
}

.main .sidebar .icon-title svg {
  width: 16px;
  order: 1;
}
.main .sidebar-nav {
  height: 100vh;
}
.main .sidebar-nav,
.main .right-side-menu {
  overflow-y: scroll;
  padding: 0 24px;
}

.main .right-side-menu {
  direction: rtl;
  padding: 24px 0 0 24px;
}

.main .right-side-menu .navbar-nav {
  direction: ltr;
}

.main .sidebar-nav::-webkit-scrollbar,
.main .right-side-menu::-webkit-scrollbar
{
  width: 8px;
}

.main .sidebar-nav::-webkit-scrollbar-track,
.main .right-side-menu::-webkit-scrollbar-track
{
  background-color: transparent;
}

.main .sidebar-nav::-webkit-scrollbar-thumb,
.main .right-side-menu::-webkit-scrollbar-thumb
{
  background-color: #F3F4F6;
  width: 6px;
  border-radius: 32px;
}

.main .sidebar-nav a.nav-link {
  transition-duration: .25s;
  transition-property: color;
}
.main .sidebar-nav a.nav-link:hover {
  color: #167BB7;
}
.main .sidebar-nav a {
  color: #6B7280;
}

.main .sidebar-nav a.bd-toc-link {
  padding-left: 12px;
  font-weight: 500;
  font-size: 14px;
  display: block;
  color: #6B7280;
  transition-duration: .25s;
  transition-property: color;
}
.main .sidebar-nav li:hover a.bd-toc-link,
.main .sidebar-nav li.active a.bd-toc-link,
.main .sidebar-nav .open a.bd-toc-link {
  color: #374151;
}
@media (min-width: 768px) {
  .main .sidebar:after {
    content: '';
    position: absolute;
    top: 30px;
    right: -12px;
    width: 13px;
    height: 24px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  }
}
.sidebar-toggler {
  display: none;
}
@media (min-width: 768px) {
  .sidebar-toggler {
    display: block;
    position: absolute;
    top: 30px;
    right: -12px;
    width: 24px;
    height: 24px;
    border-radius: 4px;
    cursor: pointer;
    background-color: #F3F4F6;
    transition-duration: .25s;
    z-index: 2;
  }
  .sidebar-toggler:hover {
    background-color: #efefef;
  }
  .sidebar-toggler:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 12px;
    transform: translate(-50%, -50%) rotate(0deg);
    background-image: url("data:image/svg+xml,%3Csvg width='8' height='12' viewBox='0 0 8 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.33337 10.6666L1.66671 5.99998L6.33337 1.33331' stroke='%23167BB7' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A");
    background-size: contain;
    background-repeat: no-repeat;
    transition-duration: .25s;
  }
  .sidebar-toggler.active:after {
    transform: translate(-50%, -50%) rotate(180deg);
  }
}


pre.pygments .tok-o {
  color: #167BB7;
}

.main p code {
  color: inherit;
  font-size: inherit;
}

.main table,.main table td,.main table th {
  border: 1px solid #dedede;
  padding: 10px;
}

.main .note table,.main .note table td,.main .note table th {
  border: none;
}

.main .note .icon {
  width: 60px;
}

.main .note .icon .fa.icon-note {
  display: none;
}

.main .note .content {
  font-weight: normal;
  color: #374151;
}

.main table td.icon svg{
  width: 30px;
  height: auto;
}

.main table td.icon .title {
  display: none;
}

.main table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 15px;
}

.main table .title {
  text-transform: uppercase;
  font-weight: 600;
  padding: 0 5px;
}

pre.pygments .tok-o {
  color: #167BB7!important;
}

.main .sidebar-nav > ul li ul {
  display: none;
  padding-left: 16px;
  padding-bottom: 8px;
  font-size: 14px;
  border-bottom: 1px solid #F3F4F6;
}

.main .sidebar-nav > ul li ul.active-list {
  display: block;
}

.main .sidebar-nav > ul li ul li a{
  display: block;
  position: relative;
  padding-left: 16px;
  font-size: 14px;
}

.main .sidebar-nav .list-item-active a {
  color: #167BB7;
}

.main .sidebar-nav > .navbar-nav  > li {
  margin-bottom: 8px;
}

.main .right-side-menu {
  position: sticky;
  top: 16px;
  height: calc(100vh - 40px);
  margin-top: 24px;
}

.main .right-side-menu > .navbar-nav {
  position: relative;
}

.sidebar-wrapper {
  margin-left: 0;
  transition-duration: .25s;
  flex-shrink: 0;
  width: calc(100% - 16px);
}
.main-wrapper {
  flex-grow: 1;
}
.bd-links-wrapper {
  flex-shrink: 0;
}
.right-side-menu ul ul {
  padding-left: 16px;
}
@media (min-width: 768px) {
  .sidebar-wrapper {
    width: 310px;
  }
  .sidebar-hide .sidebar-wrapper {
    margin-left: -280px;
  }
  .main-wrapper {
    width: calc(100% - 520px);
  }
}
@media (min-width: 1200px) {
  .main-wrapper {
    width: calc(100% - 590px);
  }
  .bd-links-wrapper {
    width: 268px;
  }
}


.main .right-side-menu > .navbar-nav:before {
  content: "In this document";
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  font-size: 14px;
  line-height: 16px;
  text-transform: uppercase;
  color: #1F2937;
}

.main .right-side-menu > ul > li > a {
  font-size: 14px;
  font-weight: 300;
  margin-bottom: 7px;
  padding: 4px 0;
}

.main .right-side-menu .nav-link {
  border: none!important;
  color: #6B7280!important;
}

.main .right-side-menu .nav-link.active{
  padding-left: 0;
  color: #167BB7!important;
  font-weight: 500;
}

.main .right-side-menu .navbar-nav {
  display: block;
}
.main nav[data-toggle=toc] .nav > li > a {
  padding-left: 0;
  transition-property: color;
  transition-duration: .25s;
}
.main nav[data-toggle=toc] .nav > li > a:focus,
.main nav[data-toggle=toc] .nav > li > a:hover {
  color: #167BB7!important;
}
.main nav[data-toggle=toc] .nav .nav > li > a:focus,
.main nav[data-toggle=toc] .nav .nav > li > a:hover,
.main nav[data-toggle=toc] .nav .nav > li > .active,
.main nav[data-toggle=toc] .nav .nav > li > .active:focus,
.main nav[data-toggle=toc] .nav .nav > li > .active:hover {
  padding-left: 0;
}
.main nav[data-toggle=toc] .nav-link.active:hover {
  padding-left: 0;
}

.main img {
  box-shadow: none;
  border-radius: 0;
  margin-bottom: 24px;
  margin-top: 10px;
  display: inline;
}

.main .note img {
  box-shadow: none;
  border-radius: 0;
  min-width: 40px;
  width: 40px;
  margin-bottom: 10px;
}

.main .imageblock img {
  height: auto;
}
.main p span.image {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  height: 16px;
  width: 20px;
  margin-left: 4px;
  margin-right: 4px;
}
.main p span.image img {
  height: 100%;
  width: 100%;
  margin-bottom: 0;
  margin-top: 0;
  box-shadow: none;
  object-fit: cover;
}

.main .listingblock, .literalblock > .content pre {
  padding: 8px 14px;
  background: #50576A;
  border-radius: 4px;
  margin-bottom: 24px;
  font-size: 14px;
  font-weight: 400;
  color: #CECECE;
}

pre.pygments {
  background: #50576A!important;
  margin-bottom: 0;
}

.main .listingblock  .tok-nt {
  color: #29A9C9;
}

.main .listingblock .tok-s {
  color: #E44C3A;
}

.main .listingblock  .tok-p {
  color: #F5FBFF;
}

.main ol {
  counter-reset: my-awesome-counter;
  list-style: none;
  color: #167BB7;
  margin-left: 20px;
  margin-bottom: 16px;
}

.main ol > li {
  position: relative;
  counter-increment: my-awesome-counter;
  font-weight: 600;
}

.main ol.arabic > li::before {
  content: counter(my-awesome-counter);
  position: absolute;
  top: -1px;
  left: -20px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background-color: #E5E7EB;
  color: #6B7280;
  font-weight: 400;
  font-size: inherit;
}
.main ol > li::before {
}

.main ol.arabic:first-child p {
  color: #374151;
  margin-left: 10px;
  font-weight: 400;
}

.main .content-wrapper ul{
  color: #374151;
  list-style: disc;
  margin-left: 20px;
}

.main .content-wrapper ul > li ul {
  margin-left: 0;
  list-style-type: none;
}

.main .content-wrapper ul.nav-tabs{
  list-style: none;
}
.main ol ol {
  margin-left: 30px;
}
.main ol.loweralpha[type=a] > li {
  list-style-type: lower-alpha;
}
.main ol.lowerroman[type=i] > li {
  list-style-type: lower-roman;
}
.main ol li::marker {
  color: #6B7280;
}

.main h2, .main h3 {
  margin-bottom: 16px;
  padding-top: 24px;
}

.main h4 {
  margin-bottom: 16px;
  padding-top: 16px;
}

.content-wrapper h2 a, .content-wrapper h3 a, .content-wrapper h4 a {
  display: none;
  margin-left: 5px;
}

.content-wrapper h4 a svg {
  height: 14px;
  width: auto;
}

.content-wrapper h2:hover a, .content-wrapper h3:hover a, .content-wrapper h4:hover a {
  display: inline;
}

.breadcrumbs-wrapper {
  margin-bottom: 24px;
}
.breadcrumbs-list {
  display: flex;
  align-items: center;
}
.breadcrumbs-list li {
  display: flex;
  align-items: center;
}
.breadcrumbs-list li:not(:last-of-type):after {
  content: '/';
  margin-left: 6px;
  margin-right: 6px;
}
.breadcrumbs-list a {
  display: flex;
  align-items: center;
  letter-spacing: -0.025em;
  color: #374151;
}
.breadcrumbs-list a svg {
  width: 24px;
  height: 24px;
  margin-right: 4px;
}

.note table code {
  color: #374151;
}

.banner .absolute-figure {
  position: absolute;
}

.banner .absolute-figure.abstract-figure {
  right: 0;
}

.banner .absolute-figure.circle2 {
  right: 30%;
  top: 10%;
}

.banner .absolute-figure.circle3 {
  right: 15%;
  top: 10%;
}

.banner .absolute-figure.circle4 {
  left: 5%;
  top: 10%;
}

.banner .absolute-figure.circle5 {
  left: 30%;
}

.banner .absolute-figure.circle6 {
  left: 6%;
  bottom: 0;
}

.banner .absolute-figure.circle7 {
  left: 35%;
  bottom: 15%;
}

.banner .absolute-figure.circle8 {
  left: 55%;
  bottom: 0;
}

.banner .absolute-figure.circle9 {
  bottom: 0;
  right: 0;
}

.doclink {
  position: fixed;
  bottom: 0;
  padding: 0 15px 10px;
  background-color: #FBFDFF;
  z-index: 1000;
  font-size: 12px;
}

.btn-primary, .btn-primary:hover {
  background-color: #167BB7;
  border-color: #167BB7;
}

.card {
  height: 100%;
}
.card-wrapper .card-text {
  min-height: 80px;
  margin-bottom: 16px;
}

.card-wrapper .card-body {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 1rem 0.25rem;
}

pre.pygments .tok-c1 {
  color: #29A9C9!important;
}

@media screen and (max-width: 1520px) {
  .card-wrapper .card-text {
    min-height: 110px;
  }
}

.DocSearch.DocSearch-Button {
    margin-left: 0;
    width: 100%;
    height: 38px;
    padding: 0 15px;
    background-color: transparent;
    border: 1px solid #D1D5DB;
    box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
    border-radius: 6px;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    color: #6B7280;
}
.search-form-wrapper .DocSearch-Button-Keys {
  display: none;
}
.DocSearch-Hit-content-wrapper {
  overflow-x: inherit !important;
}
.search-form-wrapper .DocSearch-Button .DocSearch-Search-Icon {
  color: #9CA3AF;
  width: 16px;
  height: 16px;
}
.search-form-wrapper .DocSearch-Button-Placeholder {
  padding-left: 10px;
}
.oneline_with_image img {
    display: inline-block;
    height: 30px;
    margin: 0 10px;
}

.warning table td, .warning table,
.important table td, .important table {
  border: none;
}
.copy-icon {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  height: 40px;
  margin: -8px -14px 8px;
  padding: 0 16px;
  background-color: #3C4356;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}
.copy-icon svg {
  cursor: pointer;
}
.icon-tip {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 502 502' xml:space='preserve'%3E%3Cpath d='M230.523 78.722c-35.583-.342-69.221 13.48-94.756 38.802-25.528 25.316-39.587 58.839-39.587 94.396 0 34.708 13.278 67.567 37.387 92.524 24 24.844 37.216 57.409 37.216 91.697v70.281c0 5.523 4.477 10 10 10h12.756C197.871 491.185 211.53 502 227.676 502s29.805-10.815 34.138-25.578h16.166c5.523 0 10-4.477 10-10v-70.275c0-34.627 12.99-66.961 36.576-91.044 24.522-25.04 38.027-58.133 38.027-93.185 0-35.38-13.723-68.697-38.64-93.812-24.902-25.1-58.079-39.086-93.42-39.384zM227.676 482c-4.787 0-9.076-2.17-11.936-5.578h23.872c-2.86 3.408-7.149 5.578-11.936 5.578zm40.304-25.578h-77.197v-37.125h77.197v37.125zm42.287-165.313c-27.269 27.844-42.287 65.148-42.287 105.039v3.15h-77.197v-3.156c0-39.5-15.211-77-42.832-105.593-20.488-21.208-31.771-49.133-31.771-78.629 0-30.183 11.958-58.663 33.67-80.194 21.72-21.538 50.338-33.226 80.505-33.005 61.882.521 112.228 51.301 112.228 113.197 0 29.789-11.477 57.912-32.316 79.191zM229.381 55.584c5.523 0 10-4.477 10-10V10c0-5.523-4.477-10-10-10s-10 4.477-10 10v35.584c0 5.523 4.477 10 10 10zM85.246 29.896a9.988 9.988 0 0 0 8.099 4.123 9.96 9.96 0 0 0 5.87-1.91c4.468-3.247 5.458-9.5 2.212-13.968l-7.108-9.783C91.073 3.89 84.82 2.9 80.351 6.146c-4.468 3.247-5.458 9.5-2.212 13.968l7.107 9.782zM124.729 84.239a9.988 9.988 0 0 0 8.099 4.123 9.96 9.96 0 0 0 5.87-1.91c4.468-3.246 5.458-9.5 2.212-13.968l-19.113-26.308c-3.246-4.468-9.499-5.459-13.968-2.212-4.468 3.246-5.458 9.5-2.212 13.968l19.112 26.307zM37.031 160.15l33.843 10.996a10.01 10.01 0 0 0 3.092.492c4.215 0 8.136-2.687 9.509-6.913 1.707-5.253-1.168-10.894-6.42-12.601l-33.843-10.996c-5.251-1.705-10.894 1.168-12.601 6.42-1.707 5.254 1.167 10.895 6.42 12.602zM84.808 260.51c-1.707-5.253-7.346-8.126-12.601-6.42l-33.843 10.996c-5.252 1.707-8.127 7.348-6.42 12.601 1.373 4.226 5.293 6.913 9.509 6.913a10.01 10.01 0 0 0 3.092-.492l33.843-10.996c5.252-1.708 8.126-7.349 6.42-12.602zM102.626 391.668c-4.467-3.246-10.721-2.255-13.968 2.212l-8.903 12.253c-3.246 4.468-2.256 10.722 2.212 13.968a9.952 9.952 0 0 0 5.87 1.91 9.99 9.99 0 0 0 8.099-4.123l8.903-12.253c3.246-4.467 2.256-10.72-2.213-13.967z'/%3E%3Cpath d='M134.544 347.736c-4.468-3.246-10.722-2.255-13.968 2.212l-8.845 12.175c-3.246 4.468-2.255 10.722 2.212 13.968a9.952 9.952 0 0 0 5.87 1.91 9.99 9.99 0 0 0 8.099-4.123l8.845-12.175c3.246-4.467 2.255-10.721-2.213-13.967zM338.347 336.895c-3.246-4.468-9.499-5.459-13.968-2.212-4.468 3.247-5.458 9.5-2.212 13.968l20.916 28.789a9.988 9.988 0 0 0 8.099 4.123 9.96 9.96 0 0 0 5.87-1.91c4.468-3.247 5.458-9.5 2.212-13.968l-20.917-28.79zM426.045 260.984l-33.843-10.997c-5.252-1.705-10.894 1.168-12.601 6.42-1.707 5.252 1.168 10.894 6.42 12.601l33.843 10.997a10.01 10.01 0 0 0 3.092.492c4.215 0 8.136-2.687 9.509-6.913 1.707-5.251-1.167-10.893-6.42-12.6zM471.39 130.367c-1.706-5.252-7.347-8.127-12.601-6.42l-14.678 4.769c-5.252 1.707-8.127 7.348-6.42 12.601 1.373 4.226 5.293 6.913 9.509 6.913a10.01 10.01 0 0 0 3.092-.492l14.678-4.769c5.252-1.708 8.126-7.349 6.42-12.602zM387.777 167.536a10.01 10.01 0 0 0 3.092-.492l25.994-8.446c5.252-1.707 8.127-7.348 6.42-12.601-1.707-5.252-7.347-8.127-12.601-6.42l-25.994 8.446c-5.252 1.707-8.127 7.348-6.42 12.601 1.374 4.225 5.294 6.912 9.509 6.912zM320.89 83.916a9.952 9.952 0 0 0 5.87 1.91 9.99 9.99 0 0 0 8.099-4.123l20.916-28.789c3.246-4.468 2.255-10.722-2.212-13.968-4.469-3.246-10.722-2.255-13.968 2.212l-20.916 28.789c-3.248 4.469-2.257 10.722 2.211 13.969zM288.349 135.549c-11.289-8.76-24.609-14.981-38.521-17.992-5.395-1.169-10.721 2.26-11.889 7.659-1.168 5.398 2.261 10.721 7.659 11.889 11.007 2.382 21.55 7.308 30.491 14.245a9.954 9.954 0 0 0 6.124 2.1 9.981 9.981 0 0 0 7.907-3.87c3.385-4.363 2.592-10.645-1.771-14.031zM202.914 119.066c-41.096 11.729-69.797 49.799-69.797 92.579 0 5.523 4.477 10 10 10s10-4.477 10-10c0-33.895 22.735-64.056 55.287-73.346 5.311-1.516 8.387-7.05 6.872-12.361-1.518-5.31-7.052-8.388-12.362-6.872z'/%3E%3C/svg%3E");
  width: 42px;
  height: 42px;
  background-repeat: no-repeat;
  background-position: center;
}
.main table td.icon {
  text-align: center;
}
.icon-warning {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='554.2' height='554.199' xml:space='preserve' fill='%23E44C3A'%3E%3Cpath d='M538.5 386.199 356.5 70.8a91.803 91.803 0 0 0-79.501-45.9c-32.8 0-63.1 17.5-79.5 45.9L12.3 391.6a91.793 91.793 0 0 0 0 91.8c16.4 28.4 46.7 45.9 79.5 45.9H462.4c50.7 0 91.8-41.101 91.8-91.8 0-19-5.8-36.7-15.7-51.301zm-222.2 30.7c0 21.7-16.7 38.3-39.2 38.3s-39.2-16.6-39.2-38.3V416c0-21.601 16.7-38.301 39.2-38.301S316.3 394.3 316.3 416v.899zm.9-258.199-19.4 169.4c-1.3 12.2-9.4 19.8-20.7 19.8s-19.4-7.7-20.7-19.8L237 158.6c-1.3-13.1 5.801-23 18-23h44.1c12.2.1 19.4 10 18.1 23.1z'/%3E%3C/svg%3E%0A");
  width: 40px;
  height: 39px;
  background-size: 100%;
}
.icon-important {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Cg transform='scale(.521)'%3E%3Ccircle cx='96' cy='96' r='74' fill='%23E44C3A'/%3E%3Cpath d='M86 48h20l-4 72H90z' fill='%23fff'/%3E%3Ccircle cx='96' cy='140' r='10' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E");
  width: 40px;
  height: 40px;
  background-size: 100%;
}
.main .admonitionblock.tip table,
.main .admonitionblock.tip table td {
  border: none;
}
/*Light box start*/

.lightbox-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  background-color: #ebebeb;
  padding: 20px;
  transform: translate(-50%, -50%);
  z-index: 100;
  border-radius: 8px;
  max-width: 95vw;
  width: 100%;
  height: 90vh;
}
.lightbox-modal .img {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}
.lightbox-modal .img img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  margin: 0;
}
@media (max-width: 1023px) {
  .lightbox-modal {
    height: auto;
    max-width: 95vw;
  }
}
#close-ligtbox {
  position: absolute;
  right: -35px;
  top: -35px;
  display: block;
  width: 30px;
  font-size: 36px;
  border-radius: 8px;
  cursor: pointer;
  color: #fff;
}
@media (max-width: 1023px) {
  #close-ligtbox {
    right: 0;
    top: -40px;
    width: 24px;
    font-size: 28px;
  }
}
.overlay {
  display: none;
  position: fixed;
  background-color: rgba(0,0,0,.5);
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 99;
}
.imageblock img, .paragraph .image img {
  cursor: pointer;
}
/*Light box end*/

.ulist {
  margin-left: 10px;
}
.main ol.arabic:first-child .ulist p,
.ulist ul li p {
  margin-left: 0!important;
}

.ulist li::marker {
  font-size: 20px;
  color: #6d7176;
}
.ulist li ul {
  list-style-type: none;
}
.ulist li ul li {
  position: relative;
  padding-left: 24px;
}
.ulist li ul li:before {
  content: '';
  position: absolute;
  left: 0;
  top: 9px;
  width: 8px;
  height: 8px;
  background-color: #E5E7EB;
  border: 1px solid #9CA3AF;
  border-radius: 100%;
}
.right-side-menu ul ul li:not(:last-child) {
  margin-bottom: 5px;
}
.imageblock .title {
  margin-bottom: 24px;
}
</style>
<style>pre.pygments .hll { background-color: #49483e }
pre.pygments { background: #272822; color: #f8f8f2 }
pre.pygments .tok-c { color: #75715e } /* Comment */
pre.pygments .tok-err { color: #960050; background-color: #1e0010 } /* Error */
pre.pygments .tok-k { color: #66d9ef } /* Keyword */
pre.pygments .tok-l { color: #ae81ff } /* Literal */
pre.pygments .tok-n { color: #f8f8f2 } /* Name */
pre.pygments .tok-o { color: #f92672 } /* Operator */
pre.pygments .tok-p { color: #f8f8f2 } /* Punctuation */
pre.pygments .tok-ch { color: #75715e } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #75715e } /* Comment.Multiline */
pre.pygments .tok-cp { color: #75715e } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #75715e } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #75715e } /* Comment.Single */
pre.pygments .tok-cs { color: #75715e } /* Comment.Special */
pre.pygments .tok-gd { color: #f92672 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gi { color: #a6e22e } /* Generic.Inserted */
pre.pygments .tok-go { color: #66d9ef } /* Generic.Output */
pre.pygments .tok-gp { color: #f92672; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #75715e } /* Generic.Subheading */
pre.pygments .tok-kc { color: #66d9ef } /* Keyword.Constant */
pre.pygments .tok-kd { color: #66d9ef } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #f92672 } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #66d9ef } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #66d9ef } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #66d9ef } /* Keyword.Type */
pre.pygments .tok-ld { color: #e6db74 } /* Literal.Date */
pre.pygments .tok-m { color: #ae81ff } /* Literal.Number */
pre.pygments .tok-s { color: #e6db74 } /* Literal.String */
pre.pygments .tok-na { color: #a6e22e } /* Name.Attribute */
pre.pygments .tok-nb { color: #f8f8f2 } /* Name.Builtin */
pre.pygments .tok-nc { color: #a6e22e } /* Name.Class */
pre.pygments .tok-no { color: #66d9ef } /* Name.Constant */
pre.pygments .tok-nd { color: #a6e22e } /* Name.Decorator */
pre.pygments .tok-ni { color: #f8f8f2 } /* Name.Entity */
pre.pygments .tok-ne { color: #a6e22e } /* Name.Exception */
pre.pygments .tok-nf { color: #a6e22e } /* Name.Function */
pre.pygments .tok-nl { color: #f8f8f2 } /* Name.Label */
pre.pygments .tok-nn { color: #f8f8f2 } /* Name.Namespace */
pre.pygments .tok-nx { color: #a6e22e } /* Name.Other */
pre.pygments .tok-py { color: #f8f8f2 } /* Name.Property */
pre.pygments .tok-nt { color: #f92672 } /* Name.Tag */
pre.pygments .tok-nv { color: #f8f8f2 } /* Name.Variable */
pre.pygments .tok-ow { color: #f92672 } /* Operator.Word */
pre.pygments .tok-w { color: #f8f8f2 } /* Text.Whitespace */
pre.pygments .tok-mb { color: #ae81ff } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #ae81ff } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #ae81ff } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #ae81ff } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #ae81ff } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #e6db74 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #e6db74 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #e6db74 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #e6db74 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #e6db74 } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #e6db74 } /* Literal.String.Double */
pre.pygments .tok-se { color: #ae81ff } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #e6db74 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #e6db74 } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #e6db74 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #e6db74 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #e6db74 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #e6db74 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #a6e22e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #f8f8f2 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #f8f8f2 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #f8f8f2 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #f8f8f2 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #ae81ff } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><header class="header"><div class="header-wrapper"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="header-logo"><div class="logo"><a href="https://docs.killbill.io"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" style="height:41px" alt="KillBill Docs"></a></div></div><div class="header-search"><div class="search-form-wrapper"><div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;"></div></div></div></div></div></div></header><main class="main"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="sidebar-wrapper"><aside class="sidebar"><nav class="sidebar-nav"><ul class="nav navbar-nav"><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Getting Started</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li><a class="nav-link" href="/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="/latest/getting_started.html">Getting Started (Installation)</a></li><li><a class="nav-link" href="/latest/quick_start_with_kaui.html">Quick Start with Kaui</a></li><li><a class="nav-link" href="/latest/quick_start_with_kb_api.html">Quick Start with the Kill Bill API</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Installation</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="/latest/userguide_deployment.html">Going to Production</a></li><li><a class="nav-link" href="/latest/how-to-upgrade-the-database.html">Database Migrations</a></li><li><a class="nav-link" href="/latest/PostgreSQL.html">PostgreSQL Setup</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;Notes</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">AWS</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/how-to-set-up-a-single-tier-system.html">Single-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-multi-tier-system.html">Multi-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-cloud-formation-system.html">CloudFormation Setup</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/how-to-maintain-a-single-tier-system.html">Single-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-multi-tier-system.html">Multi-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-cloud-formation-system.html">CloudFormation Maintenance</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Manuals</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="/latest/userguide_payment.html">Payment Processing</a></li><li><a class="nav-link" href="/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="/latest/email-notification-plugin.html">Email Notification Plugin</a></li><li><a class="nav-link" href="/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="/latest/userguide_analytics.html">Analytics Plugin</a></li><li><a class="nav-link" href="/latest/userguide_configuration.html">Kill Bill&nbsp;Configuration</a></li><li><a class="nav-link" href="/latest/internationalization.html">Kill Bill&nbsp;Internationalization</a></li><li><a class="nav-link" href="/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Tutorials</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plan_alignment.html">Plans Alignments</a></li><li><a class="nav-link" href="/latest/overdue.html">Overdue System</a></li><li><a class="nav-link" href="/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="/latest/ha.html">Hierarchical Accounts</a></li><li><a class="nav-link" href="/latest/catalog-examples.html">Catalog Examples</a></li><li><a class="nav-link" href="/latest/invoice_examples.html">Invoice Examples</a></li><li><a class="nav-link" href="/latest/invoice_templates.html">Invoice Templates</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Integration</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API Reference</a></li><li><a class="nav-link" href="/latest/swagger_documentation.html">Swagger UI Documentation</a></li><li><a class="nav-link" href="/latest/postman.html">Postman Integration</a></li><li><a class="nav-link" href="/latest/debugging.html">Debugging</a></li><li><a class="nav-link" href="/latest/push_notifications.html">Push Notifications</a></li><li><a class="nav-link" href="/latest/kill_bill_events.html">Kill Bill Events</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Plugin Development</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_introduction.html">Plugin Introduction</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_development.html">Plugin Development</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_installation.html">Plugin Installation</a></li><li><a class="nav-link" href="/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a class="nav-link" href="/latest/notification_plugin.html">Notification Plugins</a></li><li><a class="nav-link" href="/latest/payment_plugin.html">Payment Plugins</a></li><li><a class="nav-link" href="/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a class="nav-link" href="/latest/usage_plugin.html">Usage Plugins</a></li><li><a class="nav-link" href="/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a class="nav-link" href="/latest/catalog_plugin.html">Catalog Plugins</a></li><li><a class="nav-link" href="/latest/entitlement_plugin.html">Entitlement Plugins</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Operational Guides</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/deploy_to_kubernetes.html">Kubernetes (K8s) Deployment</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/user_management.html">Users, Roles, and Permissions</a></li><li><a class="nav-link" href="/latest/plugin_management.html">Plugin Management</a></li><li><a class="nav-link" href="/latest/aws-tools.html">AWS Analytics Tools</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Client Libraries</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/java_client.html">Java</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a class="nav-link" href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">Go</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">About Kill Bill</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/demo.html">Demo</a></li><li><a class="nav-link" href="/latest/features.html">Features List</a></li><li><a class="nav-link" href="/latest/faq.html">Technical FAQs</a></li><li><a class="nav-link" href="/latest/Kill-Bill-Glossary.html">Glossary</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">Internal</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/internal_design.html">Internal Design</a></li><li><a class="nav-link" href="/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a class="nav-link" href="/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a class="nav-link" href="/latest/development.html">Development Environment</a></li></ul></li><li><div class="icon-title"><div class="left-part"><a class="bd-toc-link main-link">References</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API Schema</a></li><li><a class="nav-link" href="/latest/catalog.xsd">Catalog XSD Reference</a></li><li><a class="nav-link" href="/latest/overdue.xsd">Overdue XSD Reference</a></li></ul></li></ul><div class="sidebar-toggler"></div></nav><script src="https://code.jquery.com/jquery-3.6.1.min.js"></script><script>
  let $ = jQuery;
  $('.sidebar-nav .icon-title').on('click', function (e) {
    e.preventDefault();
    $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
    $('.sidebar-nav > .navbar-nav > li').removeClass('open');

    if($(this).next().is(':visible')){
      $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
      $('.sidebar-nav > .navbar-nav > li').removeClass('open');
    } else {
      $(this).parent().addClass('open');
      $(this).next().slideDown(200);
    }
  });

  let pageURL = $(location).attr("href");
  $('.nav-link').each(function() {
    if (pageURL.includes($(this).attr('href'))) {
      $(this).parent().addClass('list-item-active');
      $(this).parent().parent().addClass('active-list');
      $(this).parent().parent().prev().addClass('bd-link-active-wrap');
    }
  });
</script><a class="doclink" href="mailto:support@killbill.io">Report a doc problem</a></aside></div><div class="main-wrapper"><article class="content-wrapper"><div class="banner"><div class="bg-image"><svg class="absolute-figure circle1" width="41" height="38" viewBox="0 0 41 38" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="12.5" cy="10.5" rx="28.5" ry="27.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle2" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle3" width="97" height="97" viewBox="0 0 97 97" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.4"/>
</svg>
<svg class="absolute-figure circle4" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="7" cy="7" r="7" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle5" width="65" height="23" viewBox="0 0 65 23" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="32.5" cy="-9.5" r="32.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle6" width="48" height="31" viewBox="0 0 48 31" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="24" cy="24" r="24" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle7" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle8" width="20" height="10" viewBox="0 0 20 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle9" width="49" height="48" viewBox="0 0 49 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure abstract-figure" width="703" height="174" viewBox="0 0 703 174" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M25.5 246C-96 87.7673 245.949 67.3215 475.548 64.1799C705.146 61.0384 565.01 -188.501 629.653 -188.741C694.297 -188.982 766.062 221.014 766.062 221.014L297.072 460.733C297.072 460.733 147 404.233 25.5 246Z" fill="white" fill-opacity="0.2"/>
</svg></div><h1>Kill Bill development</h1></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>This guide explains how you can setup the Kill Bill development environment.</p></div></div></div>
<div class="sect1"><h2 id="_setting_up_kill_bill_in_your_development_environment">Setting up Kill Bill in your development environment</h2><div class="sectionbody"><div class="paragraph"><p>In order to set up Kill Bill in your development environment, there are a couple of things that you need to do like setting up the code in an IDE, configuring the database and building and running the application. This section covers all these steps. By the end of this section, you should have the code set up and the Kill Bill server running in your development environment.</p></div>
<div class="sect2"><h3 id="_setting_up_code_in_an_ide">Setting up code in an IDE</h3><div class="paragraph"><p>You first need to set up the Kill Bill code in an IDE. You can use any IDE of your choice. This section explains setting up the code in Eclipse IDE. You can download the latest version of the Eclipse IDE from <a href="https://www.eclipse.org/downloads/">here</a>.</p></div>
<div class="sect3"><h4 id="_cloning_the_repository">Cloning the Repository</h4><div class="paragraph"><p>The first step is to clone the Kill Bill repository. For this, you need to follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Start Eclipse.</p></li><li><p>Go to <strong>Git Repository view</strong> (Click on <code>Window &gt; Show View &gt; Other &gt; Git Repositories</code>).</p></li><li><p>Click on <strong>Clone a Git Repository and add the clone to this view</strong>.</p></li><li><p>In the Git Repository details, enter the Kill Bill Git URL <a class="bare" href="https://github.com/killbill/killbill">https://github.com/killbill/killbill</a> in the <strong>URI</strong> field.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>If you have Git credentials, you can select <strong>https</strong> in the <strong>Protocol</strong> dropdown and enter your Git credentials in the <strong>User/Password</strong> fields.</p></li><li><p>If you do not have Git credentials , you can Select <strong>Git</strong> in the <strong>Protocol</strong> Dropdown. This disables the credentials fields.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div></li><li><p>In the branch selection view, select the branch named <strong>master</strong> (By default, all the branches appear selected, you need to uncheck all branches except for <strong>master</strong>). Click <strong>Next</strong>.</p></li><li><p>Select the path on your computer where you would like to clone the code. This path will be referred to as <strong>PROJECT_ROOT</strong> from now on). For example, if you choose <code>C:/MyProjects/KillBill</code>, <strong>PROJECT_ROOT</strong> refers to this path. Click <strong>Finish</strong> (This starts the cloning process and may take a while depending on your internet speed).</p></li></ol></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><strong>Note:</strong> Cloning the repository as specified above gives a read-only access to the repository. If you&#8217;d like to make changes to the repository, you need to <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo"><em>fork</em></a> the repository and create a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork"><em>pull request</em></a>.</td></tr></table></div></div>
<div class="sect3"><h4 id="_creating_an_eclipse_project">Creating an Eclipse Project</h4><div class="paragraph"><p>Once the repository is cloned, you need to create an Eclipse project. For this, you need to follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Click on <strong>File &gt; Import &gt; Maven &gt; Existing Maven Project</strong>. Click <strong>Next</strong>.</p></li><li><p>Click <strong>Browse</strong>. Select the <strong>PROJECT_ROOT</strong> root directory and click  <strong>Finish</strong>.</p></li><li><p>Some of the Maven plugins used may not be available to m2e, so you may see errors as follows:</p></li></ol></div>
<div style="text-align: center;" class="imageblock"><div class="content"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/m2e_plugin_errors.png" alt="m2e plugin errors"></div></div>
<div class="olist arabic"><ol class="arabic"><li><p>Click <strong>Cancel</strong>.</p></li><li><p>Create a file <code>lifecycle-mapping-metadata.xml</code> as follows:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="xml"><span></span> <span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
 <span class="tok-nt">&lt;lifecycleMappingMetadata&gt;</span>
   <span class="tok-nt">&lt;pluginExecutions&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>1.4<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>run<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
            <span class="tok-nt">&lt;execute&gt;</span>
               <span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
               <span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
            <span class="tok-nt">&lt;/execute&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>templating-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>1.0-alpha-3<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>filter-sources<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
            <span class="tok-nt">&lt;execute&gt;</span>
               <span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
               <span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
            <span class="tok-nt">&lt;/execute&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>[1.0,)<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>add-test-source<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>add-resource<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>add-test-resource<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>maven-version<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>add-source<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>parse-version<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
            <span class="tok-nt">&lt;execute&gt;</span>
               <span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
               <span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
            <span class="tok-nt">&lt;/execute&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>com.hubspot.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>dependency-scope-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>0.10<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>check<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
           <span class="tok-nt">&lt;ignore</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>3.1.2<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>analyze-duplicate<span class="tok-nt">&lt;/goal&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>analyze-only<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
            <span class="tok-nt">&lt;ignore</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
      <span class="tok-nt">&lt;pluginExecution&gt;</span>
         <span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>org.basepom.maven<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;versionRange&gt;</span>1.5.0<span class="tok-nt">&lt;/versionRange&gt;</span>
            <span class="tok-nt">&lt;goals&gt;</span>
               <span class="tok-nt">&lt;goal&gt;</span>check<span class="tok-nt">&lt;/goal&gt;</span>
            <span class="tok-nt">&lt;/goals&gt;</span>
         <span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
         <span class="tok-nt">&lt;action&gt;</span>
            <span class="tok-nt">&lt;ignore</span> <span class="tok-nt">/&gt;</span>
         <span class="tok-nt">&lt;/action&gt;</span>
      <span class="tok-nt">&lt;/pluginExecution&gt;</span>
   <span class="tok-nt">&lt;/pluginExecutions&gt;</span>
<span class="tok-nt">&lt;/lifecycleMappingMetadata&gt;</span></code></pre></div></div></li><li><p>Go to <strong>Window &gt; Preferences &gt; Maven &gt; Lifecycle Mappings</strong>. Click <strong>Browse</strong> and select the path of the <code>lifecycle-mapping-metadata.xml</code> file. Click <strong>Apply and Close</strong>.</p></li><li><p>Build the project again (In Project Explorer, right-click on <strong>killbill &gt; Maven &gt; Update Project</strong>, then select <strong>OK</strong>).</p></li><li><p>This will get rid of all the build errors. Your Eclipse workspace should look like this:</p></li></ol></div>
<div style="text-align: center;" class="imageblock"><div class="content"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/eclipse_workspace.png" alt="eclipse workspace"></div></div></div></div>
<div class="sect2"><h3 id="_configuring_the_database">Configuring the Database</h3><div class="paragraph"><p>Before you can execute the code, you need to configure the Kill Bill database manually. By default Kill Bill expects <strong>MySQL</strong>, but you can also use <strong>PostgreSQL</strong>.</p></div>
<div class="sect3"><h4 id="_mysql_configuration">MySQL Configuration</h4><div class="paragraph"><p>In order to configure MySQL, you need to follow the steps given below (These steps can be executed either via the <strong>MySQL Command line tool</strong> or via <strong>MySQLWorkBench</strong>):</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Create a user corresponding to Kill Bill. You can run the following command:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span> <span class="tok-k">create</span> <span class="tok-k">user</span> <span class="tok-n">killbilluser</span> <span class="tok-n">identified</span> <span class="tok-k">by</span> <span class="tok-s1">&#39;password&#39;</span><span class="tok-p">;</span></code></pre></div></div></li><li><p>Create a database corresponding to Kill Bill. You can run the following command:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span>    <span class="tok-k">create</span> <span class="tok-k">database</span> <span class="tok-n">killbill</span><span class="tok-p">;</span></code></pre></div></div></li><li><p>Select the Kill Bill database created above using the following command:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span> <span class="tok-n">use</span> <span class="tok-n">killbill</span><span class="tok-p">;</span></code></pre></div></div></li><li><p>Run the Kill Bill DDL <a href="https://docs.killbill.io/latest/ddl.sql">here</a>.</p></li><li><p>Grant  privileges to the user created above on the Kill bill database using the following command:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span> <span class="tok-k">GRANT</span> <span class="tok-k">ALL</span> <span class="tok-k">ON</span> <span class="tok-n">killbill</span><span class="tok-p">.</span><span class="tok-o">*</span> <span class="tok-k">TO</span> <span class="tok-s1">&#39;killbilluser&#39;</span> <span class="tok-p">;</span></code></pre></div></div></li><li><p>If you are using PostgreSQL, you can refer to the detailed instructions for PostgreSQL setup in our PostgreSQL Configuration document <a href="https://docs.killbill.io/latest/PostgreSQL.html#_postgresql_kill_bill_configuration">here</a>.</p></li></ol></div>
<div class="paragraph"><p>Once the database configuration is done, you should have a database called <strong>killbill</strong>  with the following tables:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">account_email_history</span>
 <span class="tok-n">account_emails</span>
 <span class="tok-n">account_history</span>
 <span class="tok-n">accounts</span>
 <span class="tok-n">audit_log</span>
 <span class="tok-n">blocking_state_history</span>
 <span class="tok-n">blocking_states</span>
 <span class="tok-n">bundle_history</span>
 <span class="tok-n">bundles</span>
 <span class="tok-n">bus_events</span>
 <span class="tok-n">bus_events_history</span>
 <span class="tok-n">bus_ext_events</span>
 <span class="tok-n">bus_ext_events_history</span>
 <span class="tok-n">catalog_override_block_definition</span>
 <span class="tok-n">catalog_override_phase_definition</span>
 <span class="tok-n">catalog_override_phase_usage</span>
 <span class="tok-n">catalog_override_plan_definition</span>
 <span class="tok-n">catalog_override_plan_phase</span>
 <span class="tok-n">catalog_override_tier_block</span>
 <span class="tok-n">catalog_override_tier_definition</span>
 <span class="tok-n">catalog_override_usage_definition</span>
 <span class="tok-n">catalog_override_usage_tier</span>
 <span class="tok-n">custom_field_history</span>
 <span class="tok-n">custom_fields</span>
 <span class="tok-n">invoice_billing_events</span>
 <span class="tok-n">invoice_history</span>
 <span class="tok-n">invoice_item_history</span>
 <span class="tok-n">invoice_items</span>
 <span class="tok-n">invoice_parent_children</span>
 <span class="tok-n">invoice_payment_control_plugin_auto_pay_off</span>
 <span class="tok-n">invoice_payment_history</span>
 <span class="tok-n">invoice_payments</span>
 <span class="tok-n">invoice_tracking_id_history</span>
 <span class="tok-n">invoice_tracking_ids</span>
 <span class="tok-n">invoices</span>
 <span class="tok-n">node_infos</span>
 <span class="tok-n">notifications</span>
 <span class="tok-n">notifications_history</span>
 <span class="tok-n">payment_attempt_history</span>
 <span class="tok-n">payment_attempts</span>
 <span class="tok-n">payment_history</span>
 <span class="tok-n">payment_method_history</span>
 <span class="tok-n">payment_methods</span>
 <span class="tok-n">payment_transaction_history</span>
 <span class="tok-n">payment_transactions</span>
 <span class="tok-n">payments</span>
 <span class="tok-n">roles_permissions</span>
 <span class="tok-n">rolled_up_usage</span>
 <span class="tok-n">service_broadcasts</span>
 <span class="tok-n">sessions</span>
 <span class="tok-n">subscription_event_history</span>
 <span class="tok-n">subscription_events</span>
 <span class="tok-n">subscription_history</span>
 <span class="tok-n">subscriptions</span>
 <span class="tok-n">tag_definition_history</span>
 <span class="tok-n">tag_definitions</span>
 <span class="tok-n">tag_history</span>
 <span class="tok-n">tags</span>
 <span class="tok-n">tenant_broadcasts</span>
 <span class="tok-n">tenant_kvs</span>
 <span class="tok-n">tenants</span>
 <span class="tok-n">user_roles</span>
 <span class="tok-n">users</span></code></pre></div></div></div></div>
<div class="sect2"><h3 id="build">Build</h3><div class="paragraph"><p>Once you set up the code and database, the next step is to build the application. Kill Bill is a standard Maven project. In order to build Kill Bill, you need to follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Ensure that you have <strong>Maven 3.5.2 or higher</strong> (It can be downloaded from <a href="http://maven.apache.org/download.cgi">here</a>).</p></li><li><p>Maven requires JDK. Ensure that you have <strong>JDK 11 or higher</strong>. (You can download it from
<a href="https://www.oracle.com/in/java/technologies/javase/jdk11-archive-downloads.html">here</a>.)</p></li><li><p>Ensure that the <strong>JAVA_HOME</strong> environment variable is set to the path of your JDK installation (For example, if JDK is installed at <code>C:\Software\jdk11</code>, you need to set <strong>JAVA_HOME</strong> to <code>C:\Software\jdk11</code>).</p></li><li><p>Navigate to <strong>PROJECT_ROOT</strong>.</p></li><li><p>Run the following command (The first time you run this, the build will take a considerable amount of time as Maven will download all the dependencies from the internet and cache them in the local repository (<code>~/.m2/repository</code>). Subsequent builds will be faster):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>  mvn clean install -DskipTests</code></pre></div></div></li><li><p>Verify that the following is displayed which confirms that the build is successful:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span> <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill ........................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">17</span>.938 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-api ....................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">23</span>.352 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-util ...................................... SUCCESS <span class="tok-o">[</span><span class="tok-m">01</span>:37 min<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-tenant .................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">23</span>.817 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-account ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">21</span>.540 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-catalog ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">44</span>.055 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-currency .................................. SUCCESS <span class="tok-o">[</span> <span class="tok-m">12</span>.204 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-subscription .............................. SUCCESS <span class="tok-o">[</span> <span class="tok-m">29</span>.722 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-entitlement ............................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">26</span>.420 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-junction .................................. SUCCESS <span class="tok-o">[</span> <span class="tok-m">17</span>.059 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-invoice ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">36</span>.480 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-overdue ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">23</span>.769 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-payment ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">36</span>.311 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-beatrix ................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">29</span>.213 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-jaxrs ..................................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">36</span>.799 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles .................................. SUCCESS <span class="tok-o">[</span>  <span class="tok-m">0</span>.357 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles-killbill ......................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">39</span>.344 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles-killpay .......................... SUCCESS <span class="tok-o">[</span> <span class="tok-m">25</span>.608 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> ------------------------------------------------------------------------
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> BUILD SUCCESS
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> ------------------------------------------------------------------------</code></pre></div></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><strong>Note:</strong> The build process creates the Kill Bill war file in the <code>/killbill/profiles/killbill/target</code> directory.</td></tr></table></div></li></ol></div></div>
<div class="sect2"><h3 id="running_the_application">Running the Application (Local Jetty Server)</h3><div class="paragraph"><p>Once the build is successful, you can run the application in a local Jetty server. This helps to verify that everything is set up correctly. In order to run the application on Jetty, you need to follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Modify the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. Update the following properties as per your database:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-na"> org.killbill.dao.url</span><span class="tok-o">=</span><span class="tok-s">jdbc:mysql://127.0.0.1:3306/killbill</span>
 <span class="tok-c"># For PostgreSQL, use jdbc:postgresql://127.0.0.1:5432/killbill?currentSchema=killbillschema</span>
<span class="tok-na"> org.killbill.dao.user</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-na"> org.killbill.dao.password</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-na"> org.killbill.dao.logLevel</span><span class="tok-o">=</span><span class="tok-s">DEBUG</span>
<span class="tok-na"> org.killbill.billing.osgi.dao.url</span><span class="tok-o">=</span><span class="tok-s">jdbc:mysql://127.0.0.1:3306/killbill</span>
 <span class="tok-c"># For PostgreSQL, use jdbc:postgresql://127.0.0.1:5432/killbill?currentSchema=killbillschema</span>
<span class="tok-na"> org.killbill.billing.osgi.dao.user</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-na"> org.killbill.billing.osgi.dao.password</span><span class="tok-o">=</span><span class="tok-s">root</span></code></pre></div></div></li><li><p>Naviagate to the <strong>PROJECT_ROOT</strong> directory.</p></li><li><p>Start Kill Bill by running the following command (Replace <strong>PROJECT_ROOT</strong> with your actual project root):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span> mvn -Dorg.killbill.server.properties<span class="tok-o">=</span>file:///PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties -Dlogback.configurationFile<span class="tok-o">=</span>./profiles/killbill/src/main/resources/logback.xml jetty:run</code></pre></div></div></li><li><p>This should display the following:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span> <span class="tok-o">[</span>INFO<span class="tok-o">]</span> Started ServerConnector@7de2f9a6<span class="tok-o">{</span>HTTP/1.1, <span class="tok-o">(</span>http/1.1<span class="tok-o">)}{</span><span class="tok-m">0</span>.0.0.0:8080<span class="tok-o">}</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> Started @95008ms
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> Started Jetty Server</code></pre></div></div></li><li><p>Open a browser window and type http://localhost:8080. This should display the following page:</p><div style="text-align: center;" class="imageblock"><div class="content"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/killbill-homepage.png" alt="killbill homepage"></div></div></li></ol></div></div>
<div class="sect2"><h3 id="_running_the_application_in_tomcat">Running the Application in Tomcat</h3><div class="paragraph"><p>In order to run the application on Tomcat copy the <code>/killbill/profiles/killbill/target/killbill-profiles-killbill-x.y.z-SNAPSHOT</code> war file (generated after the <a href="#build">build</a> process) into your Tomcat directory and follow <a href="https://docs.killbill.io/latest/getting_started.html#_kill_bill_configuration">these</a> instructions.</p></div></div>
<div class="sect2"><h3 id="customizing_log_file_path">Customizing Log File Path</h3><div class="paragraph"><p>The steps above configure the application so that the Kill Bill logs are displayed on the console. You can however customize this to save the logs in a separate log file. In order to set this up, you need to follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Modify the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/logback.xml</code>. Add the following after the license section:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="xml"><span></span> <span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
  <span class="tok-nt">&lt;configuration&gt;</span>
   <span class="tok-nt">&lt;jmxConfigurator</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;property</span> <span class="tok-na">name=</span><span class="tok-s">&quot;LOGS_DIR&quot;</span> <span class="tok-na">value=</span><span class="tok-s">&quot;&lt;log_file_path&gt;&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;conversionRule</span> <span class="tok-na">conversionWord=</span><span class="tok-s">&quot;maskedMsg&quot;</span> <span class="tok-na">converterClass=</span><span class="tok-s">&quot;org.killbill.billing.server.log.obfuscators.ObfuscatorConverter&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;appender</span> <span class="tok-na">name=</span><span class="tok-s">&quot;MAIN&quot;</span> <span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;file&gt;</span>${LOGS_DIR:-./logs}/killbill.out<span class="tok-nt">&lt;/file&gt;</span>
      <span class="tok-nt">&lt;rollingPolicy</span> <span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="tok-nt">&gt;</span>
         <span class="tok-c">&lt;!-- rollover daily --&gt;</span>
         <span class="tok-nt">&lt;fileNamePattern&gt;</span>${LOGS_DIR:-./logs}/killbill-%d{yyyy-MM-dd}.%i.out.gz<span class="tok-nt">&lt;/fileNamePattern&gt;</span>
         <span class="tok-nt">&lt;maxHistory&gt;</span>3<span class="tok-nt">&lt;/maxHistory&gt;</span>
         <span class="tok-nt">&lt;cleanHistoryOnStart&gt;</span>true<span class="tok-nt">&lt;/cleanHistoryOnStart&gt;</span>
         <span class="tok-nt">&lt;timeBasedFileNamingAndTriggeringPolicy</span> <span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span><span class="tok-nt">&gt;</span>
            <span class="tok-c">&lt;!-- or whenever the file size reaches 100MB --&gt;</span>
            <span class="tok-nt">&lt;maxFileSize&gt;</span>100MB<span class="tok-nt">&lt;/maxFileSize&gt;</span>
         <span class="tok-nt">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
      <span class="tok-nt">&lt;/rollingPolicy&gt;</span>
      <span class="tok-nt">&lt;encoder&gt;</span>
         <span class="tok-nt">&lt;pattern&gt;</span>%date{&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss,SSSZ&quot;, UTC} lvl=&#39;%level&#39;, log=&#39;%logger{0}&#39;, th=&#39;%thread&#39;, xff=&#39;%X{req.xForwardedFor}&#39;, rId=&#39;%X{req.requestId}&#39;, tok=&#39;%X{kb.userToken}&#39;, aRId=&#39;%X{kb.accountRecordId}&#39;, tRId=&#39;%X{kb.tenantRecordId}&#39;, %maskedMsg%n<span class="tok-nt">&lt;/pattern&gt;</span>
      <span class="tok-nt">&lt;/encoder&gt;</span>
   <span class="tok-nt">&lt;/appender&gt;</span>
   <span class="tok-nt">&lt;appender</span> <span class="tok-na">name=</span><span class="tok-s">&quot;STDOUT&quot;</span> <span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;encoder&gt;</span>
         <span class="tok-c">&lt;!-- See http://jira.qos.ch/browse/LOGBACK-262 --&gt;</span>
         <span class="tok-nt">&lt;pattern&gt;</span>%date{&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss,SSSZ&quot;, UTC} lvl=&#39;%level&#39;, log=&#39;%logger{0}&#39;, th=&#39;%thread&#39;, xff=&#39;%X{req.xForwardedFor}&#39;, rId=&#39;%X{req.requestId}&#39;, tok=&#39;%X{kb.userToken}&#39;, aRId=&#39;%X{kb.accountRecordId}&#39;, tRId=&#39;%X{kb.tenantRecordId}&#39;, %maskedMsg%n<span class="tok-nt">&lt;/pattern&gt;</span>
      <span class="tok-nt">&lt;/encoder&gt;</span>
   <span class="tok-nt">&lt;/appender&gt;</span>
   <span class="tok-nt">&lt;logger</span> <span class="tok-na">name=</span><span class="tok-s">&quot;jdbc&quot;</span> <span class="tok-na">level=</span><span class="tok-s">&quot;OFF&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;root</span> <span class="tok-na">level=</span><span class="tok-s">&quot;INFO&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;appender-ref</span> <span class="tok-na">ref=</span><span class="tok-s">&quot;MAIN&quot;</span> <span class="tok-nt">/&gt;</span>
   <span class="tok-nt">&lt;/root&gt;</span>
<span class="tok-nt">&lt;/configuration&gt;</span></code></pre></div></div></li><li><p>Replace <code>&lt;log_file_path&gt;</code> above with the path where you want the logs to be created. For example, if you’d like the logs to be in a directory called <code>c:/logs</code>, you need to replace <code>&lt;log_file_path&gt;</code> with <code>c:/logs</code>.</p></li><li><p>Restart the application by running the Maven command specified above. Now, the logs will be created at the path specified in the <code>logback.xml</code> file as follows:</p><div class="literalblock"><div class="content"><pre>&lt;log_file_path&gt;/killbill.out</pre></div></div></li></ol></div></div>
<div class="sect2"><h3 id="_setting_up_a_breakpoint_and_remote_debugging">Setting up a Breakpoint and Remote Debugging</h3><div class="paragraph"><p>Sometimes, you may face some issues in running the application. In such cases, it is useful to set up a breakpoint and debug the application. Here is how you can do this:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Create a new environment variable <strong>MAVEN_OPTS</strong> and set it to <code>-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n</code></p></li><li><p>Do the following in Eclipse:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Press <strong>Ctrl + Shift + T</strong> and locate the file that you would like to debug. For example, if the application fails to start, you would need to debug the <code>DefaultKillbillConfigSource</code>.</p></li><li><p>If this does not show the source code do the following:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Click <strong>Attach Source</strong>.</p></li><li><p>Click on <strong>External Location</strong> and Navigate to your Maven local repository (<code>~/.m2/repository</code>). Select the jar file corresponding to the file that you want to debug. For the  <code>DefaultKillbillConfigSource</code> you need to select
<code>/org/kill-bill/billing/killbill-platform-base/0.40.4/killbill-platform-base-0.40.4-sources.jar</code> (At the time of writing, <code>0.40.4</code> is the latest version of this jar, however this can change so the exact version might be different for you)</p></li></ol></div></li><li><p>Set up a breakpoint as required. For example, if it is an issue in starting the application, you would need to set up a breakpoint in  <code>DefaultKillbillConfigSource.java#L118</code>.</p></li><li><p>Click <strong>Run &gt; Debug Configurations</strong>.</p></li><li><p>Double-click  <strong>New Remote Java Application</strong>.</p></li><li><p>Enter the name that you would like to give to this debug configuration in the <strong>Name</strong> field.</p></li><li><p>Click <strong>Apply</strong>.</p></li><li><p>Click <strong>Close</strong>.</p></li></ol></div></li><li><p>Start the application as explained in the <a href="#running_the_application">"Running the Application"</a> section above.</p></li><li><p>Click <code>Run &gt; Debug Configurations</code> and double click the  the Debug configuration that you created above.</p></li><li><p>This runs the application in debug mode. You can also set additional breakpoints as required.</p></li></ol></div></div>
<div class="sect2"><h3 id="_further_debugging">Further Debugging</h3><div class="paragraph"><p>The <a href="https://docs.killbill.io/latest/debugging.html">Debugging Tips</a> document includes some additional debugging tips for Kill Bill in general. You may also reach out to the Kill Bill <a href="https://groups.google.com/forum/#!forum/killbilling-users">mailing list</a>, with the <code>kpm diagnostic</code> output as explained in the <a href="https://docs.killbill.io/latest/debugging.html#_seeking_help">Seeking Help</a> section.</p></div></div>
<div class="sect2"><h3 id="_some_common_errors_and_their_solutions">Some common errors and their solutions</h3><div class="sect3"><h4 id="_build_failure">Build Failure</h4><div class="paragraph"><p>Sometimes, after building the application, the build may fail with the following errors:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span> <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-payment ................................... SUCCESS <span class="tok-o">[</span><span class="tok-m">01</span>:42 min<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-beatrix ................................... SUCCESS <span class="tok-o">[</span><span class="tok-m">02</span>:04 min<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-jaxrs ..................................... SUCCESS <span class="tok-o">[</span><span class="tok-m">01</span>:45 min<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles .................................. SUCCESS <span class="tok-o">[</span>  <span class="tok-m">9</span>.896 s<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles-killbill ......................... FAILURE <span class="tok-o">[</span><span class="tok-m">02</span>:48 min<span class="tok-o">]</span>
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> killbill-profiles-killpay .......................... SKIPPED
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> ------------------------------------------------------------------------
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> BUILD FAILURE
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> ------------------------------------------------------------------------
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> Total time:  <span class="tok-m">26</span>:55 min
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> Finished at: <span class="tok-m">2020</span>-11-23T10:46:24+05:30
 <span class="tok-o">[</span>INFO<span class="tok-o">]</span> ------------------------------------------------------------------------
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> Failed to execute goal org.apache.rat:apache-rat-plugin:0.13:check <span class="tok-o">(</span>default<span class="tok-o">)</span> on project killbill-profiles-killbill: Too many files with unapproved license: <span class="tok-m">1</span> See RAT report in: &lt;PROJECT_ROOT&gt;<span class="tok-se">\p</span>rofiles<span class="tok-se">\k</span>illbill<span class="tok-se">\t</span>arget<span class="tok-se">\r</span>at.txt -&gt; <span class="tok-o">[</span>Help <span class="tok-m">1</span><span class="tok-o">]</span>
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> To see the full stack trace of the errors, re-run Maven with the -e switch.
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> Re-run Maven using the -X switch to <span class="tok-nb">enable</span> full debug logging.
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> For more information about the errors and possible solutions, please <span class="tok-nb">read</span> the following articles:
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> <span class="tok-o">[</span>Help <span class="tok-m">1</span><span class="tok-o">]</span> http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span> After correcting the problems, you can resume the build with the <span class="tok-nb">command</span>
 <span class="tok-o">[</span>ERROR<span class="tok-o">]</span>   mvn &lt;args&gt; -rf :killbill-profiles-killbill</code></pre></div></div>
<div class="paragraph"><p>This error is probably because some file is missing license information. You can build the application using the following command:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>mvn clean install -DskipTests -Dcheck.skip-rat<span class="tok-o">=</span><span class="tok-nb">true</span></code></pre></div></div></div>
<div class="sect3"><h4 id="_jetty_does_not_start">Jetty Does Not Start</h4><div class="paragraph"><p>Sometimes, when you run the application, Jetty may fail to start with the following error:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>Failed startup of context o.e.j.m.p.JettyWebAppContext@1fafd0af</code></pre></div></div>
<div class="paragraph"><p>In such a case, build the application again using the instructions in the <a href="#build">"Build"</a> section above and run the application again.</p></div></div>
<div class="sect3"><h4 id="_application_points_to_the_default_database">Application Points to the Default Database</h4><div class="paragraph"><p>Sometimes, when the application is started, it may not use the database configured in the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. Instead, it may use the default H2 database and cause the following errors:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>java.io.IOException: org.h2.jdbc.JdbcSQLNonTransientConnectionException: A file path that is implicitly relative to the current working directory is not allowed in the database URL <span class="tok-s2">&quot;jdbc:h2:file:/var/tmp/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&quot;</span>. Use an absolute path, ~/name, ./name, or the baseDir setting instead. <span class="tok-o">[</span><span class="tok-m">90011</span>-200<span class="tok-o">]</span>
        at org.killbill.commons.embeddeddb.h2.H2EmbeddedDB.refreshTableNames<span class="tok-o">(</span>H2EmbeddedDB.java:114<span class="tok-o">)</span>
        at org.killbill.commons.embeddeddb.h2.H2EmbeddedDB.start<span class="tok-o">(</span>H2EmbeddedDB.java:97<span class="tok-o">)</span>
        at org.killbill.billing.server.modules.EmbeddedDBProvider.initializeEmbeddedDB<span class="tok-o">(</span>EmbeddedDBProvider.java:73<span class="tok-o">)</span>
        at org.killbill.billing.server.modules.EmbeddedDBProvider.get<span class="tok-o">(</span>EmbeddedDBProvider.java:60<span class="tok-o">)</span>
        at org.killbill.billing.server.modules.KillbillServerModule.configureEmbeddedDBs<span class="tok-o">(</span>KillbillServerModule.java:141<span class="tok-o">)</span>
        at org.killbill.billing.server.modules.KillbillPlatformModule.configure<span class="tok-o">(</span>KillbillPlatformModule.java:84<span class="tok-o">)</span>
        at org.killbill.billing.server.modules.KillbillServerModule.configure<span class="tok-o">(</span>KillbillServerModule.java:113<span class="tok-o">)</span>
        at com.google.inject.AbstractModule.configure<span class="tok-o">(</span>AbstractModule.java:61<span class="tok-o">)</span>
        at com.google.inject.spi.Elements<span class="tok-nv">$RecordingBinder</span>.install<span class="tok-o">(</span>Elements.java:347<span class="tok-o">)</span>
        at com.google.inject.spi.Elements.getElements<span class="tok-o">(</span>Elements.java:104<span class="tok-o">)</span>
        at com.google.inject.internal.InjectorShell<span class="tok-nv">$Builder</span>.build<span class="tok-o">(</span>InjectorShell.java:137<span class="tok-o">)</span>
        at com.google.inject.internal.InternalInjectorCreator.build<span class="tok-o">(</span>InternalInjectorCreator.java:105<span class="tok-o">)</span>
        at com.google.inject.Guice.createInjector<span class="tok-o">(</span>Guice.java:87<span class="tok-o">)</span></code></pre></div></div>
<div class="paragraph"><p>This error could be due to one of the following issues:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>The path of the  <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> is not specified correctly while starting the application.  Ensure that the correct path is specified</p></li><li><p>While starting the application, the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> is specified as <code>file://PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. The file protocol requires three slashes, so ensure that it is specified as <code>file:///</code></p></li><li><p>The database URL is not specified properly, ensure that the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> has the correct database properties as specified in the <a href="#running_the_application">"Running the Application"</a> section above</p></li></ol></div></div>
<div class="sect3"><h4 id="_logs_not_created">Logs Not Created</h4><div class="paragraph"><p>Sometimes, even after configuring your <code>logback.xml</code> file as specified in the <a href="#customizing_log_file_path">"Customizing Log File Path"</a> section, logs might not be created. This is most probably because your <code>logback.xml</code> is not a valid XML file. Some reasons for an XML file to be invalid are leading spaces, unclosed XML tags. In general, if you are able to open the XML file in a web browser without any errors, your XML file is valid.</p></div></div>
<div class="sect3"><h4 id="_sqlexception_on_startup">SQLException on Startup</h4><div class="paragraph"><p>Sometimes, even after configuring everything as explained above, the following exception might occur when Kill Bill is started:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>Caused by: java.sql.SQLTransientConnectionException: Could not connect to <span class="tok-nv">address</span><span class="tok-o">=(</span><span class="tok-nv">host</span><span class="tok-o">=</span><span class="tok-m">127</span>.0.0.1<span class="tok-o">)(</span><span class="tok-nv">port</span><span class="tok-o">=</span><span class="tok-m">3306</span><span class="tok-o">)(</span><span class="tok-nv">type</span><span class="tok-o">=</span>master<span class="tok-o">)</span> : RSA public key is not available client side <span class="tok-o">(</span>option serverRsaPublicKeyFile not <span class="tok-nb">set</span><span class="tok-o">)</span>
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.createException<span class="tok-o">(</span>ExceptionFactory.java:79<span class="tok-o">)</span>
	at org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.create<span class="tok-o">(</span>ExceptionFactory.java:153<span class="tok-o">)</span>
	at org.mariadb.jdbc.MariaDbDataSource.getConnection<span class="tok-o">(</span>MariaDbDataSource.java:305<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.PoolBase.newConnection<span class="tok-o">(</span>PoolBase.java:364<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry<span class="tok-o">(</span>PoolBase.java:206<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry<span class="tok-o">(</span>HikariPool.java:476<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.HikariPool.access<span class="tok-nv">$100</span><span class="tok-o">(</span>HikariPool.java:71<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.HikariPool<span class="tok-nv">$PoolEntryCreator</span>.call<span class="tok-o">(</span>HikariPool.java:726<span class="tok-o">)</span>
	at com.zaxxer.hikari.pool.HikariPool<span class="tok-nv">$PoolEntryCreator</span>.call<span class="tok-o">(</span>HikariPool.java:712<span class="tok-o">)</span>
	at java.util.concurrent.FutureTask.run<span class="tok-o">(</span>FutureTask.java:266<span class="tok-o">)</span>
	at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="tok-o">(</span>ThreadPoolExecutor.java:1142<span class="tok-o">)</span>
	at java.util.concurrent.ThreadPoolExecutor<span class="tok-nv">$Worker</span>.run<span class="tok-o">(</span>ThreadPoolExecutor.java:617<span class="tok-o">)</span>
	at java.lang.Thread.run<span class="tok-o">(</span>Thread.java:745<span class="tok-o">)</span></code></pre></div></div>
<div class="paragraph"><p>Some later versions of MySQL require requesting a public key from the server. Thus, the database connection string needs to be specified as follows in the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> file:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>org.killbill.dao.url<span class="tok-o">=</span>jdbc:mysql://127.0.0.1:3306/killbill?allowPublicKeyRetrieval<span class="tok-o">=</span>true<span class="tok-p">&amp;</span><span class="tok-nv">useSSL</span><span class="tok-o">=</span><span class="tok-nb">false</span>
org.killbill.billing.osgi.dao.url<span class="tok-o">=</span>jdbc:mysql://127.0.0.1:3306/killbill?allowPublicKeyRetrieval<span class="tok-o">=</span>true<span class="tok-p">&amp;</span><span class="tok-nv">useSSL</span><span class="tok-o">=</span><span class="tok-nb">false</span></code></pre></div></div></div>
<div class="sect3"><h4 id="_classnotfoundexception_on_startup">ClassNotFoundException on Startup</h4><div class="paragraph"><p>Sometimes, even after configuring everything as explained above, the following exception might occur when Kill Bill is started:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>Caused by: java.lang.ClassNotFoundException: jar file <span class="tok-s1">&#39;killbill-api-0.53.17.jar&#39;</span> could not be instantiate from file path. Error: C:<span class="tok-se">\U</span>sers<span class="tok-se">\&lt;</span>username&gt;<span class="tok-se">\.</span>m2<span class="tok-se">\r</span>epository<span class="tok-se">\o</span>rg<span class="tok-se">\k</span>ill-bill<span class="tok-se">\b</span>illing<span class="tok-se">\k</span>illbill-api<span class="tok-se">\0</span>.53.17<span class="tok-se">\k</span>illbill-api-0.53.17.jar <span class="tok-o">(</span>The system cannot find the path specified<span class="tok-o">)</span>
    at org.killbill.billing.lifecycle.ServiceFinder.findClasses <span class="tok-o">(</span>ServiceFinder.java:130<span class="tok-o">)</span>
    at org.killbill.billing.lifecycle.ServiceFinder.initialize <span class="tok-o">(</span>ServiceFinder.java:64<span class="tok-o">)</span>
    at org.killbill.billing.lifecycle.ServiceFinder.&lt;init&gt; <span class="tok-o">(</span>ServiceFinder.java:48<span class="tok-o">)</span>
    at org.killbill.billing.util.glue.IDBISetup.mapperFactoriesToRegister <span class="tok-o">(</span>IDBISetup.java:65<span class="tok-o">)</span>
    at org.killbill.billing.server.modules.KillbillServerModule.configureDao <span class="tok-o">(</span>KillbillServerModule.java:127<span class="tok-o">)</span>
    at org.killbill.billing.server.modules.KillbillPlatformModule.configure <span class="tok-o">(</span>KillbillPlatformModule.java:86<span class="tok-o">)</span>
    at org.killbill.billing.server.modules.KillbillServerModule.configure <span class="tok-o">(</span>KillbillServerModule.java:99<span class="tok-o">)</span>
    at com.google.inject.AbstractModule.configure <span class="tok-o">(</span>AbstractModule.java:61<span class="tok-o">)</span>
    at com.google.inject.spi.Elements<span class="tok-nv">$RecordingBinder</span>.install <span class="tok-o">(</span>Elements.java:347<span class="tok-o">)</span>
    at com.google.inject.spi.Elements.getElements <span class="tok-o">(</span>Elements.java:104<span class="tok-o">)</span>
    at com.google.inject.internal.InjectorShell<span class="tok-nv">$Builder</span>.build <span class="tok-o">(</span>InjectorShell.java:137<span class="tok-o">)</span></code></pre></div></div>
<div class="paragraph"><p>This error typically occurs on Windows machines and is most probably due to a space being present in the Maven repository path. By default, on Windows, Maven uses the <code>C:\Users\&lt;username&gt;\.m2\</code> path for the local repository. If there is a space in the <code>&lt;username&gt;</code>, this error can occur. In order to get rid of this error you can change the path of the Maven local repository using the following steps:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Open <code>&lt;MAVEN_HOME&gt;/conf/settings.xml</code>.</p></li><li><p>Update <code>&lt;localRepository&gt;</code> to the desired path. For example, to create the Maven local repository at the <code>c:/mavenrepo</code> path, you need to specify <code>&lt;localRepository&gt;c:/mavenrepo&lt;/localRepository&gt;</code>.</p></li><li><p>Update the new Maven local repository path in Eclipse by navigating to <code>Window &gt; Preferences &gt; Maven &gt; User Settings</code>. In the <code>Global Settings</code> box, click <code>Browse</code> and select the <code>&lt;MAVEN_HOME&gt;/conf/settings.xml</code>.</p></li><li><p>Restart the application.</p></li></ol></div></div></div>
<div class="sect2"><h3 id="_dependencies">Dependencies</h3><div class="paragraph"><p>The base <code>pom.xml</code> (<code>org.kill-bill.billing:killbill-oss-parent</code>) defines all of the dependencies required by Kill Bill. If a <code>-SNAPSHOT</code> version is specified (e.g. <code>0.141.74-SNAPSHOT</code>), this means some dependencies haven&#8217;t been released yet and you need to build them locally, before being able to build Kill Bill.</p></div>
<div class="paragraph"><p>Typically, the following repositories need to be built in order:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p><a href="https://github.com/killbill/killbill-oss-parent">killbill-oss-parent</a></p></li><li><p><a href="https://github.com/killbill/killbill-commons">killbill-commons</a></p></li><li><p><a href="https://github.com/killbill/killbill-platform">killbill-platform</a></p></li></ol></div></div></div></div>
<div class="sect1"><h2 id="_navigating_the_kill_bill_codebase">Navigating the Kill Bill codebase</h2><div class="sectionbody"><div class="paragraph"><p>It can be quite daunting to start poking around the Kill Bill codebase, as the code is scattered over various repositories. Here is a primer on how to get started.</p></div>
<div class="sect2"><h3 id="_core_system">Core System</h3><div class="ulist"><ul><li><p><a class="bare" href="https://github.com/killbill/killbill-api">https://github.com/killbill/killbill-api</a>: Java APIs, used when embedding Kill Bill (advanced users), by the REST API layer (internally) as well as by plugins, which need to interact with the core system.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-plugin-api">https://github.com/killbill/killbill-plugin-api</a>: Java Plugin APIs, which need to be implemented by plugin developers.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-commons">https://github.com/killbill/killbill-commons</a>: similar in concept to Apache Commons, repository of re-useable components. You could use these in your projects even outside of the Kill Bill environment.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-platform">https://github.com/killbill/killbill-platform</a>: underlying Kill Bill platform, contains code unrelated to billing and payments, such as setting up the lifecycle, the OSGI environment, the webapp container bridge, logging, etc.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill">https://github.com/killbill/killbill</a>: the Kill Bill library, containing the core of the system. It is divided into submodules, each one of them being independent (own APIs, own set of tables, etc.) and interacting with other modules either via internal Java APIs or Bus events.</p></li></ul></div>
<div class="paragraph"><p>The following blog posts can help provide more context on the Kill Bill architecture:</p></div>
<div class="ulist"><ul><li><p><a class="bare" href="https://killbill.io/blog/kill-bill-billing-system-architecture/">https://killbill.io/blog/kill-bill-billing-system-architecture/</a></p></li><li><p><a class="bare" href="https://killbill.io/blog/kill-bill-plugins-architecture/">https://killbill.io/blog/kill-bill-plugins-architecture/</a></p></li><li><p><a class="bare" href="https://killbill.io/blog/persistent-bus-in-kill-bill/">https://killbill.io/blog/persistent-bus-in-kill-bill/</a></p></li></ul></div></div>
<div class="sect2"><h3 id="_ecosystem">Ecosystem</h3><div class="ulist"><ul><li><p><a class="bare" href="https://github.com/killbill/killbill-integration-tests">https://github.com/killbill/killbill-integration-tests</a>: while each repository contains its own test suites, from unit tests to functional tests (with and without a persistent layer), as well as end-to-end tests (see the <code>beatrix</code> and <code>profiles/killbill</code> tests in the main killbill repository for example), the killbill-integration-tests repository adds another set of tests which focus on long running scenarios against a running Kill Bill server. This also gives you a base framework to develop your own tests, to verify the integration of Kill Bill in your environment and to make sure it follows your business rules.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-client-java">https://github.com/killbill/killbill-client-java</a>, <a class="bare" href="https://github.com/killbill/killbill-client-ruby">https://github.com/killbill/killbill-client-ruby</a>, etc. provide clients for the HTTP API in various languages.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-stripe-plugin">https://github.com/killbill/killbill-stripe-plugin</a>, <a class="bare" href="https://github.com/killbill/killbill-avatax-plugin">https://github.com/killbill/killbill-avatax-plugin</a>, etc. provide integrations with third-party providers.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-analytics-plugin">https://github.com/killbill/killbill-analytics-plugin</a>, etc. provide additional functionality (e.g. notification plugins).</p></li></ul></div></div></div></div>
<div class="sect1"><h2 id="_date_time_and_timezone">Date, Time and Timezone</h2><div class="sectionbody"><div class="paragraph"><p>A few general concepts around time in Kill Bill:</p></div>
<div class="ulist"><ul><li><p>Kill Bill&#8217;s granularity is the day, and as a result the system will not invoice for portions of a day.</p></li><li><p>Each account in Kill Bill has a default timezone and that timezone is used throughout the system to be able to convert a DateTime into a Date into the account Timezone.</p></li><li><p>Kill Bill will internally use UTC for all its Datetime manipulation, but any Date information is interpreted as a Date in the account timezone.</p></li></ul></div>
<div class="sect2"><h3 id="_mysql_date_datetime_timestamp">Mysql Date, DateTime, Timestamp</h3><div class="paragraph"><p>We are only relying on date and datetime which are not sensitive to the MySQL timezone setting:</p></div>
<div class="ulist"><ul><li><p>Datetime: Storing a Datetime value into MySQL relies on <code>datetime</code> which is independent of the mysql time_zone. It is stored as a UTC value, and the selected value is always the same, regardless of the MySQL timezone.</p></li><li><p>LocalDate: Storing a LocalDate value into MySQL relies on <code>date</code> which is also independent of the MySQL time_zone.</p></li></ul></div></div>
<div class="sect2"><h3 id="_system_configuration">System Configuration</h3><div class="paragraph"><p>From an operation point of view, there are different places where timezone may be set:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Server on which Kill Bill runs</p></li><li><p>JVM setting</p></li><li><p>Database server</p></li></ol></div>
<div class="paragraph"><p><strong>It is required to have Kill Bill runs in UTC for correct serialization of DateTime/LocalDate.</strong> Actually, in Java, there is no UTC timezone setting but instead <code>GMT</code>. In a first approximation, we will consider those identical, even though they are not and could lead to some rare issues.</p></div>
<div class="paragraph"><p>When Kill Bill starts, it will override the default timezone if this one was specified as a system property with something different than GMT. The code will log a WARN message and proceed to do so, to avoid issues later down the road.</p></div></div>
<div class="sect2"><h3 id="_rest_apis">REST APIs</h3><div class="paragraph"><p>Kill Bill APIs that accept dates as an argument will allow for the following:</p></div>
<div class="ulist"><ul><li><p>A fully qualified Datetime (a point in time)</p></li><li><p>A Date</p></li></ul></div>
<div class="paragraph"><p>If there is a need to convert from a Datetime to a Date, the conversion will occur by specifying the account timezone, so the customer sees the resulting Date in their timezone. This would, for instance, be the case when triggering a future invoice by specifying a target Datetime.</p></div>
<div class="paragraph"><p>If there is a need to convert from a Date to Datetime, this is obviously more subtle as we can&#8217;t infer the additional precision to compute the time. The Date is always interpreted to be a Date as seen by the customer, that is in the account timezone.</p></div>
<div class="paragraph"><p>The system will use the reference time on the account in such a way that converting back from that fully qualified Datetime using the account timezone would give us back the original Date provided.</p></div></div>
<div class="sect2"><h3 id="_multiple_changes_in_a_day">Multiple changes in a day</h3><div class="paragraph"><p>So what happens if a user is making several subscription changes within the same day?</p></div>
<div class="paragraph"><p>In the default mode, Kill Bill will react to changes immediately and trigger a new invoice for each change, which in turn might result in a charge.</p></div>
<div class="paragraph"><p>Let&#8217;s consider the following case, where there exists 3 monthly plans (Bronze, Silver and Gold), ordered by ascending price:</p></div>
<div class="ulist"><ul><li><p>Initially, the customer is invoiced for the Bronze, from january 1st to feb 1st. By default a payment would also be made.</p></li><li><p>On January 1st again, the customer changes its mind and moves to Silver. A new invoice is generated that will credit the full month&#8201;&#8212;&#8201;including the day of january 1st&#8201;&#8212;&#8201;and the new plan is now invoiced from january 1st to february 1st and the credit generated is immediately used, so in the end the customer is really only invoiced for the difference of the price between the 2 plans; Additionally, a new payment is made for that amount.</p></li><li><p>If now the customer changes its plan on Jan 2nd, the portion from January 1st to January 2nd will be invoiced for the Silver plan and the portion from January 2nd to February 1st will be invoiced for the Gold plan.</p></li></ul></div>
<div class="paragraph"><p>From an entitlement point of view, the system will reflect the current plan and therefore two different calls to retrieve the plan information on January 1st may lead to different results since there was a change of plan during that day.</p></div></div></div></div></div></article></div><div class="bd-links-wrapper"><nav class="bd-links toc right-side-menu" id="toc" data-toggle="toc"></nav></div></div></div></main><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script><script src="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-C0HVJ1E78Z"></script><script>
    setTimeout(function(){
      $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').append('<a href=""><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>');
      $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').each(function(){
        let itemHref = '#' + $(this).attr('id');
        $(this).find('a').attr("href", itemHref);
      })
      $('.content-wrapper table').each(function() {
        $(this).wrap('<div class="table-wrap"></div>')
        $('.table-wrap').each(function() {
          if ($(this).find('table').width() > $(this).width()){
            $(this).css('max-width', '100%');
            $(this).css('overflow-x', 'scroll');
          }
        })
      })
      function copyToClipboard(text) {
        let sampleTextarea = document.createElement("textarea");
        document.body.appendChild(sampleTextarea);
        sampleTextarea.value = text;
        sampleTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(sampleTextarea);
      }
      $('.content-wrapper h2 a, .content-wrapper h3 a, .content-wrapper h4 a').on('click', function(){
        setTimeout(function(){
          copyToClipboard($(location).attr("href"));
        }, 500);
      });
      $('.content-wrapper .note td.icon').append('<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/note-icon.png">');

      $('.content pre').parent('.content').prepend('<div class="copy-icon"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 3a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z" fill="#78AECD"/><path d="M6 3a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2 3 3 0 0 1-3 3H9a3 3 0 0 1-3-3Z" fill="#78AECD"/></svg></div>');
      $('.copy-icon svg').on('click', function () {
        copyToClipboard($(this).parent().next().find('code').text());
      });
    }, 1000);

    $('.main').append('<div class="lightbox-modal"> <div id="close-ligtbox">✕</div> <div class="img"><img src="" alt=""></div></div><div class="overlay"></div>');
    $('.main img').on('click', function () {
      let path = $(this).attr('src');
      $('.lightbox-modal img').attr('src', path);
      $('.lightbox-modal, .overlay').show();
    });
    $('#close-ligtbox, .overlay').on('click',function () {
      $('.lightbox-modal, .overlay').hide();
    });

$('.sidebar-toggler').on('click', function () {
  $(this).toggleClass('active');
  $('main.main').toggleClass('sidebar-hide');
});

$('.content-wrapper a').filter(function() {
  return this.hostname && this.hostname !== location.hostname;
}).each(function() {
  $(this).attr({
    target: '_blank',
    title: 'Visit ' + this.href + ' (click to open in a new window)'
  });
});

  </script><script>docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});</script><script>window.dataLayer = window.dataLayer || [];
function gtag(){window.dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C0HVJ1E78Z');</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create','UA-32705710-3','auto');
  ga('send','pageview');
  var getOutboundLink = function(url) {
    ga('send', {
      hitType: 'event',
      eventCategory: 'outbound',
      eventAction: 'click',
      eventLabel: url,
      hitCallback: function(){document.location = url;}
    });
  }</script></body></html>