<!DOCTYPE html><html lang="en"><head><title>Kill Bill development</title><style>pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */</style><link rel="icon" type="image/x-icon" href="/stylesheets/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"><link rel="stylesheet" href='stylesheets/bootstrap.min.css'><link rel="stylesheet" href='stylesheets/bootstrap-toc.min.css'><link rel="stylesheet" href="stylesheets/kb.css"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Kill Bill development"></head><body data-spy="scroll" data-target="#myScrollspy" data-offset="100"><div class="loader-wrapper"><div id="loading"></div></div><header class="header sticky" id="header"><div class="header-wrapper"><div class="container-fluid"><div class="row flex-xl-nowrap justify-content-evenly"><div class="header-logo"><div class="logo"><a href="/"><img src="/stylesheets/images/logo/light-logo.svg" style="height:38px" alt="Kill Bill Docs" id="logo" height="38" width="146"></a></div><div class="switch"><input type="checkbox" aria-label="Search" name="theme-toggle" id="theme-toggle"><span class="slider round"></span></div></div><div class="nav-toggler sidebar-toggler"><svg class="hamburger" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 7C20.75 7.41421 20.4142 7.75 20 7.75L4 7.75C3.58579 7.75 3.25 7.41421 3.25 7C3.25 6.58579 3.58579 6.25 4 6.25L20 6.25C20.4142 6.25 20.75 6.58579 20.75 7Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 12C20.75 12.4142 20.4142 12.75 20 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L20 11.25C20.4142 11.25 20.75 11.5858 20.75 12Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 17C20.75 17.4142 20.4142 17.75 20 17.75L4 17.75C3.58579 17.75 3.25 17.4142 3.25 17C3.25 16.5858 3.58579 16.25 4 16.25L20 16.25C20.4142 16.25 20.75 16.5858 20.75 17Z" fill=""/></svg></div><div class="header-search"><div class="search-form-wrapper"><div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;"></div></div></div></div></div></div></header><main class="main sidebar-show"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="sidebar-wrapper"><aside class="sidebar"><div class="sidebar__control"><svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.33316 10.6665L1.6665 5.99992L6.33316 1.33325" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><nav class="sidebar-nav"><ul class="nav navbar-nav"><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Getting Started</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li><a class="nav-link" href="/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="/latest/getting_started.html">Getting Started (Installation)</a></li><li><a class="nav-link" href="/latest/quick_start_with_kaui.html">Quick Start with Kaui</a></li><li><a class="nav-link" href="/latest/quick_start_with_kb_api.html">Quick Start with the Kill Bill API</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Installation</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="/latest/userguide_deployment.html">Going to Production</a></li><li><a class="nav-link" href="/latest/how-to-upgrade-the-database.html">Database Migrations</a></li><li><a class="nav-link" href="/latest/PostgreSQL.html">PostgreSQL Setup</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;Notes</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">AWS</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/how-to-set-up-a-single-tier-system.html">Single-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-multi-tier-system.html">Multi-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-cloud-formation-system.html">CloudFormation Setup</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/how-to-maintain-a-single-tier-system.html">Single-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-multi-tier-system.html">Multi-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-cloud-formation-system.html">CloudFormation Maintenance</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Manuals</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="/latest/userguide_payment.html">Payment Processing</a></li><li><a class="nav-link" href="/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="/latest/email-notification-plugin.html">Email Notification Plugin</a></li><li><a class="nav-link" href="/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="/latest/userguide_analytics.html">Analytics Plugin</a></li><li><a class="nav-link" href="/latest/userguide_configuration.html">Kill Bill&nbsp;Configuration</a></li><li><a class="nav-link" href="/latest/internationalization.html">Kill Bill&nbsp;Internationalization</a></li><li><a class="nav-link" href="/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Tutorials</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plan_alignment.html">Plans Alignments</a></li><li><a class="nav-link" href="/latest/overdue.html">Overdue System</a></li><li><a class="nav-link" href="/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="/latest/ha.html">Hierarchical Accounts</a></li><li><a class="nav-link" href="/latest/catalog-examples.html">Catalog Examples</a></li><li><a class="nav-link" href="/latest/invoice_examples.html">Invoice Examples</a></li><li><a class="nav-link" href="/latest/invoice_templates.html">Invoice Templates</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Integration</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API Reference</a></li><li><a class="nav-link" href="/latest/swagger_documentation.html">Swagger UI Documentation</a></li><li><a class="nav-link" href="/latest/postman.html">Postman Integration</a></li><li><a class="nav-link" href="/latest/debugging.html">Debugging</a></li><li><a class="nav-link" href="/latest/push_notifications.html">Push Notifications</a></li><li><a class="nav-link" href="/latest/kill_bill_events.html">Kill Bill Events</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Plugin Development</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_introduction.html">Plugin Introduction</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_development.html">Plugin Development</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_installation.html">Plugin Installation</a></li><li><a class="nav-link" href="/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a class="nav-link" href="/latest/notification_plugin.html">Notification Plugins</a></li><li><a class="nav-link" href="/latest/payment_plugin.html">Payment Plugins</a></li><li><a class="nav-link" href="/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a class="nav-link" href="/latest/usage_plugin.html">Usage Plugins</a></li><li><a class="nav-link" href="/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a class="nav-link" href="/latest/catalog_plugin.html">Catalog Plugins</a></li><li><a class="nav-link" href="/latest/entitlement_plugin.html">Entitlement Plugins</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Operational Guides</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/deploy_to_kubernetes.html">Kubernetes (K8s) Deployment</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/user_management.html">Users, Roles, and Permissions</a></li><li><a class="nav-link" href="/latest/plugin_management.html">Plugin Management</a></li><li><a class="nav-link" href="/latest/aws-tools.html">AWS Analytics Tools</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Client Libraries</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/java_client.html">Java</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a class="nav-link" href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">KillBill Go </a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">About Kill Bill</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/demo.html">Demo</a></li><li><a class="nav-link" href="/latest/features.html">Features List</a></li><li><a class="nav-link" href="/latest/faq.html">Technical FAQs</a></li><li><a class="nav-link" href="/latest/Kill-Bill-Glossary.html">Glossary</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Internal</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/internal_design.html">Internal Design</a></li><li><a class="nav-link" href="/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a class="nav-link" href="/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a class="nav-link" href="/latest/development.html">Development Environment</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">References</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API Schema</a></li><li><a class="nav-link" href="/latest/catalog.xsd">Catalog XSD Reference</a></li><li><a class="nav-link" href="/latest/overdue.xsd">Overdue XSD Reference</a></li></ul></li></ul></nav><a class="doclink" href="mailto:support@killbill.io">Report a doc problem</a></aside></div><div class="article-container"><div class="center-content"><div class="main-wrapper"><article class="content-wrapper"><div class="banner"><h1>Kill Bill development</h1></div><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide explains how you can setup the Kill Bill development environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_kill_bill_in_your_development_environment">Setting up Kill Bill in your development environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to set up Kill Bill in your development environment, there are a couple of things that you need to do like setting up the code in an IDE, configuring the database and building and running the application. This section covers all these steps. By the end of this section, you should have the code set up and the Kill Bill server running in your development environment.</p>
</div>
<div class="sect2">
<h3 id="_setting_up_code_in_an_ide">Setting up code in an IDE</h3>
<div class="paragraph">
<p>You first need to set up the Kill Bill code in an IDE. You can use any IDE of your choice. This section explains setting up the code in Eclipse IDE. You can download the latest version of the Eclipse IDE from <a href="https://www.eclipse.org/downloads/">here</a>.</p>
</div>
<div class="sect3">
<h4 id="_cloning_the_repository">Cloning the Repository</h4>
<div class="paragraph">
<p>The first step is to clone the Kill Bill repository. For this, you need to follow the steps given below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start Eclipse.</p>
</li>
<li>
<p>Go to <strong>Git Repository view</strong> (Click on <code>Window &gt; Show View &gt; Other &gt; Git Repositories</code>).</p>
</li>
<li>
<p>Click on <strong>Clone a Git Repository and add the clone to this view</strong>.</p>
</li>
<li>
<p>In the Git Repository details, enter the Kill Bill Git URL <a href="https://github.com/killbill/killbill" class="bare">https://github.com/killbill/killbill</a> in the <strong>URI</strong> field.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If you have Git credentials, you can select <strong>https</strong> in the <strong>Protocol</strong> dropdown and enter your Git credentials in the <strong>User/Password</strong> fields.</p>
</li>
<li>
<p>If you do not have Git credentials , you can Select <strong>Git</strong> in the <strong>Protocol</strong> Dropdown. This disables the credentials fields.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In the branch selection view, select the branch named <strong>master</strong> (By default, all the branches appear selected, you need to uncheck all branches except for <strong>master</strong>). Click <strong>Next</strong>.</p>
</li>
<li>
<p>Select the path on your computer where you would like to clone the code. This path will be referred to as <strong>PROJECT_ROOT</strong> from now on). For example, if you choose <code>C:/MyProjects/KillBill</code>, <strong>PROJECT_ROOT</strong> refers to this path. Click <strong>Finish</strong> (This starts the cloning process and may take a while depending on your internet speed).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<strong>Note:</strong> Cloning the repository as specified above gives a read-only access to the repository. If you&#8217;d like to make changes to the repository, you need to <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo"><em>fork</em></a> the repository and create a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork"><em>pull request</em></a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_creating_an_eclipse_project">Creating an Eclipse Project</h4>
<div class="paragraph">
<p>Once the repository is cloned, you need to create an Eclipse project. For this, you need to follow the steps given below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on <strong>File &gt; Import &gt; Maven &gt; Existing Maven Project</strong>. Click <strong>Next</strong>.</p>
</li>
<li>
<p>Click <strong>Browse</strong>. Select the <strong>PROJECT_ROOT</strong> root directory and click  <strong>Finish</strong>.</p>
</li>
<li>
<p>Some of the Maven plugins used may not be available to m2e, so you may see errors as follows:</p>
</li>
</ol>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/m2e_plugin_errors.png" alt="m2e plugin errors">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Cancel</strong>.</p>
</li>
<li>
<p>Create a file <code>lifecycle-mapping-metadata.xml</code> as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-w"> </span><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tok-w"> </span><span class="tok-nt">&lt;lifecycleMappingMetadata&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;pluginExecutions&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>1.4<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>run<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;execute&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/execute&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>templating-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>1.0-alpha-3<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>filter-sources<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;execute&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/execute&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>[1.0,)<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>add-test-source<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>add-resource<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>add-test-resource<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>maven-version<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>add-source<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>parse-version<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;execute&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnConfiguration&gt;</span>true<span class="tok-nt">&lt;/runOnConfiguration&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;runOnIncremental&gt;</span>true<span class="tok-nt">&lt;/runOnIncremental&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/execute&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>com.hubspot.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>dependency-scope-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>0.10<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>check<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">           </span><span class="tok-nt">&lt;ignore</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>3.1.2<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>analyze-duplicate<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>analyze-only<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;ignore</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;pluginExecution&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pluginExecutionFilter&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;groupId&gt;</span>org.basepom.maven<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;versionRange&gt;</span>1.5.0<span class="tok-nt">&lt;/versionRange&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;goals&gt;</span>
<span class="tok-w">               </span><span class="tok-nt">&lt;goal&gt;</span>check<span class="tok-nt">&lt;/goal&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;/goals&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/pluginExecutionFilter&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;action&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;ignore</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/action&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/pluginExecution&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;/pluginExecutions&gt;</span>
<span class="tok-nt">&lt;/lifecycleMappingMetadata&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Go to <strong>Window &gt; Preferences &gt; Maven &gt; Lifecycle Mappings</strong>. Click <strong>Browse</strong> and select the path of the <code>lifecycle-mapping-metadata.xml</code> file. Click <strong>Apply and Close</strong>.</p>
</li>
<li>
<p>Build the project again (In Project Explorer, right-click on <strong>killbill &gt; Maven &gt; Update Project</strong>, then select <strong>OK</strong>).</p>
</li>
<li>
<p>This will get rid of all the build errors. Your Eclipse workspace should look like this:</p>
</li>
</ol>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/eclipse_workspace.png" alt="eclipse workspace">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_database">Configuring the Database</h3>
<div class="paragraph">
<p>Before you can execute the code, you need to configure the Kill Bill database manually. By default Kill Bill expects <strong>MySQL</strong>, but you can also use <strong>PostgreSQL</strong>.</p>
</div>
<div class="sect3">
<h4 id="_mysql_configuration">MySQL Configuration</h4>
<div class="paragraph">
<p>In order to configure MySQL, you need to follow the steps given below (These steps can be executed either via the <strong>MySQL Command line tool</strong> or via <strong>MySQLWorkBench</strong>):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a user corresponding to Kill Bill. You can run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-w"> </span><span class="tok-k">create</span><span class="tok-w"> </span><span class="tok-k">user</span><span class="tok-w"> </span><span class="tok-n">killbilluser</span><span class="tok-w"> </span><span class="tok-n">identified</span><span class="tok-w"> </span><span class="tok-k">by</span><span class="tok-w"> </span><span class="tok-s1">&#39;password&#39;</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Create a database corresponding to Kill Bill. You can run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-w">    </span><span class="tok-k">create</span><span class="tok-w"> </span><span class="tok-k">database</span><span class="tok-w"> </span><span class="tok-n">killbill</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Select the Kill Bill database created above using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-w"> </span><span class="tok-n">use</span><span class="tok-w"> </span><span class="tok-n">killbill</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Run the Kill Bill DDL <a href="https://docs.killbill.io/latest/ddl.sql">here</a>.</p>
</li>
<li>
<p>Grant  privileges to the user created above on the Kill bill database using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-w"> </span><span class="tok-k">GRANT</span><span class="tok-w"> </span><span class="tok-k">ALL</span><span class="tok-w"> </span><span class="tok-k">ON</span><span class="tok-w"> </span><span class="tok-n">killbill</span><span class="tok-p">.</span><span class="tok-o">*</span><span class="tok-w"> </span><span class="tok-k">TO</span><span class="tok-w"> </span><span class="tok-s1">&#39;killbilluser&#39;</span><span class="tok-w"> </span><span class="tok-p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>If you are using PostgreSQL, you can refer to the detailed instructions for PostgreSQL setup in our PostgreSQL Configuration document <a href="https://docs.killbill.io/latest/PostgreSQL.html#_postgresql_kill_bill_configuration">here</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the database configuration is done, you should have a database called <strong>killbill</strong>  with the following tables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-n">account_email_history</span>
<span class="tok-w"> </span><span class="tok-n">account_emails</span>
<span class="tok-w"> </span><span class="tok-n">account_history</span>
<span class="tok-w"> </span><span class="tok-n">accounts</span>
<span class="tok-w"> </span><span class="tok-n">audit_log</span>
<span class="tok-w"> </span><span class="tok-n">blocking_state_history</span>
<span class="tok-w"> </span><span class="tok-n">blocking_states</span>
<span class="tok-w"> </span><span class="tok-n">bundle_history</span>
<span class="tok-w"> </span><span class="tok-n">bundles</span>
<span class="tok-w"> </span><span class="tok-n">bus_events</span>
<span class="tok-w"> </span><span class="tok-n">bus_events_history</span>
<span class="tok-w"> </span><span class="tok-n">bus_ext_events</span>
<span class="tok-w"> </span><span class="tok-n">bus_ext_events_history</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_block_definition</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_phase_definition</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_phase_usage</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_plan_definition</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_plan_phase</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_tier_block</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_tier_definition</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_usage_definition</span>
<span class="tok-w"> </span><span class="tok-n">catalog_override_usage_tier</span>
<span class="tok-w"> </span><span class="tok-n">custom_field_history</span>
<span class="tok-w"> </span><span class="tok-n">custom_fields</span>
<span class="tok-w"> </span><span class="tok-n">invoice_billing_events</span>
<span class="tok-w"> </span><span class="tok-n">invoice_history</span>
<span class="tok-w"> </span><span class="tok-n">invoice_item_history</span>
<span class="tok-w"> </span><span class="tok-n">invoice_items</span>
<span class="tok-w"> </span><span class="tok-n">invoice_parent_children</span>
<span class="tok-w"> </span><span class="tok-n">invoice_payment_control_plugin_auto_pay_off</span>
<span class="tok-w"> </span><span class="tok-n">invoice_payment_history</span>
<span class="tok-w"> </span><span class="tok-n">invoice_payments</span>
<span class="tok-w"> </span><span class="tok-n">invoice_tracking_id_history</span>
<span class="tok-w"> </span><span class="tok-n">invoice_tracking_ids</span>
<span class="tok-w"> </span><span class="tok-n">invoices</span>
<span class="tok-w"> </span><span class="tok-n">node_infos</span>
<span class="tok-w"> </span><span class="tok-n">notifications</span>
<span class="tok-w"> </span><span class="tok-n">notifications_history</span>
<span class="tok-w"> </span><span class="tok-n">payment_attempt_history</span>
<span class="tok-w"> </span><span class="tok-n">payment_attempts</span>
<span class="tok-w"> </span><span class="tok-n">payment_history</span>
<span class="tok-w"> </span><span class="tok-n">payment_method_history</span>
<span class="tok-w"> </span><span class="tok-n">payment_methods</span>
<span class="tok-w"> </span><span class="tok-n">payment_transaction_history</span>
<span class="tok-w"> </span><span class="tok-n">payment_transactions</span>
<span class="tok-w"> </span><span class="tok-n">payments</span>
<span class="tok-w"> </span><span class="tok-n">roles_permissions</span>
<span class="tok-w"> </span><span class="tok-n">rolled_up_usage</span>
<span class="tok-w"> </span><span class="tok-n">service_broadcasts</span>
<span class="tok-w"> </span><span class="tok-n">sessions</span>
<span class="tok-w"> </span><span class="tok-n">subscription_event_history</span>
<span class="tok-w"> </span><span class="tok-n">subscription_events</span>
<span class="tok-w"> </span><span class="tok-n">subscription_history</span>
<span class="tok-w"> </span><span class="tok-n">subscriptions</span>
<span class="tok-w"> </span><span class="tok-n">tag_definition_history</span>
<span class="tok-w"> </span><span class="tok-n">tag_definitions</span>
<span class="tok-w"> </span><span class="tok-n">tag_history</span>
<span class="tok-w"> </span><span class="tok-n">tags</span>
<span class="tok-w"> </span><span class="tok-n">tenant_broadcasts</span>
<span class="tok-w"> </span><span class="tok-n">tenant_kvs</span>
<span class="tok-w"> </span><span class="tok-n">tenants</span>
<span class="tok-w"> </span><span class="tok-n">user_roles</span>
<span class="tok-w"> </span><span class="tok-n">users</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build">Build</h3>
<div class="paragraph">
<p>Once you set up the code and database, the next step is to build the application. Kill Bill is a standard Maven project. In order to build Kill Bill, you need to follow the steps given below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that you have <strong>Maven 3.5.2 or higher</strong> (It can be downloaded from <a href="http://maven.apache.org/download.cgi">here</a>).</p>
</li>
<li>
<p>Maven requires JDK. Ensure that you have <strong>JDK 11 or higher</strong>. (You can download it from
<a href="https://www.oracle.com/in/java/technologies/javase/jdk11-archive-downloads.html">here</a>.)</p>
</li>
<li>
<p>Ensure that the <strong>JAVA_HOME</strong> environment variable is set to the path of your JDK installation (For example, if JDK is installed at <code>C:\Software\jdk11</code>, you need to set <strong>JAVA_HOME</strong> to <code>C:\Software\jdk11</code>).</p>
</li>
<li>
<p>Navigate to <strong>PROJECT_ROOT</strong>.</p>
</li>
<li>
<p>Run the following command (The first time you run this, the build will take a considerable amount of time as Maven will download all the dependencies from the internet and cache them in the local repository (<code>~/.m2/repository</code>). Subsequent builds will be faster):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w">  </span>mvn<span class="tok-w"> </span>clean<span class="tok-w"> </span>install<span class="tok-w"> </span>-DskipTests</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the following is displayed which confirms that the build is successful:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill<span class="tok-w"> </span>...........................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">17</span>.938<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-api<span class="tok-w"> </span>.......................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">23</span>.352<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-util<span class="tok-w"> </span>......................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">01</span>:37<span class="tok-w"> </span>min<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-tenant<span class="tok-w"> </span>....................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">23</span>.817<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-account<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">21</span>.540<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-catalog<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">44</span>.055<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-currency<span class="tok-w"> </span>..................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">12</span>.204<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-subscription<span class="tok-w"> </span>..............................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">29</span>.722<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-entitlement<span class="tok-w"> </span>...............................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">26</span>.420<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-junction<span class="tok-w"> </span>..................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">17</span>.059<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-invoice<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">36</span>.480<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-overdue<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">23</span>.769<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-payment<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">36</span>.311<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-beatrix<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">29</span>.213<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-jaxrs<span class="tok-w"> </span>.....................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">36</span>.799<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles<span class="tok-w"> </span>..................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w">  </span><span class="tok-m">0</span>.357<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles-killbill<span class="tok-w"> </span>.........................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">39</span>.344<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles-killpay<span class="tok-w"> </span>..........................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w"> </span><span class="tok-m">25</span>.608<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>------------------------------------------------------------------------
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>BUILD<span class="tok-w"> </span>SUCCESS
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<strong>Note:</strong> The build process creates the Kill Bill war file in the <code>/killbill/profiles/killbill/target</code> directory.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="running_the_application">Running the Application (Local Jetty Server)</h3>
<div class="paragraph">
<p>Once the build is successful, you can run the application in a local Jetty server. This helps to verify that everything is set up correctly. In order to run the application on Jetty, you need to follow the steps given below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. Update the following properties as per your database:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-w"> </span><span class="tok-na">org.killbill.dao.url</span><span class="tok-o">=</span><span class="tok-s">jdbc:mysql://127.0.0.1:3306/killbill</span>
<span class="tok-w"> </span><span class="tok-c1"># For PostgreSQL, use jdbc:postgresql://127.0.0.1:5432/killbill?currentSchema=killbillschema</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.dao.user</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.dao.password</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.dao.logLevel</span><span class="tok-o">=</span><span class="tok-s">DEBUG</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.billing.osgi.dao.url</span><span class="tok-o">=</span><span class="tok-s">jdbc:mysql://127.0.0.1:3306/killbill</span>
<span class="tok-w"> </span><span class="tok-c1"># For PostgreSQL, use jdbc:postgresql://127.0.0.1:5432/killbill?currentSchema=killbillschema</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.billing.osgi.dao.user</span><span class="tok-o">=</span><span class="tok-s">root</span>
<span class="tok-w"> </span><span class="tok-na">org.killbill.billing.osgi.dao.password</span><span class="tok-o">=</span><span class="tok-s">root</span></code></pre>
</div>
</div>
</li>
<li>
<p>Naviagate to the <strong>PROJECT_ROOT</strong> directory.</p>
</li>
<li>
<p>Start Kill Bill by running the following command (Replace <strong>PROJECT_ROOT</strong> with your actual project root):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w"> </span>mvn<span class="tok-w"> </span>-Dorg.killbill.server.properties<span class="tok-o">=</span>file:///PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties<span class="tok-w"> </span>-Dlogback.configurationFile<span class="tok-o">=</span>./profiles/killbill/src/main/resources/logback.xml<span class="tok-w"> </span>jetty:run</code></pre>
</div>
</div>
</li>
<li>
<p>This should display the following:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>Started<span class="tok-w"> </span>ServerConnector@7de2f9a6<span class="tok-o">{</span>HTTP/1.1,<span class="tok-w"> </span><span class="tok-o">(</span>http/1.1<span class="tok-o">)}{</span><span class="tok-m">0</span>.0.0.0:8080<span class="tok-o">}</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>Started<span class="tok-w"> </span>@95008ms
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>Started<span class="tok-w"> </span>Jetty<span class="tok-w"> </span>Server</code></pre>
</div>
</div>
</li>
<li>
<p>Open a browser window and type http://localhost:8080. This should display the following page:</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/development/killbill-homepage.png" alt="killbill homepage">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_application_in_tomcat">Running the Application in Tomcat</h3>
<div class="paragraph">
<p>In order to run the application on Tomcat copy the <code>/killbill/profiles/killbill/target/killbill-profiles-killbill-x.y.z-SNAPSHOT</code> war file (generated after the <a href="#build">build</a> process) into your Tomcat directory and follow <a href="https://docs.killbill.io/latest/getting_started.html#_kill_bill_configuration">these</a> instructions.</p>
</div>
</div>
<div class="sect2">
<h3 id="customizing_log_file_path">Customizing Log File Path</h3>
<div class="paragraph">
<p>The steps above configure the application so that the Kill Bill logs are displayed on the console. You can however customize this to save the logs in a separate log file. In order to set this up, you need to follow the steps given below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/logback.xml</code>. Add the following after the license section:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-w"> </span><span class="tok-cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tok-w">  </span><span class="tok-nt">&lt;configuration&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;jmxConfigurator</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;property</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;LOGS_DIR&quot;</span><span class="tok-w"> </span><span class="tok-na">value=</span><span class="tok-s">&quot;&lt;log_file_path&gt;&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;conversionRule</span><span class="tok-w"> </span><span class="tok-na">conversionWord=</span><span class="tok-s">&quot;maskedMsg&quot;</span><span class="tok-w"> </span><span class="tok-na">converterClass=</span><span class="tok-s">&quot;org.killbill.billing.server.log.obfuscators.ObfuscatorConverter&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;appender</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;MAIN&quot;</span><span class="tok-w"> </span><span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;file&gt;</span>${LOGS_DIR:-./logs}/killbill.out<span class="tok-nt">&lt;/file&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;rollingPolicy</span><span class="tok-w"> </span><span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-w">         </span><span class="tok-cm">&lt;!-- rollover daily --&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;fileNamePattern&gt;</span>${LOGS_DIR:-./logs}/killbill-%d{yyyy-MM-dd}.%i.out.gz<span class="tok-nt">&lt;/fileNamePattern&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;maxHistory&gt;</span>3<span class="tok-nt">&lt;/maxHistory&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;cleanHistoryOnStart&gt;</span>true<span class="tok-nt">&lt;/cleanHistoryOnStart&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;timeBasedFileNamingAndTriggeringPolicy</span><span class="tok-w"> </span><span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-w">            </span><span class="tok-cm">&lt;!-- or whenever the file size reaches 100MB --&gt;</span>
<span class="tok-w">            </span><span class="tok-nt">&lt;maxFileSize&gt;</span>100MB<span class="tok-nt">&lt;/maxFileSize&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;/timeBasedFileNamingAndTriggeringPolicy&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/rollingPolicy&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;encoder&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pattern&gt;</span>%date{&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss,SSSZ&quot;,<span class="tok-w"> </span>UTC}<span class="tok-w"> </span>lvl=&#39;%level&#39;,<span class="tok-w"> </span>log=&#39;%logger{0}&#39;,<span class="tok-w"> </span>th=&#39;%thread&#39;,<span class="tok-w"> </span>xff=&#39;%X{req.xForwardedFor}&#39;,<span class="tok-w"> </span>rId=&#39;%X{req.requestId}&#39;,<span class="tok-w"> </span>tok=&#39;%X{kb.userToken}&#39;,<span class="tok-w"> </span>aRId=&#39;%X{kb.accountRecordId}&#39;,<span class="tok-w"> </span>tRId=&#39;%X{kb.tenantRecordId}&#39;,<span class="tok-w"> </span>%maskedMsg%n<span class="tok-nt">&lt;/pattern&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/encoder&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;/appender&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;appender</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;STDOUT&quot;</span><span class="tok-w"> </span><span class="tok-na">class=</span><span class="tok-s">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;encoder&gt;</span>
<span class="tok-w">         </span><span class="tok-cm">&lt;!-- See http://jira.qos.ch/browse/LOGBACK-262 --&gt;</span>
<span class="tok-w">         </span><span class="tok-nt">&lt;pattern&gt;</span>%date{&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss,SSSZ&quot;,<span class="tok-w"> </span>UTC}<span class="tok-w"> </span>lvl=&#39;%level&#39;,<span class="tok-w"> </span>log=&#39;%logger{0}&#39;,<span class="tok-w"> </span>th=&#39;%thread&#39;,<span class="tok-w"> </span>xff=&#39;%X{req.xForwardedFor}&#39;,<span class="tok-w"> </span>rId=&#39;%X{req.requestId}&#39;,<span class="tok-w"> </span>tok=&#39;%X{kb.userToken}&#39;,<span class="tok-w"> </span>aRId=&#39;%X{kb.accountRecordId}&#39;,<span class="tok-w"> </span>tRId=&#39;%X{kb.tenantRecordId}&#39;,<span class="tok-w"> </span>%maskedMsg%n<span class="tok-nt">&lt;/pattern&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;/encoder&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;/appender&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;logger</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;jdbc&quot;</span><span class="tok-w"> </span><span class="tok-na">level=</span><span class="tok-s">&quot;OFF&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;root</span><span class="tok-w"> </span><span class="tok-na">level=</span><span class="tok-s">&quot;INFO&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-w">      </span><span class="tok-nt">&lt;appender-ref</span><span class="tok-w"> </span><span class="tok-na">ref=</span><span class="tok-s">&quot;MAIN&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-w">   </span><span class="tok-nt">&lt;/root&gt;</span>
<span class="tok-nt">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Replace <code>&lt;log_file_path&gt;</code> above with the path where you want the logs to be created. For example, if youd like the logs to be in a directory called <code>c:/logs</code>, you need to replace <code>&lt;log_file_path&gt;</code> with <code>c:/logs</code>.</p>
</li>
<li>
<p>Restart the application by running the Maven command specified above. Now, the logs will be created at the path specified in the <code>logback.xml</code> file as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="yaml"><span></span><span class="tok-w">  </span><span class="tok-l tok-l-Scalar tok-l-Scalar-Plain">&lt;log_file_path&gt;/killbill.out</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_a_breakpoint_and_remote_debugging">Setting up a Breakpoint and Remote Debugging</h3>
<div class="paragraph">
<p>Sometimes, you may face some issues in running the application. In such cases, it is useful to set up a breakpoint and debug the application. Here is how you can do this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new environment variable <strong>MAVEN_OPTS</strong> and set it to <code>-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n</code></p>
</li>
<li>
<p>Do the following in Eclipse:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Press <strong>Ctrl + Shift + T</strong> and locate the file that you would like to debug. For example, if the application fails to start, you would need to debug the <code>DefaultKillbillConfigSource</code>.</p>
</li>
<li>
<p>If this does not show the source code do the following:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click <strong>Attach Source</strong>.</p>
</li>
<li>
<p>Click on <strong>External Location</strong> and Navigate to your Maven local repository (<code>~/.m2/repository</code>). Select the jar file corresponding to the file that you want to debug. For the  <code>DefaultKillbillConfigSource</code> you need to select
<code>/org/kill-bill/billing/killbill-platform-base/0.40.4/killbill-platform-base-0.40.4-sources.jar</code> (At the time of writing, <code>0.40.4</code> is the latest version of this jar, however this can change so the exact version might be different for you)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Set up a breakpoint as required. For example, if it is an issue in starting the application, you would need to set up a breakpoint in  <code>DefaultKillbillConfigSource.java#L118</code>.</p>
</li>
<li>
<p>Click <strong>Run &gt; Debug Configurations</strong>.</p>
</li>
<li>
<p>Double-click  <strong>New Remote Java Application</strong>.</p>
</li>
<li>
<p>Enter the name that you would like to give to this debug configuration in the <strong>Name</strong> field.</p>
</li>
<li>
<p>Click <strong>Apply</strong>.</p>
</li>
<li>
<p>Click <strong>Close</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Start the application as explained in the <a href="#running_the_application">"Running the Application"</a> section above.</p>
</li>
<li>
<p>Click <code>Run &gt; Debug Configurations</code> and double click the  the Debug configuration that you created above.</p>
</li>
<li>
<p>This runs the application in debug mode. You can also set additional breakpoints as required.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_further_debugging">Further Debugging</h3>
<div class="paragraph">
<p>The <a href="https://docs.killbill.io/latest/debugging.html">Debugging Tips</a> document includes some additional debugging tips for Kill Bill in general. You may also reach out to the Kill Bill <a href="https://groups.google.com/forum/#!forum/killbilling-users">mailing list</a>, with the <code>kpm diagnostic</code> output as explained in the <a href="https://docs.killbill.io/latest/debugging.html#_seeking_help">Seeking Help</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_some_common_errors_and_their_solutions">Some common errors and their solutions</h3>
<div class="sect3">
<h4 id="_build_failure">Build Failure</h4>
<div class="paragraph">
<p>Sometimes, after building the application, the build may fail with the following errors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-payment<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">01</span>:42<span class="tok-w"> </span>min<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-beatrix<span class="tok-w"> </span>...................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">02</span>:04<span class="tok-w"> </span>min<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-jaxrs<span class="tok-w"> </span>.....................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">01</span>:45<span class="tok-w"> </span>min<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles<span class="tok-w"> </span>..................................<span class="tok-w"> </span>SUCCESS<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-w">  </span><span class="tok-m">9</span>.896<span class="tok-w"> </span>s<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles-killbill<span class="tok-w"> </span>.........................<span class="tok-w"> </span>FAILURE<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">02</span>:48<span class="tok-w"> </span>min<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>killbill-profiles-killpay<span class="tok-w"> </span>..........................<span class="tok-w"> </span>SKIPPED
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>------------------------------------------------------------------------
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>BUILD<span class="tok-w"> </span>FAILURE
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>------------------------------------------------------------------------
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>Total<span class="tok-w"> </span>time:<span class="tok-w">  </span><span class="tok-m">26</span>:55<span class="tok-w"> </span>min
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>Finished<span class="tok-w"> </span>at:<span class="tok-w"> </span><span class="tok-m">2020</span>-11-23T10:46:24+05:30
<span class="tok-w"> </span><span class="tok-o">[</span>INFO<span class="tok-o">]</span><span class="tok-w"> </span>------------------------------------------------------------------------
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span>Failed<span class="tok-w"> </span>to<span class="tok-w"> </span>execute<span class="tok-w"> </span>goal<span class="tok-w"> </span>org.apache.rat:apache-rat-plugin:0.13:check<span class="tok-w"> </span><span class="tok-o">(</span>default<span class="tok-o">)</span><span class="tok-w"> </span>on<span class="tok-w"> </span>project<span class="tok-w"> </span>killbill-profiles-killbill:<span class="tok-w"> </span>Too<span class="tok-w"> </span>many<span class="tok-w"> </span>files<span class="tok-w"> </span>with<span class="tok-w"> </span>unapproved<span class="tok-w"> </span>license:<span class="tok-w"> </span><span class="tok-m">1</span><span class="tok-w"> </span>See<span class="tok-w"> </span>RAT<span class="tok-w"> </span>report<span class="tok-w"> </span><span class="tok-k">in</span>:<span class="tok-w"> </span>&lt;PROJECT_ROOT&gt;<span class="tok-se">\p</span>rofiles<span class="tok-se">\k</span>illbill<span class="tok-se">\t</span>arget<span class="tok-se">\r</span>at.txt<span class="tok-w"> </span>-&gt;<span class="tok-w"> </span><span class="tok-o">[</span>Help<span class="tok-w"> </span><span class="tok-m">1</span><span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span>To<span class="tok-w"> </span>see<span class="tok-w"> </span>the<span class="tok-w"> </span>full<span class="tok-w"> </span>stack<span class="tok-w"> </span>trace<span class="tok-w"> </span>of<span class="tok-w"> </span>the<span class="tok-w"> </span>errors,<span class="tok-w"> </span>re-run<span class="tok-w"> </span>Maven<span class="tok-w"> </span>with<span class="tok-w"> </span>the<span class="tok-w"> </span>-e<span class="tok-w"> </span>switch.
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span>Re-run<span class="tok-w"> </span>Maven<span class="tok-w"> </span>using<span class="tok-w"> </span>the<span class="tok-w"> </span>-X<span class="tok-w"> </span>switch<span class="tok-w"> </span>to<span class="tok-w"> </span><span class="tok-nb">enable</span><span class="tok-w"> </span>full<span class="tok-w"> </span>debug<span class="tok-w"> </span>logging.
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span>For<span class="tok-w"> </span>more<span class="tok-w"> </span>information<span class="tok-w"> </span>about<span class="tok-w"> </span>the<span class="tok-w"> </span>errors<span class="tok-w"> </span>and<span class="tok-w"> </span>possible<span class="tok-w"> </span>solutions,<span class="tok-w"> </span>please<span class="tok-w"> </span><span class="tok-nb">read</span><span class="tok-w"> </span>the<span class="tok-w"> </span>following<span class="tok-w"> </span>articles:
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span><span class="tok-o">[</span>Help<span class="tok-w"> </span><span class="tok-m">1</span><span class="tok-o">]</span><span class="tok-w"> </span>http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span>
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w"> </span>After<span class="tok-w"> </span>correcting<span class="tok-w"> </span>the<span class="tok-w"> </span>problems,<span class="tok-w"> </span>you<span class="tok-w"> </span>can<span class="tok-w"> </span>resume<span class="tok-w"> </span>the<span class="tok-w"> </span>build<span class="tok-w"> </span>with<span class="tok-w"> </span>the<span class="tok-w"> </span><span class="tok-nb">command</span>
<span class="tok-w"> </span><span class="tok-o">[</span>ERROR<span class="tok-o">]</span><span class="tok-w">   </span>mvn<span class="tok-w"> </span>&lt;args&gt;<span class="tok-w"> </span>-rf<span class="tok-w"> </span>:killbill-profiles-killbill</code></pre>
</div>
</div>
<div class="paragraph">
<p>This error is probably because some file is missing license information. You can build the application using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>mvn<span class="tok-w"> </span>clean<span class="tok-w"> </span>install<span class="tok-w"> </span>-DskipTests<span class="tok-w"> </span>-Dcheck.skip-rat<span class="tok-o">=</span><span class="tok-nb">true</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jetty_does_not_start">Jetty Does Not Start</h4>
<div class="paragraph">
<p>Sometimes, when you run the application, Jetty may fail to start with the following error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>Failed<span class="tok-w"> </span>startup<span class="tok-w"> </span>of<span class="tok-w"> </span>context<span class="tok-w"> </span>o.e.j.m.p.JettyWebAppContext@1fafd0af</code></pre>
</div>
</div>
<div class="paragraph">
<p>In such a case, build the application again using the instructions in the <a href="#build">"Build"</a> section above and run the application again.</p>
</div>
</div>
<div class="sect3">
<h4 id="_application_points_to_the_default_database">Application Points to the Default Database</h4>
<div class="paragraph">
<p>Sometimes, when the application is started, it may not use the database configured in the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. Instead, it may use the default H2 database and cause the following errors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>java.io.IOException:<span class="tok-w"> </span>org.h2.jdbc.JdbcSQLNonTransientConnectionException:<span class="tok-w"> </span>A<span class="tok-w"> </span>file<span class="tok-w"> </span>path<span class="tok-w"> </span>that<span class="tok-w"> </span>is<span class="tok-w"> </span>implicitly<span class="tok-w"> </span>relative<span class="tok-w"> </span>to<span class="tok-w"> </span>the<span class="tok-w"> </span>current<span class="tok-w"> </span>working<span class="tok-w"> </span>directory<span class="tok-w"> </span>is<span class="tok-w"> </span>not<span class="tok-w"> </span>allowed<span class="tok-w"> </span><span class="tok-k">in</span><span class="tok-w"> </span>the<span class="tok-w"> </span>database<span class="tok-w"> </span>URL<span class="tok-w"> </span><span class="tok-s2">&quot;jdbc:h2:file:/var/tmp/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE&quot;</span>.<span class="tok-w"> </span>Use<span class="tok-w"> </span>an<span class="tok-w"> </span>absolute<span class="tok-w"> </span>path,<span class="tok-w"> </span>~/name,<span class="tok-w"> </span>./name,<span class="tok-w"> </span>or<span class="tok-w"> </span>the<span class="tok-w"> </span>baseDir<span class="tok-w"> </span>setting<span class="tok-w"> </span>instead.<span class="tok-w"> </span><span class="tok-o">[</span><span class="tok-m">90011</span>-200<span class="tok-o">]</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.commons.embeddeddb.h2.H2EmbeddedDB.refreshTableNames<span class="tok-o">(</span>H2EmbeddedDB.java:114<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.commons.embeddeddb.h2.H2EmbeddedDB.start<span class="tok-o">(</span>H2EmbeddedDB.java:97<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.EmbeddedDBProvider.initializeEmbeddedDB<span class="tok-o">(</span>EmbeddedDBProvider.java:73<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.EmbeddedDBProvider.get<span class="tok-o">(</span>EmbeddedDBProvider.java:60<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillServerModule.configureEmbeddedDBs<span class="tok-o">(</span>KillbillServerModule.java:141<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillPlatformModule.configure<span class="tok-o">(</span>KillbillPlatformModule.java:84<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillServerModule.configure<span class="tok-o">(</span>KillbillServerModule.java:113<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.AbstractModule.configure<span class="tok-o">(</span>AbstractModule.java:61<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.spi.Elements<span class="tok-nv">$RecordingBinder</span>.install<span class="tok-o">(</span>Elements.java:347<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.spi.Elements.getElements<span class="tok-o">(</span>Elements.java:104<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.internal.InjectorShell<span class="tok-nv">$Builder</span>.build<span class="tok-o">(</span>InjectorShell.java:137<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.internal.InternalInjectorCreator.build<span class="tok-o">(</span>InternalInjectorCreator.java:105<span class="tok-o">)</span>
<span class="tok-w">        </span>at<span class="tok-w"> </span>com.google.inject.Guice.createInjector<span class="tok-o">(</span>Guice.java:87<span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This error could be due to one of the following issues:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The path of the  <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> is not specified correctly while starting the application.  Ensure that the correct path is specified</p>
</li>
<li>
<p>While starting the application, the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> is specified as <code>file://PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code>. The file protocol requires three slashes, so ensure that it is specified as <code>file:///</code></p>
</li>
<li>
<p>The database URL is not specified properly, ensure that the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> has the correct database properties as specified in the <a href="#running_the_application">"Running the Application"</a> section above</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_logs_not_created">Logs Not Created</h4>
<div class="paragraph">
<p>Sometimes, even after configuring your <code>logback.xml</code> file as specified in the <a href="#customizing_log_file_path">"Customizing Log File Path"</a> section, logs might not be created. This is most probably because your <code>logback.xml</code> is not a valid XML file. Some reasons for an XML file to be invalid are leading spaces, unclosed XML tags. In general, if you are able to open the XML file in a web browser without any errors, your XML file is valid.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sqlexception_on_startup">SQLException on Startup</h4>
<div class="paragraph">
<p>Sometimes, even after configuring everything as explained above, the following exception might occur when Kill Bill is started:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>Caused<span class="tok-w"> </span>by:<span class="tok-w"> </span>java.sql.SQLTransientConnectionException:<span class="tok-w"> </span>Could<span class="tok-w"> </span>not<span class="tok-w"> </span>connect<span class="tok-w"> </span>to<span class="tok-w"> </span><span class="tok-nv">address</span><span class="tok-o">=(</span><span class="tok-nv">host</span><span class="tok-o">=</span><span class="tok-m">127</span>.0.0.1<span class="tok-o">)(</span><span class="tok-nv">port</span><span class="tok-o">=</span><span class="tok-m">3306</span><span class="tok-o">)(</span><span class="tok-nv">type</span><span class="tok-o">=</span>master<span class="tok-o">)</span><span class="tok-w"> </span>:<span class="tok-w"> </span>RSA<span class="tok-w"> </span>public<span class="tok-w"> </span>key<span class="tok-w"> </span>is<span class="tok-w"> </span>not<span class="tok-w"> </span>available<span class="tok-w"> </span>client<span class="tok-w"> </span>side<span class="tok-w"> </span><span class="tok-o">(</span>option<span class="tok-w"> </span>serverRsaPublicKeyFile<span class="tok-w"> </span>not<span class="tok-w"> </span><span class="tok-nb">set</span><span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.createException<span class="tok-o">(</span>ExceptionFactory.java:79<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>org.mariadb.jdbc.internal.util.exceptions.ExceptionFactory.create<span class="tok-o">(</span>ExceptionFactory.java:153<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>org.mariadb.jdbc.MariaDbDataSource.getConnection<span class="tok-o">(</span>MariaDbDataSource.java:305<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.PoolBase.newConnection<span class="tok-o">(</span>PoolBase.java:364<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.PoolBase.newPoolEntry<span class="tok-o">(</span>PoolBase.java:206<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.HikariPool.createPoolEntry<span class="tok-o">(</span>HikariPool.java:476<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.HikariPool.access<span class="tok-nv">$100</span><span class="tok-o">(</span>HikariPool.java:71<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.HikariPool<span class="tok-nv">$PoolEntryCreator</span>.call<span class="tok-o">(</span>HikariPool.java:726<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>com.zaxxer.hikari.pool.HikariPool<span class="tok-nv">$PoolEntryCreator</span>.call<span class="tok-o">(</span>HikariPool.java:712<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>java.util.concurrent.FutureTask.run<span class="tok-o">(</span>FutureTask.java:266<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>java.util.concurrent.ThreadPoolExecutor.runWorker<span class="tok-o">(</span>ThreadPoolExecutor.java:1142<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>java.util.concurrent.ThreadPoolExecutor<span class="tok-nv">$Worker</span>.run<span class="tok-o">(</span>ThreadPoolExecutor.java:617<span class="tok-o">)</span>
<span class="tok-w">	</span>at<span class="tok-w"> </span>java.lang.Thread.run<span class="tok-o">(</span>Thread.java:745<span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Some later versions of MySQL require requesting a public key from the server. Thus, the database connection string needs to be specified as follows in the <code>PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>org.killbill.dao.url<span class="tok-o">=</span>jdbc:mysql://127.0.0.1:3306/killbill?allowPublicKeyRetrieval<span class="tok-o">=</span>true<span class="tok-p">&amp;</span><span class="tok-nv">useSSL</span><span class="tok-o">=</span><span class="tok-nb">false</span>
org.killbill.billing.osgi.dao.url<span class="tok-o">=</span>jdbc:mysql://127.0.0.1:3306/killbill?allowPublicKeyRetrieval<span class="tok-o">=</span>true<span class="tok-p">&amp;</span><span class="tok-nv">useSSL</span><span class="tok-o">=</span><span class="tok-nb">false</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classnotfoundexception_on_startup">ClassNotFoundException on Startup</h4>
<div class="paragraph">
<p>Sometimes, even after configuring everything as explained above, the following exception might occur when Kill Bill is started:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>Caused<span class="tok-w"> </span>by:<span class="tok-w"> </span>java.lang.ClassNotFoundException:<span class="tok-w"> </span>jar<span class="tok-w"> </span>file<span class="tok-w"> </span><span class="tok-s1">&#39;killbill-api-0.53.17.jar&#39;</span><span class="tok-w"> </span>could<span class="tok-w"> </span>not<span class="tok-w"> </span>be<span class="tok-w"> </span>instantiate<span class="tok-w"> </span>from<span class="tok-w"> </span>file<span class="tok-w"> </span>path.<span class="tok-w"> </span>Error:<span class="tok-w"> </span>C:<span class="tok-se">\U</span>sers<span class="tok-se">\&lt;</span>username&gt;<span class="tok-se">\.</span>m2<span class="tok-se">\r</span>epository<span class="tok-se">\o</span>rg<span class="tok-se">\k</span>ill-bill<span class="tok-se">\b</span>illing<span class="tok-se">\k</span>illbill-api<span class="tok-se">\0</span>.53.17<span class="tok-se">\k</span>illbill-api-0.53.17.jar<span class="tok-w"> </span><span class="tok-o">(</span>The<span class="tok-w"> </span>system<span class="tok-w"> </span>cannot<span class="tok-w"> </span>find<span class="tok-w"> </span>the<span class="tok-w"> </span>path<span class="tok-w"> </span>specified<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.lifecycle.ServiceFinder.findClasses<span class="tok-w"> </span><span class="tok-o">(</span>ServiceFinder.java:130<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.lifecycle.ServiceFinder.initialize<span class="tok-w"> </span><span class="tok-o">(</span>ServiceFinder.java:64<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.lifecycle.ServiceFinder.&lt;init&gt;<span class="tok-w"> </span><span class="tok-o">(</span>ServiceFinder.java:48<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.util.glue.IDBISetup.mapperFactoriesToRegister<span class="tok-w"> </span><span class="tok-o">(</span>IDBISetup.java:65<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillServerModule.configureDao<span class="tok-w"> </span><span class="tok-o">(</span>KillbillServerModule.java:127<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillPlatformModule.configure<span class="tok-w"> </span><span class="tok-o">(</span>KillbillPlatformModule.java:86<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>org.killbill.billing.server.modules.KillbillServerModule.configure<span class="tok-w"> </span><span class="tok-o">(</span>KillbillServerModule.java:99<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>com.google.inject.AbstractModule.configure<span class="tok-w"> </span><span class="tok-o">(</span>AbstractModule.java:61<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>com.google.inject.spi.Elements<span class="tok-nv">$RecordingBinder</span>.install<span class="tok-w"> </span><span class="tok-o">(</span>Elements.java:347<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>com.google.inject.spi.Elements.getElements<span class="tok-w"> </span><span class="tok-o">(</span>Elements.java:104<span class="tok-o">)</span>
<span class="tok-w">    </span>at<span class="tok-w"> </span>com.google.inject.internal.InjectorShell<span class="tok-nv">$Builder</span>.build<span class="tok-w"> </span><span class="tok-o">(</span>InjectorShell.java:137<span class="tok-o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This error typically occurs on Windows machines and is most probably due to a space being present in the Maven repository path. By default, on Windows, Maven uses the <code>C:\Users\&lt;username&gt;\.m2\</code> path for the local repository. If there is a space in the <code>&lt;username&gt;</code>, this error can occur. In order to get rid of this error you can change the path of the Maven local repository using the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>&lt;MAVEN_HOME&gt;/conf/settings.xml</code>.</p>
</li>
<li>
<p>Update <code>&lt;localRepository&gt;</code> to the desired path. For example, to create the Maven local repository at the <code>c:/mavenrepo</code> path, you need to specify <code>&lt;localRepository&gt;c:/mavenrepo&lt;/localRepository&gt;</code>.</p>
</li>
<li>
<p>Update the new Maven local repository path in Eclipse by navigating to <code>Window &gt; Preferences &gt; Maven &gt; User Settings</code>. In the <code>Global Settings</code> box, click <code>Browse</code> and select the <code>&lt;MAVEN_HOME&gt;/conf/settings.xml</code>.</p>
</li>
<li>
<p>Restart the application.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies">Dependencies</h3>
<div class="paragraph">
<p>The base <code>pom.xml</code> (<code>org.kill-bill.billing:killbill-oss-parent</code>) defines all of the dependencies required by Kill Bill. If a <code>-SNAPSHOT</code> version is specified (e.g. <code>0.141.74-SNAPSHOT</code>), this means some dependencies haven&#8217;t been released yet and you need to build them locally, before being able to build Kill Bill.</p>
</div>
<div class="paragraph">
<p>Typically, the following repositories need to be built in order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/killbill/killbill-oss-parent">killbill-oss-parent</a></p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-commons">killbill-commons</a></p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-platform">killbill-platform</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_navigating_the_kill_bill_codebase">Navigating the Kill Bill codebase</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It can be quite daunting to start poking around the Kill Bill codebase, as the code is scattered over various repositories. Here is a primer on how to get started.</p>
</div>
<div class="sect2">
<h3 id="_core_system">Core System</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/killbill/killbill-api" class="bare">https://github.com/killbill/killbill-api</a>: Java APIs, used when embedding Kill Bill (advanced users), by the REST API layer (internally) as well as by plugins, which need to interact with the core system.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-plugin-api" class="bare">https://github.com/killbill/killbill-plugin-api</a>: Java Plugin APIs, which need to be implemented by plugin developers.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-commons" class="bare">https://github.com/killbill/killbill-commons</a>: similar in concept to Apache Commons, repository of re-useable components. You could use these in your projects even outside of the Kill Bill environment.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-platform" class="bare">https://github.com/killbill/killbill-platform</a>: underlying Kill Bill platform, contains code unrelated to billing and payments, such as setting up the lifecycle, the OSGI environment, the webapp container bridge, logging, etc.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill" class="bare">https://github.com/killbill/killbill</a>: the Kill Bill library, containing the core of the system. It is divided into submodules, each one of them being independent (own APIs, own set of tables, etc.) and interacting with other modules either via internal Java APIs or Bus events.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following blog posts can help provide more context on the Kill Bill architecture:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://killbill.io/blog/kill-bill-billing-system-architecture/" class="bare">https://killbill.io/blog/kill-bill-billing-system-architecture/</a></p>
</li>
<li>
<p><a href="https://killbill.io/blog/kill-bill-plugins-architecture/" class="bare">https://killbill.io/blog/kill-bill-plugins-architecture/</a></p>
</li>
<li>
<p><a href="https://killbill.io/blog/persistent-bus-in-kill-bill/" class="bare">https://killbill.io/blog/persistent-bus-in-kill-bill/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ecosystem">Ecosystem</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/killbill/killbill-integration-tests" class="bare">https://github.com/killbill/killbill-integration-tests</a>: while each repository contains its own test suites, from unit tests to functional tests (with and without a persistent layer), as well as end-to-end tests (see the <code>beatrix</code> and <code>profiles/killbill</code> tests in the main killbill repository for example), the killbill-integration-tests repository adds another set of tests which focus on long running scenarios against a running Kill Bill server. This also gives you a base framework to develop your own tests, to verify the integration of Kill Bill in your environment and to make sure it follows your business rules.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-client-java" class="bare">https://github.com/killbill/killbill-client-java</a>, <a href="https://github.com/killbill/killbill-client-ruby" class="bare">https://github.com/killbill/killbill-client-ruby</a>, etc. provide clients for the HTTP API in various languages.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-stripe-plugin" class="bare">https://github.com/killbill/killbill-stripe-plugin</a>, <a href="https://github.com/killbill/killbill-avatax-plugin" class="bare">https://github.com/killbill/killbill-avatax-plugin</a>, etc. provide integrations with third-party providers.</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-analytics-plugin" class="bare">https://github.com/killbill/killbill-analytics-plugin</a>, etc. provide additional functionality (e.g. notification plugins).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_date_time_and_timezone">Date, Time and Timezone</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A few general concepts around time in Kill Bill:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kill Bill&#8217;s granularity is the day, and as a result the system will not invoice for portions of a day.</p>
</li>
<li>
<p>Each account in Kill Bill has a default timezone and that timezone is used throughout the system to be able to convert a DateTime into a Date into the account Timezone.</p>
</li>
<li>
<p>Kill Bill will internally use UTC for all its Datetime manipulation, but any Date information is interpreted as a Date in the account timezone.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_mysql_date_datetime_timestamp">Mysql Date, DateTime, Timestamp</h3>
<div class="paragraph">
<p>We are only relying on date and datetime which are not sensitive to the MySQL timezone setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Datetime: Storing a Datetime value into MySQL relies on <code>datetime</code> which is independent of the mysql time_zone. It is stored as a UTC value, and the selected value is always the same, regardless of the MySQL timezone.</p>
</li>
<li>
<p>LocalDate: Storing a LocalDate value into MySQL relies on <code>date</code> which is also independent of the MySQL time_zone.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_system_configuration">System Configuration</h3>
<div class="paragraph">
<p>From an operation point of view, there are different places where timezone may be set:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Server on which Kill Bill runs</p>
</li>
<li>
<p>JVM setting</p>
</li>
<li>
<p>Database server</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>It is required to have Kill Bill runs in UTC for correct serialization of DateTime/LocalDate.</strong> Actually, in Java, there is no UTC timezone setting but instead <code>GMT</code>. In a first approximation, we will consider those identical, even though they are not and could lead to some rare issues.</p>
</div>
<div class="paragraph">
<p>When Kill Bill starts, it will override the default timezone if this one was specified as a system property with something different than GMT. The code will log a WARN message and proceed to do so, to avoid issues later down the road.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rest_apis">REST APIs</h3>
<div class="paragraph">
<p>Kill Bill APIs that accept dates as an argument will allow for the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A fully qualified Datetime (a point in time)</p>
</li>
<li>
<p>A Date</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is a need to convert from a Datetime to a Date, the conversion will occur by specifying the account timezone, so the customer sees the resulting Date in their timezone. This would, for instance, be the case when triggering a future invoice by specifying a target Datetime.</p>
</div>
<div class="paragraph">
<p>If there is a need to convert from a Date to Datetime, this is obviously more subtle as we can&#8217;t infer the additional precision to compute the time. The Date is always interpreted to be a Date as seen by the customer, that is in the account timezone.</p>
</div>
<div class="paragraph">
<p>The system will use the reference time on the account in such a way that converting back from that fully qualified Datetime using the account timezone would give us back the original Date provided.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_changes_in_a_day">Multiple changes in a day</h3>
<div class="paragraph">
<p>So what happens if a user is making several subscription changes within the same day?</p>
</div>
<div class="paragraph">
<p>In the default mode, Kill Bill will react to changes immediately and trigger a new invoice for each change, which in turn might result in a charge.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider the following case, where there exists 3 monthly plans (Bronze, Silver and Gold), ordered by ascending price:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initially, the customer is invoiced for the Bronze, from january 1st to feb 1st. By default a payment would also be made.</p>
</li>
<li>
<p>On January 1st again, the customer changes its mind and moves to Silver. A new invoice is generated that will credit the full month&#8201;&#8212;&#8201;including the day of january 1st&#8201;&#8212;&#8201;and the new plan is now invoiced from january 1st to february 1st and the credit generated is immediately used, so in the end the customer is really only invoiced for the difference of the price between the 2 plans; Additionally, a new payment is made for that amount.</p>
</li>
<li>
<p>If now the customer changes its plan on Jan 2nd, the portion from January 1st to January 2nd will be invoiced for the Silver plan and the portion from January 2nd to February 1st will be invoiced for the Gold plan.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From an entitlement point of view, the system will reflect the current plan and therefore two different calls to retrieve the plan information on January 1st may lead to different results since there was a change of plan during that day.</p>
</div>
</div>
</div>
</div></div><div class="bottom-nav-links"><a href="#" id="prev-nav-link" class="bottom-nav-link card prev"><span class="arrow-icon left"><svg class="i-arrow" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg><span class="prev-text">Previous</span></span><span id="prev-navigator" class="bottom-nav-text">Prev</span>                               </a><a href="#" id="next-nav-link" class="bottom-nav-link card next"><span class="arrow-icon"><span class="next-text">Next</span><svg class="i-arrow icon-left" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg></span><span id="next-navigator" class="bottom-nav-text">Next</span></a></div></article></div><div class="bd-links-wrapper"><nav class="bd-links toc right-side-menu" id="myScrollspy" data-toggle="toc"></nav></div></div></div></div></div></main><script src="javascripts/jquery-3.6.1.min.js"></script><script src="javascripts/bootstrap.min.js"></script><script src="javascripts/bootstrap-toc.min.js"></script><script type="module" src="javascripts/kb.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});</script><script>
  jQuery(document).ready(function($){
    $('.sidebar-nav .icon-title').on('click', function (e) {
      e.preventDefault();
      $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
      $('.sidebar-nav > .navbar-nav > li').removeClass('open');

      if($(this).next().is(':visible')){
        $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
        $('.sidebar-nav > .navbar-nav > li').removeClass('open');
      } else {
        $(this).parent().addClass('open');
        $(this).next().slideDown(200);
      }
    });

    let pageURL = $(location).attr("href");
    pageURL = pageURL.includes('.html') ? pageURL : pageURL + '.html';
    $('.nav-link').each(function() {
      if (pageURL.toLowerCase().includes($(this).attr('href').toLowerCase())) {
        $(this).parent().addClass('list-item-active');
        $(this).parent().parent().addClass('active-list');
        $(this).parent().parent().prev().addClass('bd-link-active-wrap');
      }
    });
  });
</script>
</body></html>