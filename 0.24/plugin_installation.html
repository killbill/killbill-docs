<!DOCTYPE html><html lang="en"><head><title>Plugin Layout, Installation, and Configuration</title><style>pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */</style><link rel="icon" type="image/x-icon" href="/stylesheets/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"><link rel="stylesheet" href='stylesheets/bootstrap.min.css'><link rel="stylesheet" href='stylesheets/bootstrap-toc.min.css'><link rel="stylesheet" href="stylesheets/kb.css"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Plugin Layout, Installation, and Configuration"></head><body data-spy="scroll" data-target="#myScrollspy" data-offset="100"><div class="loader-wrapper"><div id="loading"></div></div><header class="header sticky" id="header"><div class="header-wrapper"><div class="container-fluid"><div class="row flex-xl-nowrap justify-content-evenly"><div class="header-logo"><div class="logo"><a href="/"><img src="/stylesheets/images/logo/light-logo.svg" style="height:38px" alt="Kill Bill Docs" id="logo" height="38" width="146"></a></div><div class="switch"><input type="checkbox" aria-label="Search" name="theme-toggle" id="theme-toggle"><span class="slider round"></span></div></div><div class="nav-toggler sidebar-toggler"><svg class="hamburger" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 7C20.75 7.41421 20.4142 7.75 20 7.75L4 7.75C3.58579 7.75 3.25 7.41421 3.25 7C3.25 6.58579 3.58579 6.25 4 6.25L20 6.25C20.4142 6.25 20.75 6.58579 20.75 7Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 12C20.75 12.4142 20.4142 12.75 20 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L20 11.25C20.4142 11.25 20.75 11.5858 20.75 12Z" fill=""/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 17C20.75 17.4142 20.4142 17.75 20 17.75L4 17.75C3.58579 17.75 3.25 17.4142 3.25 17C3.25 16.5858 3.58579 16.25 4 16.25L20 16.25C20.4142 16.25 20.75 16.5858 20.75 17Z" fill=""/></svg></div><div class="header-search"><div class="search-form-wrapper"><div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;"></div></div></div></div></div></div></header><main class="main sidebar-show"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="sidebar-wrapper"><aside class="sidebar"><div class="sidebar__control"><svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.33316 10.6665L1.6665 5.99992L6.33316 1.33325" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><nav class="sidebar-nav"><ul class="nav navbar-nav"><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Getting Started</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li><a class="nav-link" href="/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="/latest/getting_started.html">Getting Started (Installation)</a></li><li><a class="nav-link" href="/latest/quick_start_with_kaui.html">Quick Start with Kaui</a></li><li><a class="nav-link" href="/latest/quick_start_with_kb_api.html">Quick Start with the Kill Bill API</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Installation</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="/latest/userguide_deployment.html">Going to Production</a></li><li><a class="nav-link" href="/latest/how-to-upgrade-the-database.html">Database Migrations</a></li><li><a class="nav-link" href="/latest/PostgreSQL.html">PostgreSQL Setup</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;Notes</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">AWS</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/aws.html">AWS Introduction</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-single-tier-system.html">Single-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-multi-tier-system.html">Multi-Tier Setup</a></li><li><a class="nav-link" href="/latest/how-to-set-up-a-cloud-formation-system.html">CloudFormation Setup</a></li><li><a class="nav-link" href="/latest/aws-container.html">AWS Container Setup</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-single-tier-system.html">Single-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-multi-tier-system.html">Multi-Tier Maintenance</a></li><li><a class="nav-link" href="/latest/how-to-maintain-a-cloud-formation-system.html">CloudFormation Maintenance</a></li><li><a class="nav-link" href="/latest/explanation-https-and-certificates.html">HTTPS and Certificates</a></li><li><a class="nav-link" href="/latest/how-to-add-a-certificate-using-ACM.html">How to add a certificate using ACM</a></li><li><a class="nav-link" href="/latest/using-ses-with-aws.html">Using SES with AWS</a></li><li><a class="nav-link" href="/latest/aws-tools.html">AWS Observability Tools</a></li><li><a class="nav-link" href="/latest/metrics-datadog.html">Managing Metrics with Datadog</a></li><li><a class="nav-link" href="/latest/metrics-newrelic.html">Managing Metrics with New Relic</a></li><li><a class="nav-link" href="/latest/metrics-cloudwatch.html">Managing Metrics with Cloudwatch</a></li><li><a class="nav-link" href="/latest/errors-rollbar.html">Error Tracking with Rollbar</a></li><li><a class="nav-link" href="/latest/errors-sentry.html">Error Tracking with Sentry</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Manuals</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="/latest/userguide_payment.html">Payment Processing</a></li><li><a class="nav-link" href="/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="/latest/email-notification-plugin.html">Email Notification Plugin</a></li><li><a class="nav-link" href="/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="/latest/userguide_analytics.html">Analytics Plugin</a></li><li><a class="nav-link" href="/latest/userguide_configuration.html">Kill Bill&nbsp;Configuration</a></li><li><a class="nav-link" href="/latest/internationalization.html">Kill Bill&nbsp;Internationalization</a></li><li><a class="nav-link" href="/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Tutorials</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plan_alignment.html">Plans Alignments</a></li><li><a class="nav-link" href="/latest/overdue.html">Overdue System</a></li><li><a class="nav-link" href="/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="/latest/ha.html">Hierarchical Accounts</a></li><li><a class="nav-link" href="/latest/catalog-examples.html">Catalog Examples</a></li><li><a class="nav-link" href="/latest/invoice_examples.html">Invoice Examples</a></li><li><a class="nav-link" href="/latest/invoice_templates.html">Invoice Templates</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Integration</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API Reference</a></li><li><a class="nav-link" href="/latest/swagger_documentation.html">Swagger UI Documentation</a></li><li><a class="nav-link" href="/latest/postman.html">Postman Integration</a></li><li><a class="nav-link" href="/latest/debugging.html">Debugging</a></li><li><a class="nav-link" href="/latest/push_notifications.html">Push Notifications</a></li><li><a class="nav-link" href="/latest/kill_bill_events.html">Kill Bill Events</a></li><li><a class="nav-link" href="/latest/events-to-aws-sqs.html">Kill Bill Events to AWS SQS</a></li><li><a class="nav-link" href="/latest/how-to-use-kpm-diagnostic.html">KPM Diagnostic Usage</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Plugin Development</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_introduction.html">Plugin Introduction</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_development.html">Plugin Development</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_installation.html">Plugin Installation</a></li><li><a class="nav-link" href="/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a class="nav-link" href="/latest/notification_plugin.html">Notification Plugins</a></li><li><a class="nav-link" href="/latest/payment_plugin.html">Payment Plugins</a></li><li><a class="nav-link" href="/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a class="nav-link" href="/latest/usage_plugin.html">Usage Plugins</a></li><li><a class="nav-link" href="/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a class="nav-link" href="/latest/catalog_plugin.html">Catalog Plugins</a></li><li><a class="nav-link" href="/latest/entitlement_plugin.html">Entitlement Plugins</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Operational Guides</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/deploy_to_kubernetes.html">Kubernetes (K8s) Deployment</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/user_management.html">Users, Roles, and Permissions</a></li><li><a class="nav-link" href="/latest/plugin_management.html">Plugin Management</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Client Libraries</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/java_client.html">Java</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a class="nav-link" href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">KillBill Go </a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">About Kill Bill</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/demo.html">Demo</a></li><li><a class="nav-link" href="/latest/features.html">Features List</a></li><li><a class="nav-link" href="/latest/faq.html">Technical FAQs</a></li><li><a class="nav-link" href="/latest/Kill-Bill-Glossary.html">Glossary</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">Internal</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/internal_design.html">Internal Design</a></li><li><a class="nav-link" href="/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a class="nav-link" href="/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a class="nav-link" href="/latest/development.html">Development Environment</a></li></ul></li><li><div class="icon-title"><a class="bd-toc-link main-link" role="button">References</a><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API Schema</a></li><li><a class="nav-link" href="/latest/catalog.xsd">Catalog XSD Reference</a></li><li><a class="nav-link" href="/latest/overdue.xsd">Overdue XSD Reference</a></li></ul></li></ul></nav><a class="doclink" href="mailto:support@killbill.io">Report a doc problem</a></aside></div><div class="article-container"><div class="center-content"><div class="main-wrapper"><article class="content-wrapper"><div class="banner"><h1>Plugin Layout, Installation, and Configuration</h1></div><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document explains plugin layout, installation and plugin configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Ensure that you have gone through the <a href="https://docs.killbill.io/latest/what_is_kill_bill.html"><em>What is Kill Bill</em></a> document and are familiar with Kill Bill.</p>
</li>
<li>
<p>Ensure that you have gone through the <a href="https://docs.killbill.io/latest/plugin_introduction.html"><em>Plugin Introduction</em></a> document and are familiar with Kill Bill plugins.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugin_layout">Plugin Layout</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">Overview</h3>
<div class="paragraph">
<p>Kill Bill scans the file system on startup and starts all the plugins that were detected. Kill Bill uses the value of the <code>org.killbill.osgi.bundle.install.dir</code> property to determine the root of the plugin directory structure. (See <a href="https://docs.killbill.io/latest/userguide_configuration.html#configuration_properties_table">Kill Bill Configuration Properties</a>). By default, this value is set to <code>/var/tmp/bundles</code>.</p>
</div>
<div class="paragraph">
<p>The directory structure looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>root (org.killbill.osgi.bundle.install.dir)
|_sha1.yml
|_platform
|_plugins
  |_java
  |_plugin_identifiers.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Under <code>root</code>, you will find the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>sha1.yml</code> file which is a used by the <code>KPM</code> tool to keep track of artifacts that were already downloaded to avoid downloading binaries already present on the filesystem. KPM also offers the <code>--force-download</code> to override that behavior.</p>
</li>
<li>
<p>A <code>platform</code> folder: Also known as <strong>bundles</strong>. This is a directory for deploying Kill Bill&#8217;s internal OSGI bundles, such as KPM, Logging, Eureka, Metrics, and any JARs/OSGI plugins from <code>&lt;killbill-platform&gt;/osgi-bundles</code>. Deploying 3rd party plugins into this directory is not recommended.</p>
</li>
<li>
<p>A <code>plugins</code> folder: This is where your plugin or 3rd party plugins are deployed. This folder contains:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>java</code> folder. Under <code>java</code>, you will find one entry per plugin per version.
For instance, if we had installed two versions for the <code>stripe</code> plugin, we would see the following (<code>SET_DEFAULT</code> is a symbolic link that point to the default active version):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-w"> </span>java
<span class="tok-w">  </span><span class="tok-p">|</span>_killbill-stripe
<span class="tok-w">   </span><span class="tok-p">|</span>_<span class="tok-w"> </span><span class="tok-m">3</span>.0.2
<span class="tok-w">   </span><span class="tok-p">|</span>_<span class="tok-w"> </span><span class="tok-m">3</span>.0.1
<span class="tok-w">   </span><span class="tok-p">|</span>_<span class="tok-w"> </span>SET_DEFAULT</code></pre>
</div>
</div>
</li>
<li>
<p>A <code>plugin_identifiers.json</code> file which is used to keep a mapping between the <code>pluginKey</code> (the user visible plugin identifer), and the <code>pluginName</code> (runtime identifier used by Kill Bill when scanning the filesystem). The next section provides more details about those.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_plugin_coordinates_plugin_key_plugin_name">Plugin Coordinates, Plugin Key, Plugin Name, &#8230;&#8203;</h3>
<div class="paragraph">
<p>Today, plugins are released through maven and are therefore identified through their maven coordinates. We might support other schemes in the future but today this is the only way we offer to download and install publicly released plugins. Plugin Coordinates are too cumbersome to manipulate though and are unsuitable for non-published plugins (typical use case for a plugin being developed), so we introduced some identifers.</p>
</div>
<div class="paragraph">
<p>As mentioned earlier, Kill Bill scans the filesystem (path specified by the <code>org.killbill.osgi.bundle.install.dir</code> property in the <a href="https://docs.killbill.io/latest/userguide_configuration.html#global_configuration_properties"><em>Kill Bill configuration file</em></a>) on start-up to detect and then start all the plugins. The name on the filesystem (e.g. in our previous example <code>killbill-stripe</code>) constitutes what we call the <strong><code>pluginName</code></strong>.</p>
</div>
<div class="paragraph">
<p>When installing using KPM, the <code>pluginName</code> is dependent on how the plugin was packaged. For well known publicly available Kill Bill plugins, we adopted a (sane) convention, but we have no way to enforce that convention for third party plugins. Also, note that we could change the name of <code>killbill-stripe</code> to <code>foo</code> on the filesystem (<code>mv killbill-stripe foo</code>) and then suddenly Kill Bill would see that plugin as being the <code>foo</code> plugin. Therefore, the <code>pluginName</code> is not a reliable way to identify the plugin, and is used solely by Kill Bill as an runtime identifier.</p>
</div>
<div class="paragraph">
<p>The <code>pluginKey</code> is the identifier for the plugin and is used for all the user visible operations, whether through the KPM command line tool or whether using the <a href="https://docs.killbill.io/latest/plugin_management.html"><em>Plugin Management APIs</em></a>.
There is a distinction to be made between publicly released Kill Bill plugins and third party plugins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(Publicly Released) Kill Bill Plugins: All the plugins developed by the Kill Bill core team are maintained in a <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml"><em>repository</em></a> (we provide today a simple file-based repository, but this may change in the future as we start accepting certified third-party plugins).
A key identifies each entry in that repository, and that key is the <code>pluginKey</code>.</p>
</li>
<li>
<p>Third party plugins: For third party plugins, the key is specified at the time the plugin gets installed. The key must be of the form <code>&lt;prefix&gt;::&lt;something&gt;</code> to make sure there is no name collision with Kill Bill plugin keys.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plugin_installation">Plugin Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installing_via_kaui">Installing via Kaui</h3>
<div class="paragraph">
<p>In order to deploy a plugin via Kaui, you need to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open Kaui.</p>
</li>
<li>
<p>Click on the <strong>Plug</strong> Icon at the top and click on kpm.</p>
</li>
<li>
<p>Click on <strong>Install New Plugin</strong>.</p>
</li>
<li>
<p>Click on the <strong>Download</strong> icon next to the plugin that you wish to install.</p>
</li>
<li>
<p>Refresh the page after a while.</p>
</li>
<li>
<p>Once the plugin download is complete, it will appear in <em>Stopped</em> status. Click on the <strong>Start</strong> button next to it to start the plugin.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_via_kpm">Installing via KPM</h3>
<div class="paragraph">
<p>The standard way to deploy plugins is to use the Kill Bill Package Manager (<a href="https://github.com/killbill/killbill-cloud/blob/master/kpm">KPM</a>).</p>
</div>
<div class="paragraph">
<p>KPM can be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploying <strong>custom</strong> (plugins developed by you) plugins.</p>
</li>
<li>
<p>Deploying <strong>Kill Bill</strong> (plugins maintained by the Kill Bill team) plugins.</p>
</li>
<li>
<p>Deploying <strong>Third-party</strong> (plugins developed and maintained by a third party and not by the Kill Bill team) plugins.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_custom_plugins">Custom Plugins</h4>
<div class="paragraph">
<p>If you are a developer and either modifying an existing plugin or creating a new plugin, you can use KPM to install the plugin.</p>
</div>
<div class="paragraph">
<p>A custom plugin can be installed using the <code>kpm install_java_plugin</code> command as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>kpm<span class="tok-w"> </span>install_java_plugin<span class="tok-w"> </span><span class="tok-s1">&#39;&lt;plugin-key&gt;&#39;</span><span class="tok-w"> </span>--from-source-file<span class="tok-o">=</span><span class="tok-s2">&quot;&lt;jar_path&gt;.jar&quot;</span>
--destination<span class="tok-o">=</span><span class="tok-s2">&quot;&lt;path_to_install_plugin&gt;&quot;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>plugin-key</code> with an appropriate value. We suggest that you specify a plugin_key with a namespace <strong>dev:</strong> to make it clear this is not a released version. So, you can use a plugin-key called <code>dev:pluginname</code>.</p>
</li>
<li>
<p>Replace <code>&lt;jar_path&gt;</code> by the full path of the JAR file.</p>
</li>
<li>
<p>Replace <code>&lt;path_to_install_plugin&gt;</code> with the path where you want to install the plugin. This path should match the path specified by the <code>org.killbill.osgi.bundle.install.dir</code> property in the <a href="https://docs.killbill.io/latest/userguide_configuration.html"><em>Kill Bill Configuration File</em></a>.</p>
</li>
<li>
<p>If <code>--destination</code> is not specified, the plugin is installed by default in the <code>/var/tmp/bundles</code> directory</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_kill_bill_plugins">Kill Bill Plugins</h4>
<div class="paragraph">
<p>A Kill Bill plugin is a plugin that is maintained by the Kill Bill team. Such plugins have a key in the Kill Bill <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml"><em>Plugin Directory</em></a>. So, in order to install such a plugin, its key needs to be specified.</p>
</div>
<div class="paragraph">
<p>A Kill Bill Java plugin can be installed using the <code>kpm install_java_plugin</code> command as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>kpm<span class="tok-w"> </span>install_java_plugin<span class="tok-w"> </span><span class="tok-s1">&#39;&lt;plugin-key&gt;&#39;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>plugin-key</code> with an appropriate value from the Kill Bill <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml"><em>Plugin Directory</em></a>.</p>
</li>
<li>
<p>For example, in order to install the stripe plugin, you can replace <code>plugin-key</code> with <code>stripe</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_third_party_plugins">Third-party Plugins</h4>
<div class="paragraph">
<p>Third-party plugins are plugins developed and maintained by a third party and not by the Kill Bill team.  Such plugins can be installed via KPM from their binary repositories (Maven Central, GitHub Packages and Cloudsmith).</p>
</div>
<div class="paragraph">
<p>A third party Java plugin can be installed using the <code>kpm install_java_plugin</code> command as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>kpm<span class="tok-w"> </span>install_java_plugin<span class="tok-w"> </span><span class="tok-s1">&#39;&lt;plugin-key&gt;&#39;</span>
--group_id<span class="tok-o">=</span><span class="tok-s2">&quot;&lt;group id&gt;&quot;</span>
--artifact_id<span class="tok-o">=</span><span class="tok-s2">&quot;&lt;artifact_id&gt;&quot;</span>
--version<span class="tok-o">=</span><span class="tok-s2">&quot;&lt;version&gt;&quot;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>plugin-key</code> with the plugin name.</p>
</li>
<li>
<p>Replace <code>&lt;group id&gt;</code>, <code>&lt;artifact_id&gt;</code>, <code>&lt;version&gt;</code> with appropriate values from the binary repository.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_via_plugin_management_apis">Installing via Plugin Management APIs</h3>
<div class="paragraph">
<p>Kill Bill provides several plugin management APIs which can be used to install/start/stop and take other actions on plugins. This is explained in detail in the <a href="https://docs.killbill.io/latest/plugin_management.html"><em>Plugin Management APIs</em></a> document.</p>
</div>
<div class="paragraph">
<p>A plugin can be installed via the plugin management API as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: stephane&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{&quot;isSystemCommandType&quot;:&quot;true&quot;,&quot;nodeCommandType&quot;:&quot;INSTALL_PLUGIN&quot;,&quot;nodeCommandProperties&quot;:[{&quot;key&quot;:&quot;pluginKey&quot;, &quot;value&quot;:&quot;payment-test&quot;},{&quot;key&quot;:&quot;pluginArtifactId&quot;, &quot;value&quot;: &quot;payment-test-plugin&quot;},{&quot;key&quot;:&quot;pluginGroupId&quot;, &quot;value&quot;: &quot;org.kill-bill.billing.plugin.java&quot;}, {&quot;key&quot;: &quot;pluginType&quot;, &quot;value&quot;: &quot;java&quot;} ]}&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this also requires starting the plugin explicitly using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
-H<span class="tok-w"> </span><span class="tok-s2">&quot;Content-Type: application/json&quot;</span><span class="tok-w"> </span><span class="tok-se">\</span>
-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: stephane&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
--data-binary<span class="tok-w"> </span><span class="tok-s1">&#39;{&quot;isSystemCommandType&quot;:true,&quot;nodeCommandType&quot;:&quot;RESTART_PLUGIN&quot;,&quot;nodeCommandProperties&quot;:[{&quot;key&quot;:&quot;pluginKey&quot;,&quot;value&quot;:&quot;payment-test&quot;}]}&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/nodesInfo&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploying_by_hand">Deploying by Hand</h3>
<div class="paragraph">
<p>As explained in <a href="#_overview">overview section</a>, Kill Bill has two locations to deploying plugins:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/platform</code> (bundles) for Kill Bill internal plugins, and;</p>
</li>
<li>
<p><code>/plugins</code> for 3rd party plugins.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Deploying bundles is straightforward:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build <a href="https://github.com/killbill/killbill-platform">killbill-platform</a> project.</p>
</li>
<li>
<p>Copy desired bundles to <code>/platform</code> folder.</p>
</li>
<li>
<p>Start Kill Bill server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to deploy 3rd party or your own plugins, you need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new folder with the name that represents your plugin. It is a good practice to set plugin name with "-plugin" suffix.</p>
</li>
<li>
<p>Add a sub-folder that represents your plugin version.</p>
</li>
<li>
<p>Copy your plugin JAR file into the folder you&#8217;ve created in step 2. It is recommended that your plugin jar is named in the following format: <code>&lt;plugin-name&gt;-&lt;semver-plugin-version&gt;.jar</code>.</p>
</li>
<li>
<p>Start Kill Bill server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, the <code>adyen</code> plugin with version <code>0.3.2</code> would show up as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>java
|_adyen-plugin
  |_ 0.3.2
    |_ adyen-plugin-0.3.2.jar</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin_configuration">Plugin Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_system_properties">System Properties</h3>
<div class="paragraph">
<p>Kill Bill plugins can access Kill Bill properties. Both system properties passed to the JVM and properties from the <a href="https://docs.killbill.io/latest/userguide_configuration.html#global_configuration_properties"><em>Kill Bill configuration file</em></a> are accessible to the plugins and can be used to tweak the behavior of the plugin as needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_file">Configuration File</h3>
<div class="paragraph">
<p>A plugin can also specify its own property files which can be used to configure global settings for a plugin. Such property files need to be part of the archive (the OSGI mechanism will make sure these are only visible to the particular plugin):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The property file needs to be on the classpath (<code>resource</code> directory)</p>
</li>
<li>
<p>There is no restriction on the format of the property file, but typically  plugins will rely on <code>key-value</code> properties, <code>json</code> or <code>xml</code> files.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="per-tenant-configuration">Per-tenant Configuration</h3>
<div class="paragraph">
<p>The two previous mechanisms work well for global settings, but are inadequate to configure the plugins on a per-tenant fashion (e.g for a payment plugin interacting with a payment gateway, different credentials might be needed for different tenants). In those situations, Kill Bill provides APIs to upload/retrieve/delete per-tenant plugin configurations.</p>
</div>
<div class="paragraph">
<p>At a high level, this mechanism works in the following way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An administrator uses the Kill Bill API (or Kaui) to upload the configuration.</p>
</li>
<li>
<p>Kill Bill stores the config in the <code>tenant_kvs</code> table using a <code>tenant_key</code> of <code>PLUGIN_CONFIG_&lt;pluginName&gt;</code> and sets the <code>tenant_value</code> with the config provided.</p>
</li>
<li>
<p>Kill Bill broadcasts the change across the cluster of nodes and emits a configuration bus event: <code>TENANT_CONFIG_CHANGE</code> or <code>TENANT_CONFIG_DELETION</code>.</p>
</li>
<li>
<p>The plugin code is <strong>responsible to listen to these events</strong> and take appropriate action to reload/delete its configuration for that specific tenant.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can use the following API endpoints to upload, retrieve and delete plugin configuration:</p>
</div>
<div class="sect3">
<h4 id="upload_per_tenant_config">Upload New Config</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>POST<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiKey: bob&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiSecret: lazar&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;Content-Type: text/plain&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-d<span class="tok-w"> </span><span class="tok-s1">&#39;&lt;CONFIG&gt;&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/&lt;pluginName&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;CONFIG&gt;</code> is treated as a string and it could be the content of an <code>xml</code> or <code>json</code> file, a list of <code>key-value</code> parameters, &#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_retrieve_config">Retrieve Config</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiKey: bob&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiSecret: lazar&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;Content-Type: application/json&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/&lt;pluginName&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_delete_config">Delete Config</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl<span class="tok-w"> </span>-v<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-X<span class="tok-w"> </span>DELETE<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-u<span class="tok-w"> </span>admin:password<span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiKey: bob&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-ApiSecret: lazar&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>-H<span class="tok-w"> </span><span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span><span class="tok-w"> </span><span class="tok-se">\</span>
<span class="tok-w">     </span>http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/&lt;pluginName&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_reading">Further Reading</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.killbill.io/latest/plugin_development.html"><em>Plugin Development</em></a></p>
</li>
<li>
<p><a href="https://docs.killbill.io/latest/plugin_management.html"><em>Plugin Management</em></a></p>
</li>
</ul>
</div>
</div>
</div></div><div class="bottom-nav-links"><a href="#" id="prev-nav-link" class="bottom-nav-link card prev"><span class="arrow-icon left"><svg class="i-arrow" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg><span class="prev-text">Previous</span></span><span id="prev-navigator" class="bottom-nav-text">Prev</span>                               </a><a href="#" id="next-nav-link" class="bottom-nav-link card next"><span class="arrow-icon"><span class="next-text">Next</span><svg class="i-arrow icon-left" width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.19526 1.02876C4.45561 0.768409 4.87772 0.768409 5.13807 1.02876C5.39842 1.28911 5.39842 1.71122 5.13807 1.97157L2.27614 4.8335H11.3333C11.7015 4.8335 12 5.13197 12 5.50016C12 5.86835 11.7015 6.16683 11.3333 6.16683H2.27614L5.13807 9.02876C5.39842 9.28911 5.39842 9.71122 5.13807 9.97157C4.87772 10.2319 4.45561 10.2319 4.19526 9.97157L0.195261 5.97157C-0.0650883 5.71122 -0.0650883 5.28911 0.195261 5.02876L4.19526 1.02876Z" fill=""/></svg></span><span id="next-navigator" class="bottom-nav-text">Next</span></a></div></article></div><div class="bd-links-wrapper"><nav class="bd-links toc right-side-menu" id="myScrollspy" data-toggle="toc"></nav></div></div></div></div></div></main><script src="javascripts/jquery-3.6.1.min.js"></script><script src="javascripts/bootstrap.min.js"></script><script src="javascripts/bootstrap-toc.min.js"></script><script type="module" src="javascripts/kb.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script>docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});</script><script>
  jQuery(document).ready(function($){
    $('.sidebar-nav .icon-title').on('click', function (e) {
      e.preventDefault();
      $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
      $('.sidebar-nav > .navbar-nav > li').removeClass('open');

      if($(this).next().is(':visible')){
        $('.sidebar-nav .nav.navbar-nav .nav.navbar-nav').slideUp(200);
        $('.sidebar-nav > .navbar-nav > li').removeClass('open');
      } else {
        $(this).parent().addClass('open');
        $(this).next().slideDown(200);
      }
    });

    let pageURL = $(location).attr("href");
    pageURL = pageURL.includes('.html') ? pageURL : pageURL + '.html';
    $('.nav-link').each(function() {
      if (pageURL.toLowerCase().includes($(this).attr('href').toLowerCase())) {
        $(this).parent().addClass('list-item-active');
        $(this).parent().parent().addClass('active-list');
        $(this).parent().parent().prev().addClass('bd-link-active-wrap');
      }
    });
  });
</script>
</body></html>