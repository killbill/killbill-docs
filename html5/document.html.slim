doctype 5
html lang=(attr :lang, 'en' unless attr? :nolang)
  head
    meta charset=(attr :encoding, 'UTF-8')
    /[if IE]
      meta http-equiv="X-UA-Compatible" content="IE=edge"
    meta name='viewport' content='width=device-width, initial-scale=1.0'
    meta name='generator' content="Asciidoctor #{attr 'asciidoctor-version'}"
    = html_meta_if 'application-name', (attr 'app-name')
    = html_meta_if 'author', (attr :authors)
    = html_meta_if 'copyright', (attr :copyright)
    = html_meta_if 'description', (attr :description)
    = html_meta_if 'keywords', (attr :keywords)

    link rel="stylesheet" href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css'
    link rel="stylesheet" href='https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css'
    link rel="stylesheet" href='https://cdn.jsdelivr.net/npm/@docsearch/css@3'
    link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"

    style type="text/css"


    title=((doctitle sanitize: true) || (attr 'untitled-label'))

    = styles_and_scripts
    - unless (docinfo_content = docinfo).empty?
      =docinfo_content
  body(
    data-spy="scroll" data-target="#toc"
    id=id
    class=[(attr :doctype), ("#{attr 'toc-class'} toc-#{attr 'toc-position', 'left'}" if (attr? 'toc-class') && (attr? :toc) && (attr? 'toc-placement', 'auto'))]
    style=style_value(max_width: (attr 'max-width')))
    header.header
      .header-wrapper
        .container-fluid
          .header-inner.row.flex-xl-nowrap
            .header-logo
              .logo
                a href="https://docs.killbill.io"
                  img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" style="height:41px" alt="KillBill Docs"
            .header-right
              .header-search
                .search-form-wrapper
                  #docsearch style="height: 43px; display: flex; align-items: center; width: 100%;"
              .header-hamburger-wrapper
                span.header-hamburger
                  span
    main.main
      .open-mobile-right-nav
      .container-fluid
        .row.flex-xl-nowrap
          .sidebar-wrapper
            aside.sidebar
              include _main_toc.html
              a.doclink href="mailto:support@killbill.io"
                | Report a doc problem
          .main-wrapper
            article.content-wrapper
              .banner
                .bg-image
                  | <svg class="absolute-figure circle1" width="41" height="38" viewBox="0 0 41 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <ellipse cx="12.5" cy="10.5" rx="28.5" ry="27.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle2" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle3" width="97" height="97" viewBox="0 0 97 97" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.4"/>
                    </svg>
                    <svg class="absolute-figure circle4" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="7" cy="7" r="7" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle5" width="65" height="23" viewBox="0 0 65 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="32.5" cy="-9.5" r="32.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle6" width="48" height="31" viewBox="0 0 48 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="24" cy="24" r="24" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle7" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle8" width="20" height="10" viewBox="0 0 20 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure circle9" width="49" height="48" viewBox="0 0 49 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.2"/>
                    </svg>
                    <svg class="absolute-figure abstract-figure" width="703" height="174" viewBox="0 0 703 174" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M25.5 246C-96 87.7673 245.949 67.3215 475.548 64.1799C705.146 61.0384 565.01 -188.501 629.653 -188.741C694.297 -188.982 766.062 221.014 766.062 221.014L297.072 460.733C297.072 460.733 147 404.233 25.5 246Z" fill="white" fill-opacity="0.2"/>
                    </svg>
                h1 = header.title
              #content = content
          .bd-links-wrapper
            nav.bd-links.toc.right-side-menu#toc(
              data-toggle="toc"
            )
    script src='https://code.jquery.com/jquery-3.3.1.slim.min.js'
    script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js'
    script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js'
    script src='https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js'
    script src='https://cdn.jsdelivr.net/npm/@docsearch/js@3'
    script src='https://www.googletagmanager.com/gtag/js?id=G-C0HVJ1E78Z'
    | <script>
          setTimeout(function(){
            $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').append('<a href=""><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>');
            $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').each(function(){
              let itemHref = '#' + $(this).attr('id');
              $(this).find('a').attr("href", itemHref);
            })
            $('.content-wrapper table').each(function() {
              $(this).wrap('<div class="table-wrap"></div>')
              $('.table-wrap').each(function() {
                if ($(this).find('table').width() > $(this).width()){
                  $(this).css('max-width', '100%');
                  $(this).css('overflow-x', 'scroll');
                }
              })
            })
            function copyToClipboard(text) {
              let sampleTextarea = document.createElement("textarea");
              document.body.appendChild(sampleTextarea);
              sampleTextarea.value = text;
              sampleTextarea.select();
              document.execCommand("copy");
              document.body.removeChild(sampleTextarea);
            }
            $('.content-wrapper h2 a, .content-wrapper h3 a, .content-wrapper h4 a').on('click', function(){
              setTimeout(function(){
                copyToClipboard($(location).attr("href"));
              }, 500);
            });
            $('.content-wrapper .note td.icon').append('<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/note-icon.png">');

            $('.content pre').parent('.content').prepend('<div class="copy-icon"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 3a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z" fill="#78AECD"/><path d="M6 3a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2 3 3 0 0 1-3 3H9a3 3 0 0 1-3-3Z" fill="#78AECD"/></svg></div>');
            $('.copy-icon svg').on('click', function () {
              copyToClipboard($(this).parent().next().find('code').text());
            });
          }, 1000);

          $('.main').append('<div class="lightbox-modal"> <div id="close-ligtbox">âœ•</div> <div class="img"><img src="" alt=""></div></div><div class="overlay"></div>');
          $('.main img').on('click', function () {
            let path = $(this).attr('src');
            $('.lightbox-modal img').attr('src', path);
            $('.lightbox-modal, .overlay').show();
          });
          $('#close-ligtbox, .overlay').on('click',function () {
            $('.lightbox-modal, .overlay').hide();
          });

      $('.sidebar-toggler').on('click', function () {
        $(this).toggleClass('active');
        $('main.main').toggleClass('sidebar-hide');
      });

      $('.content-wrapper a').filter(function() {
        return this.hostname && this.hostname !== location.hostname;
      }).each(function() {
        $(this).attr({
          target: '_blank',
          title: 'Visit ' + this.href + ' (click to open in a new window)'
        });
      });

      $('.header-hamburger-wrapper').on('click', function () {
        $('body').toggleClass('header-mobile-menu-opened');
      });

      $(document).on('click', '.right-side-menu .nav-link', function () {
        $('body').removeClass('opened-right-nav');
      });
      $('.open-mobile-right-nav').on('click', function () {
        $('body').toggleClass('opened-right-nav');
      });

      if ($(window).width() <= 767) {
        if ($('.header').length) {
          let lastScrollTop = 0;
          $(window).scroll(function () {
            let st = $(this).scrollTop();
            if (st > lastScrollTop) {
              $('.header').addClass('scrolling_down');
              $('.header').removeClass('scrolling_up');
            } else {
              $('.header').addClass('scrolling_up');
              $('.header').removeClass('scrolling_down');
            }
            lastScrollTop = st;
            if (lastScrollTop <= 20) {
              $('.header').removeClass('scrolling_down');
            }
          });
        }
      }

        </script>
    script
      | docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});
    script
      | window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-C0HVJ1E78Z');
    script
      | (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create','UA-32705710-3','auto');
          ga('send','pageview');
          var getOutboundLink = function(url) {
            ga('send', {
              hitType: 'event',
              eventCategory: 'outbound',
              eventAction: 'click',
              eventLabel: url,
              hitCallback: function(){document.location = url;}
            });
          }
